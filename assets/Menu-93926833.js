import{a as ke,_ as ue,s as Te,g as Ie,B as mt,h as be,o as ot,m as Ue,I as at,b as ce,e as Be,p as Ht}from"./index-0afa90f8.js";import{R as bt,u as lt,b as Ut,a as qt,B as Yt}from"./index-aea1db23.js";/* empty css              */import{V as Gt}from"./index-14f83ed7.js";import{I as Jt,C as Qt}from"./index-233553b6.js";import{_ as Ee}from"./index-794c3e2e.js";import{M as ne,a as Wt}from"./MenuDetailForm-186a7e9e.js";import{d as Xt,a as Zt}from"./index-ee7c49fa.js";import{I as kt,a as Ct,b as wt,c as St,M as $e}from"./type-10923189.js";import{u as en}from"./useRequest-a259daa9.js";import{I as Qe}from"./use-popup-manager-465c96d3.js";import{d as Q,e as P,c as w,h as O,o as y,i as N,w as I,f as B,n as C,a as F,k as K,j as L,C as H,D as J,b as j,q as Y,y as tn,t as pe,R as X,S as nn,g as on,r as ae,F as de,l as De,m as Kt,ar as rt,ao as Nt,p as an,O as st,E as it,J as z,H as ln,I as rn}from"./runtime-core.esm-bundler-a91919e4.js";import{T as $t}from"./runtime-dom.esm-bundler-a8993a42.js";import{I as sn}from"./index-c2cfd912.js";import{T as cn,u as oe,t as dn}from"./index-0130073b.js";import{a as un,I as pn}from"./index-b400063d.js";import{d as fn}from"./arco-vue-icon-f8eedcd5.js";import{o as vn}from"./use-teleport-container-b7268e2a.js";import{u as yn}from"./keyboard-7347d57e.js";import{_ as hn}from"./_plugin-vue_export-helper-c27b6911.js";import"./index.es-64699b09.js";import"./index-abba8ea9.js";import"./index-f21684ac.js";import"./index-4366ea7e.js";import"./get-value-by-path-ce777e4d.js";import"./index-c2325203.js";import"./index-12fd1c8c.js";import"./index-70b1777b.js";import"./index-0bf8159a.js";import"./index-f055002a.js";import"./useColorMode-0c4a1808.js";import"./themeColor-47076d31.js";import"./_commonjsHelpers-28e086c5.js";import"./vue-router-daf9fad1.js";import"./constant-7a6a6835.js";const gn=Q({name:"Alert",components:{IconHover:Qe,IconClose:sn,IconInfoCircleFill:kt,IconCheckCircleFill:Ct,IconExclamationCircleFill:wt,IconCloseCircleFill:St},props:{type:{type:String,default:"info"},showIcon:{type:Boolean,default:!0},closable:{type:Boolean,default:!1},title:String,banner:{type:Boolean,default:!1}},emits:{close:e=>!0,afterClose:()=>!0},setup(e,{slots:t,emit:n}){const o=ke("alert"),a=P(!0),i=r=>{a.value=!1,n("close",r)},l=()=>{n("afterClose")},u=w(()=>[o,`${o}-${e.type}`,{[`${o}-with-title`]:Boolean(e.title||t.title),[`${o}-banner`]:e.banner}]);return{prefixCls:o,cls:u,visible:a,handleClose:i,handleAfterLeave:l}}});function mn(e,t,n,o,a,i){const l=O("icon-info-circle-fill"),u=O("icon-check-circle-fill"),r=O("icon-exclamation-circle-fill"),c=O("icon-close-circle-fill"),d=O("icon-close"),m=O("icon-hover");return y(),N($t,{name:"zoom-in-top",onAfterLeave:e.handleAfterLeave},{default:I(()=>[e.visible?(y(),B("div",{key:0,role:"alert",class:C(e.cls)},[e.showIcon&&!(e.type==="normal"&&!e.$slots.icon)?(y(),B("div",{key:0,class:C(`${e.prefixCls}-icon`)},[F(e.$slots,"icon",{},()=>[e.type==="info"?(y(),N(l,{key:0})):e.type==="success"?(y(),N(u,{key:1})):e.type==="warning"?(y(),N(r,{key:2})):e.type==="error"?(y(),N(c,{key:3})):K("v-if",!0)])],2)):K("v-if",!0),L("div",{class:C(`${e.prefixCls}-body`)},[e.title||e.$slots.title?(y(),B("div",{key:0,class:C(`${e.prefixCls}-title`)},[F(e.$slots,"title",{},()=>[H(J(e.title),1)])],2)):K("v-if",!0),L("div",{class:C(`${e.prefixCls}-content`)},[F(e.$slots,"default")],2)],2),e.$slots.action?(y(),B("div",{key:1,class:C(`${e.prefixCls}-action`)},[F(e.$slots,"action")],2)):K("v-if",!0),e.closable?(y(),B("div",{key:2,tabindex:"-1",role:"button","aria-label":"Close",class:C(`${e.prefixCls}-close-btn`),onClick:t[0]||(t[0]=(...b)=>e.handleClose&&e.handleClose(...b))},[F(e.$slots,"close-element",{},()=>[j(m,null,{default:I(()=>[j(d)]),_:1})])],2)):K("v-if",!0)],2)):K("v-if",!0)]),_:3},8,["onAfterLeave"])}var Me=ue(gn,[["render",mn]]);const bn=Object.assign(Me,{install:(e,t)=>{Te(e,t);const n=Ie(t);e.component(n+Me.name,Me)}}),kn=Q({name:"PageHeader",components:{AIconHover:Qe,IconLeft:Jt},props:{title:String,subtitle:String,showBack:{type:Boolean,default:!0}},emits:["back"],setup(e,{emit:t,slots:n}){const o=ke("page-header"),a=l=>{t("back",l)},i=w(()=>[o,{[`${o}-with-breadcrumb`]:Boolean(n.breadcrumb),[`${o}-with-content`]:Boolean(n.default)}]);return{prefixCls:o,cls:i,handleBack:a}}});function Cn(e,t,n,o,a,i){const l=O("icon-left"),u=O("a-icon-hover");return y(),B("div",{class:C(e.cls)},[L("div",{class:C(`${e.prefixCls}-wrapper`)},[e.$slots.breadcrumb?(y(),B("div",{key:0,class:C(`${e.prefixCls}-breadcrumb`)},[F(e.$slots,"breadcrumb")],2)):K("v-if",!0),L("div",{class:C(`${e.prefixCls}-header`)},[L("span",{class:C(`${e.prefixCls}-main`)},[e.showBack?(y(),N(u,{key:0,class:C(`${e.prefixCls}-back-btn`),prefix:e.prefixCls,onClick:e.handleBack},{default:I(()=>[F(e.$slots,"back-icon",{},()=>[j(l)])]),_:3},8,["class","prefix","onClick"])):K("v-if",!0),L("span",{class:C(`${e.prefixCls}-title`)},[F(e.$slots,"title",{},()=>[H(J(e.title),1)])],2),e.$slots.subtitle||e.subtitle?(y(),B("span",{key:1,class:C(`${e.prefixCls}-divider`)},null,2)):K("v-if",!0),e.$slots.subtitle||e.subtitle?(y(),B("span",{key:2,class:C(`${e.prefixCls}-subtitle`)},[F(e.$slots,"subtitle",{},()=>[H(J(e.subtitle),1)])],2)):K("v-if",!0)],2),e.$slots.extra?(y(),B("span",{key:0,class:C(`${e.prefixCls}-extra`)},[F(e.$slots,"extra")],2)):K("v-if",!0)],2)],2),e.$slots.default?(y(),B("div",{key:0,class:C(`${e.prefixCls}-content`)},[F(e.$slots,"default")],2)):K("v-if",!0)],2)}var Re=ue(kn,[["render",Cn]]);const wn=Object.assign(Re,{install:(e,t)=>{Te(e,t);const n=Ie(t);e.component(n+Re.name,Re)}}),Sn=Q({name:"Popconfirm",components:{ArcoButton:mt,Trigger:cn,IconInfoCircleFill:kt,IconCheckCircleFill:Ct,IconExclamationCircleFill:wt,IconCloseCircleFill:St},props:{content:String,position:{type:String,default:"top"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},type:{type:String,default:"info"},okText:String,cancelText:String,okLoading:{type:Boolean,default:!1},okButtonProps:{type:Object},cancelButtonProps:{type:Object},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupContainer:{type:[String,Object]},onBeforeOk:{type:Function},onBeforeCancel:{type:Function}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,ok:()=>!0,cancel:()=>!0},setup(e,{emit:t}){const n=ke("popconfirm"),{t:o}=yn(),a=P(e.defaultPopupVisible),i=w(()=>{var E;return(E=e.popupVisible)!=null?E:a.value}),l=P(!1),u=w(()=>e.okLoading||l.value);let r=0;const c=()=>{r++,l.value&&(l.value=!1),a.value=!1,t("update:popupVisible",!1),t("popupVisibleChange",!1)},d=E=>{E?(a.value=E,t("update:popupVisible",E),t("popupVisibleChange",E)):c()},m=async()=>{const E=r,M=await new Promise(async _=>{var R;if(be(e.onBeforeOk)){let $=e.onBeforeOk((A=!0)=>_(A));if((ot($)||!Ue($))&&(l.value=!0),ot($))try{$=(R=await $)!=null?R:!0}catch{$=!1}Ue($)&&_($)}else _(!0)});E===r&&(M?(t("ok"),c()):l.value&&(l.value=!1))},b=()=>{var E;let M=!0;be(e.onBeforeCancel)&&(M=(E=e.onBeforeCancel())!=null?E:!1),M&&(t("cancel"),c())},S=w(()=>[`${n}-popup-content`,e.contentClass]),T=w(()=>[`${n}-popup-arrow`,e.arrowClass]);return{prefixCls:n,contentCls:S,arrowCls:T,computedPopupVisible:i,mergedOkLoading:u,handlePopupVisibleChange:d,handleOk:m,handleCancel:b,t:o}}});function Kn(e,t,n,o,a,i){const l=O("icon-info-circle-fill"),u=O("icon-check-circle-fill"),r=O("icon-exclamation-circle-fill"),c=O("icon-close-circle-fill"),d=O("arco-button"),m=O("trigger");return y(),N(m,{class:C(e.prefixCls),trigger:"click",position:e.position,"show-arrow":"","popup-visible":e.computedPopupVisible,"popup-offset":10,"popup-container":e.popupContainer,"content-class":e.contentCls,"content-style":e.contentStyle,"arrow-class":e.arrowCls,"arrow-style":e.arrowStyle,"animation-name":"zoom-in-fade-out","auto-fit-transform-origin":"",onPopupVisibleChange:e.handlePopupVisibleChange},{content:I(()=>[L("div",{class:C(`${e.prefixCls}-body`)},[L("span",{class:C(`${e.prefixCls}-icon`)},[F(e.$slots,"icon",{},()=>[e.type==="info"?(y(),N(l,{key:0})):e.type==="success"?(y(),N(u,{key:1})):e.type==="warning"?(y(),N(r,{key:2})):e.type==="error"?(y(),N(c,{key:3})):K("v-if",!0)])],2),L("span",{class:C(`${e.prefixCls}-content`)},[F(e.$slots,"content",{},()=>[H(J(e.content),1)])],2)],2),L("div",{class:C(`${e.prefixCls}-footer`)},[j(d,Y({size:"mini"},e.cancelButtonProps,{onClick:e.handleCancel}),{default:I(()=>[H(J(e.cancelText||e.t("popconfirm.cancelText")),1)]),_:1},16,["onClick"]),j(d,Y({type:"primary",size:"mini"},e.okButtonProps,{loading:e.mergedOkLoading,onClick:e.handleOk}),{default:I(()=>[H(J(e.okText||e.t("popconfirm.okText")),1)]),_:1},16,["loading","onClick"])],2)]),default:I(()=>[F(e.$slots,"default")]),_:3},8,["class","position","popup-visible","popup-container","content-class","content-style","arrow-class","arrow-style","onPopupVisibleChange"])}var ze=ue(Sn,[["render",Kn]]);const Nn=Object.assign(ze,{install:(e,t)=>{Te(e,t);const n=Ie(t);e.component(n+ze.name,ze)}}),Dt=Symbol("TreeInjectionKey");function $n(e){const t=[];function n(o){o&&o.forEach(a=>{t.push(a),n(a.children)})}return n(e),t}function Dn(e){const t=new Map;return e.forEach(n=>{t.set(n.key,n)}),t}function ct(e){return e.selectable&&!e.disabled}function dt(e){return!e.isLeaf&&e.children}function _n(e){return Ue(e.isLeaf)?e.isLeaf:!e.children}function qe(e){return Set.prototype.add.bind(e)}function Ye(e){return Set.prototype.delete.bind(e)}function me(e){return e.disabled||e.disableCheckbox?!1:!!e.checkable}function We(e){var t;const n=[];return(t=e.children)==null||t.forEach(o=>{me(o)&&n.push(o.key,...We(o))}),n}function _t(e){var t;const{node:n,checkedKeySet:o,indeterminateKeySet:a}=e;let i=n.parent;for(;i;){if(me(i)){const l=i.key,u=((t=i.children)==null?void 0:t.filter(me))||[];let r=0;const c=u.length;u.some(({key:d})=>{if(o.has(d))r+=1;else if(a.has(d))return r+=.5,!0;return!1}),r&&r!==c?a.add(l):a.delete(l),r&&r===c?o.add(l):o.delete(l)}i=i.parent}}function ut(e){const{node:t,checked:n,checkedKeys:o,indeterminateKeys:a,checkStrictly:i=!1}=e,{key:l}=t,u=new Set(o),r=new Set(a);if(n?u.add(l):u.delete(l),r.delete(l),!i){const c=We(t);n?c.forEach(qe(u)):c.forEach(Ye(u)),c.forEach(Ye(r)),_t({node:t,checkedKeySet:u,indeterminateKeySet:r})}return[[...u],[...r]]}function En(e){const{initCheckedKeys:t,key2TreeNode:n,checkStrictly:o,onlyCheckLeaf:a}=e,i=new Set,l=new Set,u=new Set;return o?t.forEach(qe(i)):t.forEach(r=>{var c;const d=n.get(r);if(!d||l.has(r)||a&&((c=d.children)!=null&&c.length))return;const m=We(d);m.forEach(qe(l)),m.forEach(Ye(u)),i.add(r),u.delete(r),_t({node:d,checkedKeySet:i,indeterminateKeySet:u})}),[[...i,...l],[...u]]}function Pe(){return tn(Dt)||{}}var Bn=Q({name:"TreeNodeSwitcher",components:{IconLoading:at,RenderFunction:bt},props:{prefixCls:String,loading:Boolean,showLine:Boolean,treeNodeData:{type:Object},icons:{type:Object},nodeStatus:{type:Object}},emits:["click"],setup(e,{slots:t,emit:n}){const{icons:o,nodeStatus:a,treeNodeData:i}=pe(e),l=Pe(),u=oe(t,"switcher-icon"),r=oe(t,"loading-icon");return{getSwitcherIcon:()=>{var c,d,m;const b=(d=(c=o==null?void 0:o.value)==null?void 0:c.switcherIcon)!=null?d:u.value;return b?b(a.value):(m=l.switcherIcon)==null?void 0:m.call(l,i.value,a.value)},getLoadingIcon:()=>{var c,d,m;const b=(d=(c=o==null?void 0:o.value)==null?void 0:c.loadingIcon)!=null?d:r.value;return b?b(a.value):(m=l.loadingIcon)==null?void 0:m.call(l,i.value,a.value)},onClick(c){n("click",c)}}},render(){var e,t,n;const{prefixCls:o,getSwitcherIcon:a,getLoadingIcon:i,onClick:l,nodeStatus:u={},loading:r,showLine:c}=this,{expanded:d,isLeaf:m}=u;if(r)return(e=i())!=null?e:X(at);let b=null,S=!1;if(m)c&&(b=(n=a())!=null?n:X(fn));else{const E=c?X("span",{class:`${o}-${d?"minus":"plus"}-icon`}):X(un);b=(t=a())!=null?t:E,S=!c}if(!b)return null;const T=X("span",{class:`${o}-switcher-icon`,onClick:l},b);return S?X(Qe,{class:`${o}-icon-hover`},()=>T):T}}),Tn=Object.defineProperty,In=Object.defineProperties,Pn=Object.getOwnPropertyDescriptors,pt=Object.getOwnPropertySymbols,Ln=Object.prototype.hasOwnProperty,On=Object.prototype.propertyIsEnumerable,ft=(e,t,n)=>t in e?Tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ge=(e,t)=>{for(var n in t||(t={}))Ln.call(t,n)&&ft(e,n,t[n]);if(pt)for(var n of pt(t))On.call(t,n)&&ft(e,n,t[n]);return e},vt=(e,t)=>In(e,Pn(t));const Et=(()=>{let e=0;return()=>(e+=1,`__arco_tree${e}`)})();function xn(e,t){return!!(ce(e)?t:e)}function Fn(e,t){const n=Ge({},e);return t&&Object.keys(t).forEach(a=>{const i=t[a];i!==a&&(n[a]=e[i],delete n[i])}),n}function yt({subEnable:e,superEnable:t,isLeaf:n,treeNodeData:o,level:a}){return ce(e)?be(t)?t(o,{isLeaf:n,level:a}):t??!1:e}function An(e){var t,n;const{treeNodeData:o,parentNode:a,isTail:i=!0,treeProps:l}=e,{fieldNames:u}=l||{},r=Fn(o,u),c=l.loadMore?!!r.isLeaf:!((t=r.children)!=null&&t.length),d=a?a.level+1:0,m=vt(Ge({},vn(r,["children"])),{key:(n=r.key)!=null?n:Et(),selectable:yt({subEnable:r.selectable,superEnable:l==null?void 0:l.selectable,isLeaf:c,level:d,treeNodeData:o}),disabled:!!r.disabled,disableCheckbox:!!r.disableCheckbox,checkable:yt({subEnable:r.checkable,superEnable:l==null?void 0:l.checkable,isLeaf:c,level:d,treeNodeData:o}),isLeaf:c,isTail:i,blockNode:!!(l!=null&&l.blockNode),showLine:!!(l!=null&&l.showLine),level:d,lineless:a?[...a.lineless,a.isTail]:[],draggable:xn(r.draggable,l==null?void 0:l.draggable)});return vt(Ge({},m),{treeNodeProps:m,treeNodeData:o,parent:a,parentKey:a==null?void 0:a.key,pathParentKeys:a?[...a.pathParentKeys,a.key]:[]})}function Vn(e,t){function n(o,a){if(!o)return;const{fieldNames:i}=t,l=[];return o.forEach((u,r)=>{const c=An({treeNodeData:u,treeProps:t,parentNode:a,isTail:r===o.length-1});c.children=n(u[(i==null?void 0:i.children)||"children"],c),l.push(c)}),l}return n(e)}function Bt(){const e=on(),t=()=>{var o;return(o=e==null?void 0:e.vnode.key)!=null?o:Et()},n=P(t());return nn(()=>{n.value=t()}),n}function jn(e){const{key:t,refTitle:n}=pe(e),o=Pe(),a=P(!1),i=P(!1),l=P(!1),u=P(0),r=dn(c=>{if(!n.value)return;const d=n.value.getBoundingClientRect(),m=window.pageYOffset+d.top,{pageY:b}=c,S=d.height/4,T=b-m;u.value=T<S?-1:T<d.height-S?0:1,l.value=o.allowDrop?o.allowDrop(t.value,u.value):!0});return{isDragOver:a,isDragging:i,isAllowDrop:l,dropPosition:u,setDragStatus(c,d){switch(c){case"dragStart":i.value=!0,u.value=0,o.onDragStart&&o.onDragStart(t.value,d);break;case"dragEnd":i.value=!1,a.value=!1,u.value=0,r.cancel(),o.onDragEnd&&o.onDragEnd(t.value,d);break;case"dragOver":a.value=!0,r(d),o.onDragOver&&o.onDragOver(t.value,d);break;case"dragLeave":a.value=!1,u.value=0,r.cancel(),o.onDragLeave&&o.onDragLeave(t.value,d);break;case"drop":o.onDrop&&o.onDrop(t.value,u.value,d),a.value=!1,u.value=0,r.cancel();break}}}}function Mn(e){return Be(e)?e:[e]}const Rn=Q({name:"BaseTreeNode",components:{NodeSwitcher:Bn,Checkbox:Qt,RenderFunction:bt,IconDragDotVertical:pn},props:{key:{type:[String,Number]},title:{type:String},selectable:{type:Boolean},disabled:{type:Boolean},disableCheckbox:{type:Boolean},checkable:{type:Boolean},draggable:{type:Boolean},isLeaf:{type:Boolean},icon:{type:Function},switcherIcon:{type:Function},loadingIcon:{type:Function},dragIcon:{type:Function},isTail:{type:Boolean},blockNode:{type:Boolean},showLine:{type:Boolean},level:{type:Number,default:0},lineless:{type:Array,default:()=>[]}},setup(e){const t=Bt(),n=ke("tree-node"),o=Pe(),a=w(()=>{var f;return(f=o.key2TreeNode)==null?void 0:f.get(t.value)}),i=w(()=>a.value.treeNodeData),l=w(()=>a.value.children),u=w(()=>{var f;const D=(f=o.treeProps)==null?void 0:f.actionOnNodeClick;return D?Mn(D):[]}),{isLeaf:r,isTail:c,selectable:d,disabled:m,disableCheckbox:b,draggable:S}=pe(e),T=w(()=>{var f;return[`${n}`,{[`${n}-selected`]:Z.value,[`${n}-is-leaf`]:r.value,[`${n}-is-tail`]:c.value,[`${n}-expanded`]:W.value,[`${n}-disabled-selectable`]:!d.value&&!((f=o.treeProps)!=null&&f.disableSelectActionOnly),[`${n}-disabled`]:m.value}]}),E=P(),{isDragOver:M,isDragging:_,isAllowDrop:R,dropPosition:$,setDragStatus:A}=jn(ae({key:t,refTitle:E})),V=w(()=>[`${n}-title`,{[`${n}-title-draggable`]:S.value,[`${n}-title-gap-top`]:M.value&&R.value&&$.value<0,[`${n}-title-gap-bottom`]:M.value&&R.value&&$.value>0,[`${n}-title-highlight`]:!_.value&&M.value&&R.value&&$.value===0,[`${n}-title-dragging`]:_.value,[`${n}-title-block`]:a.value.blockNode}]),U=w(()=>{var f,D;return(D=(f=o.checkedKeys)==null?void 0:f.includes)==null?void 0:D.call(f,t.value)}),le=w(()=>{var f,D;return(D=(f=o.indeterminateKeys)==null?void 0:f.includes)==null?void 0:D.call(f,t.value)}),Z=w(()=>{var f,D;return(D=(f=o.selectedKeys)==null?void 0:f.includes)==null?void 0:D.call(f,t.value)}),W=w(()=>{var f,D;return(D=(f=o.expandedKeys)==null?void 0:f.includes)==null?void 0:D.call(f,t.value)}),fe=w(()=>{var f,D;return(D=(f=o.loadingKeys)==null?void 0:f.includes)==null?void 0:D.call(f,t.value)}),Ce=w(()=>o.dragIcon),we=w(()=>o.nodeIcon);function ve(f){var D,te;r.value||(!((D=l.value)!=null&&D.length)&&be(o.onLoadMore)?o.onLoadMore(t.value):(te=o==null?void 0:o.onExpand)==null||te.call(o,!W.value,t.value,f))}const G=ae({loading:fe,checked:U,selected:Z,indeterminate:le,expanded:W,isLeaf:r}),q=w(()=>o.nodeTitle?()=>{var f;return(f=o.nodeTitle)==null?void 0:f.call(o,i.value,G)}:void 0),ee=w(()=>o.nodeExtra?()=>{var f;return(f=o.nodeExtra)==null?void 0:f.call(o,i.value,G)}:void 0);return{refTitle:E,prefixCls:n,classNames:T,titleClassNames:V,indeterminate:le,checked:U,expanded:W,selected:Z,treeTitle:q,treeNodeData:i,loading:fe,treeDragIcon:Ce,treeNodeIcon:we,extra:ee,nodeStatus:G,onCheckboxChange(f,D){var te;b.value||m.value||(te=o.onCheck)==null||te.call(o,f,t.value,D)},onTitleClick(f){var D;u.value.includes("expand")&&ve(f),!(!d.value||m.value)&&((D=o.onSelect)==null||D.call(o,t.value,f))},onSwitcherClick:ve,onDragStart(f){var D;if(S.value){f.stopPropagation(),A("dragStart",f);try{(D=f.dataTransfer)==null||D.setData("text/plain","")}catch{}}},onDragEnd(f){S.value&&(f.stopPropagation(),A("dragEnd",f))},onDragOver(f){S&&(f.stopPropagation(),f.preventDefault(),A("dragOver",f))},onDragLeave(f){S.value&&(f.stopPropagation(),A("dragLeave",f))},onDrop(f){!S.value||!R.value||(f.stopPropagation(),f.preventDefault(),A("drop",f))}}}}),zn=["draggable"];function Hn(e,t,n,o,a,i){const l=O("NodeSwitcher"),u=O("Checkbox"),r=O("RenderFunction"),c=O("IconDragDotVertical");return y(),B("div",{class:C(e.classNames)},[K(" 缩进 "),L("span",{class:C(`${e.prefixCls}-indent`)},[(y(!0),B(de,null,De(e.level,d=>(y(),B("span",{key:d,class:C([`${e.prefixCls}-indent-block`,{[`${e.prefixCls}-indent-block-lineless`]:e.lineless[d-1]}])},null,2))),128))],2),K(" switcher "),L("span",{class:C([`${e.prefixCls}-switcher`,{[`${e.prefixCls}-switcher-expanded`]:e.expanded}])},[j(l,{"prefix-cls":e.prefixCls,loading:e.loading,"show-line":e.showLine,"tree-node-data":e.treeNodeData,icons:{switcherIcon:e.switcherIcon,loadingIcon:e.loadingIcon},"node-status":e.nodeStatus,onClick:e.onSwitcherClick},Kt({_:2},[e.$slots["switcher-icon"]?{name:"switcher-icon",fn:I(()=>[K(" @slot 定制 switcher 图标，会覆盖 Tree 的配置 "),F(e.$slots,"switcher-icon")])}:void 0,e.$slots["loading-icon"]?{name:"loading-icon",fn:I(()=>[K(" @slot 定制 loading 图标，会覆盖 Tree 的配置 "),F(e.$slots,"loading-icon")])}:void 0]),1032,["prefix-cls","loading","show-line","tree-node-data","icons","node-status","onClick"])],2),K(" checkbox "),e.checkable?(y(),N(u,{key:0,disabled:e.disableCheckbox||e.disabled,"model-value":e.checked,indeterminate:e.indeterminate,"uninject-group-context":"",onChange:e.onCheckboxChange},null,8,["disabled","model-value","indeterminate","onChange"])):K("v-if",!0),K(" 内容 "),L("span",{ref:"refTitle",class:C(e.titleClassNames),draggable:e.draggable,onDragstart:t[0]||(t[0]=(...d)=>e.onDragStart&&e.onDragStart(...d)),onDragend:t[1]||(t[1]=(...d)=>e.onDragEnd&&e.onDragEnd(...d)),onDragover:t[2]||(t[2]=(...d)=>e.onDragOver&&e.onDragOver(...d)),onDragleave:t[3]||(t[3]=(...d)=>e.onDragLeave&&e.onDragLeave(...d)),onDrop:t[4]||(t[4]=(...d)=>e.onDrop&&e.onDrop(...d)),onClick:t[5]||(t[5]=(...d)=>e.onTitleClick&&e.onTitleClick(...d))},[e.$slots.icon||e.icon||e.treeNodeIcon?(y(),B("span",{key:0,class:C([`${e.prefixCls}-icon`,`${e.prefixCls}-custom-icon`])},[K(" 节点图标 "),e.$slots.icon?F(e.$slots,"icon",rt(Y({key:0},e.nodeStatus))):e.icon?(y(),N(r,Y({key:1,"render-func":e.icon},e.nodeStatus),null,16,["render-func"])):e.treeNodeIcon?(y(),N(r,Y({key:2,"render-func":e.treeNodeIcon,node:e.treeNodeData},e.nodeStatus),null,16,["render-func","node"])):K("v-if",!0)],2)):K("v-if",!0),L("span",{class:C(`${e.prefixCls}-title-text`)},[e.treeTitle?(y(),N(r,{key:0,"render-func":e.treeTitle},null,8,["render-func"])):(y(),B(de,{key:1},[K(" 标题，treeTitle 优先级高于节点的 title "),F(e.$slots,"title",{},()=>[H(J(e.title),1)])],2112)),e.draggable?(y(),B("span",{key:2,class:C([`${e.prefixCls}-icon`,`${e.prefixCls}-drag-icon`])},[K(" 拖拽图标 "),e.$slots["drag-icon"]?F(e.$slots,"drag-icon",rt(Y({key:0},e.nodeStatus))):e.dragIcon?(y(),N(r,Y({key:1,"render-func":e.dragIcon},e.nodeStatus),null,16,["render-func"])):e.treeDragIcon?(y(),N(r,Y({key:2,"render-func":e.treeDragIcon,node:e.treeNodeData},e.nodeStatus),null,16,["render-func","node"])):(y(),N(c,{key:3}))],2)):K("v-if",!0)],2)],42,zn),K(" 额外 "),e.extra?(y(),N(r,{key:1,"render-func":e.extra},null,8,["render-func"])):K("v-if",!0)],2)}var Je=ue(Rn,[["render",Hn]]);const Un=Q({name:"ExpandTransition",props:{expanded:Boolean},emits:["end"],setup(e,{emit:t}){return{onBeforeEnter(n){n.style.height=e.expanded?"0":`${n.scrollHeight}px`},onEnter(n){n.style.height=e.expanded?`${n.scrollHeight}px`:"0"},onAfterEnter(n){n.style.height=e.expanded?"":"0",t("end")},onBeforeLeave(n){n.style.display="none"}}}});function qn(e,t,n,o,a,i){return y(),N($t,{onBeforeEnter:e.onBeforeEnter,onEnter:e.onEnter,onAfterEnter:e.onAfterEnter,onBeforeLeave:e.onBeforeLeave},{default:I(()=>[F(e.$slots,"default")]),_:3},8,["onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave"])}var Yn=ue(Un,[["render",qn]]);const Gn=Q({name:"TransitionNodeList",components:{ExpandTransition:Yn,BaseTreeNode:Je},props:{nodeKey:{type:[String,Number],required:!0}},setup(e){const n=[`${ke("tree")}-node-list`],o=Pe(),{nodeKey:a}=pe(e),i=w(()=>{var r,c;return(c=(r=o.expandedKeys)==null?void 0:r.includes)==null?void 0:c.call(r,a.value)}),l=w(()=>{var r;const c=new Set(o.expandedKeys||[]),d=(r=o.flattenTreeData)==null?void 0:r.filter(m=>{var b,S;return(b=m.pathParentKeys)!=null&&b.includes(a.value)?!o.filterTreeNode||((S=o.filterTreeNode)==null?void 0:S.call(o,m.treeNodeData)):!1});return d==null?void 0:d.filter(m=>{var b;if(i.value)return(b=m.pathParentKeys)==null?void 0:b.every(T=>c.has(T));const S=m.pathParentKeys.indexOf(a.value);return m.pathParentKeys.slice(S+1).every(T=>c.has(T))})}),u=w(()=>{var r,c;return((r=o.currentExpandKeys)==null?void 0:r.includes(a.value))&&((c=l.value)==null?void 0:c.length)});return{classNames:n,visibleNodeList:l,show:u,expanded:i,onTransitionEnd(){var r;(r=o.onExpandEnd)==null||r.call(o,a.value)}}}});function Jn(e,t,n,o,a,i){const l=O("BaseTreeNode"),u=O("ExpandTransition");return y(),N(u,{expanded:e.expanded,onEnd:e.onTransitionEnd},{default:I(()=>[e.show?(y(),B("div",{key:0,class:C(e.classNames)},[(y(!0),B(de,null,De(e.visibleNodeList,r=>(y(),N(l,Y({key:r.key},r.treeNodeProps),null,16))),128))],2)):K("v-if",!0)]),_:1},8,["expanded","onEnd"])}var Qn=ue(Gn,[["render",Jn]]),Wn=Object.defineProperty,ht=Object.getOwnPropertySymbols,Xn=Object.prototype.hasOwnProperty,Zn=Object.prototype.propertyIsEnumerable,gt=(e,t,n)=>t in e?Wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eo=(e,t)=>{for(var n in t||(t={}))Xn.call(t,n)&&gt(e,n,t[n]);if(ht)for(var n of ht(t))Zn.call(t,n)&&gt(e,n,t[n]);return e},to=Q({name:"TreeNode",inheritAttrs:!1,props:eo({},Je.props),setup(e,{slots:t,attrs:n}){const o=Bt();return()=>j(de,null,[j(Je,Y(e,n,{key:o.value}),t),j(Qn,{key:o.value,nodeKey:o.value},null)])}});function no(e){const{defaultCheckedKeys:t,checkedKeys:n,key2TreeNode:o,checkStrictly:a,halfCheckedKeys:i,onlyCheckLeaf:l}=pe(e),u=P(!1),r=P([]),c=P([]),d=P(),m=P(),b=T=>En({initCheckedKeys:T,key2TreeNode:o.value,checkStrictly:a.value,onlyCheckLeaf:l.value}),S=T=>{const E=b(T);[r.value,c.value]=E};return S(n.value||(t==null?void 0:t.value)||[]),Nt(()=>{n.value?[d.value,m.value]=b(n.value):u.value&&(d.value=void 0,m.value=void 0,r.value=[],c.value=[]),u.value||(u.value=!0)}),{checkedKeys:w(()=>d.value||r.value),indeterminateKeys:w(()=>a.value&&i.value?i.value:m.value||c.value),setCheckedState(T,E,M=!1){return M?S(T):(r.value=T,c.value=E),[r.value,c.value]}}}function oo(e){const{treeData:t,fieldNames:n,selectable:o,showLine:a,blockNode:i,checkable:l,loadMore:u,draggable:r}=pe(e),c=P([]);Nt(()=>{var b,S;c.value=Vn(t.value||[],{selectable:(b=o==null?void 0:o.value)!=null?b:!1,showLine:!!(a!=null&&a.value),blockNode:!!(i!=null&&i.value),checkable:(S=l==null?void 0:l.value)!=null?S:!1,fieldNames:n==null?void 0:n.value,loadMore:!!(u!=null&&u.value),draggable:!!(r!=null&&r.value)})});const d=w(()=>$n(c.value)),m=w(()=>Dn(d.value));return{treeData:c,flattenTreeData:d,key2TreeNode:m}}const ao=Q({name:"Tree",components:{VirtualList:Gt,TreeNode:to},props:{size:{type:String,default:"medium"},blockNode:{type:Boolean},defaultExpandAll:{type:Boolean,default:!0},multiple:{type:Boolean},checkable:{type:[Boolean,String,Function],default:!1},selectable:{type:[Boolean,Function],default:!0},checkStrictly:{type:Boolean},checkedStrategy:{type:String,default:"all"},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:Array},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},data:{type:Array,default:()=>[]},fieldNames:{type:Object},showLine:{type:Boolean},loadMore:{type:Function},draggable:{type:Boolean},allowDrop:{type:Function},filterTreeNode:{type:Function},virtualListProps:{type:Object},defaultExpandSelected:{type:Boolean},defaultExpandChecked:{type:Boolean},autoExpandParent:{type:Boolean,default:!0},halfCheckedKeys:{type:Array},onlyCheckLeaf:{type:Boolean,default:!1},animation:{type:Boolean,default:!0},actionOnNodeClick:{type:String},disableSelectActionOnly:{type:Boolean,default:!1}},emits:{select:(e,t)=>!0,"update:selectedKeys":e=>!0,check:(e,t)=>!0,"update:checkedKeys":e=>!0,"update:halfCheckedKeys":e=>!0,expand:(e,t)=>!0,"update:expandedKeys":e=>!0,dragStart:(e,t)=>!0,dragEnd:(e,t)=>!0,dragOver:(e,t)=>!0,dragLeave:(e,t)=>!0,drop:e=>!0},setup(e,{emit:t,slots:n}){const{data:o,showLine:a,multiple:i,loadMore:l,checkStrictly:u,checkedKeys:r,defaultCheckedKeys:c,selectedKeys:d,defaultSelectedKeys:m,expandedKeys:b,defaultExpandedKeys:S,checkedStrategy:T,selectable:E,checkable:M,blockNode:_,fieldNames:R,size:$,defaultExpandAll:A,filterTreeNode:V,draggable:U,allowDrop:le,defaultExpandSelected:Z,defaultExpandChecked:W,autoExpandParent:fe,halfCheckedKeys:Ce,onlyCheckLeaf:we,animation:ve}=pe(e),G=ke("tree"),q=w(()=>[`${G}`,{[`${G}-checkable`]:M.value,[`${G}-show-line`]:a.value},`${G}-size-${$.value}`]),ee=oe(n,"switcher-icon"),f=oe(n,"loading-icon"),D=oe(n,"drag-icon"),te=oe(n,"icon"),Tt=oe(n,"title"),It=oe(n,"extra"),{treeData:Pt,flattenTreeData:Le,key2TreeNode:x}=oo(ae({treeData:o,selectable:E,showLine:a,blockNode:_,checkable:M,fieldNames:R,loadMore:l,draggable:U})),{checkedKeys:ye,indeterminateKeys:_e,setCheckedState:Oe}=no(ae({defaultCheckedKeys:c,checkedKeys:r,checkStrictly:u,key2TreeNode:x,halfCheckedKeys:Ce,onlyCheckLeaf:we})),[Se,xe]=lt((m==null?void 0:m.value)||[],ae({value:d})),re=P([]),he=P();function Lt(){if(S!=null&&S.value){const s=new Set([]);return S.value.forEach(p=>{if(s.has(p))return;const v=x.value.get(p);v&&[...fe.value?v.pathParentKeys:[],p].forEach(h=>s.add(h))}),[...s]}if(A.value)return Le.value.filter(s=>s.children&&s.children.length).map(s=>s.key);if(Z.value||W.value){const s=new Set([]),p=v=>{v.forEach(h=>{const g=x.value.get(h);g&&(g.pathParentKeys||[]).forEach(k=>s.add(k))})};return Z.value&&p(Se.value),W.value&&p(ye.value),[...s]}return[]}const[Ke,Fe]=lt(Lt(),ae({value:b})),se=P([]),Ot=w(()=>{const s=new Set(Ke.value),p=new Set(se.value);return Le.value.filter(v=>{var h;if(!(!V||!V.value||(V==null?void 0:V.value(v.treeNodeData))))return!1;const k=ce(v.parentKey),ie=(h=v.pathParentKeys)==null?void 0:h.every(ge=>s.has(ge)&&!p.has(ge));return k||ie})});function Xe(s,p=T.value){let v=[...s];return p==="parent"?v=s.filter(h=>{const g=x.value.get(h);return g&&!(!ce(g.parentKey)&&s.includes(g.parentKey))}):p==="child"&&(v=s.filter(h=>{var g,k;return!((k=(g=x.value.get(h))==null?void 0:g.children)!=null&&k.length)})),v}function Ne(s){return s.map(p=>{var v;return((v=x.value.get(p))==null?void 0:v.treeNodeData)||void 0}).filter(Boolean)}function Ae(s){const{targetKey:p,targetChecked:v,newCheckedKeys:h,newIndeterminateKeys:g,event:k}=s,ie=p?x.value.get(p):void 0,ge=Xe(h);t("check",ge,{checked:v,node:ie==null?void 0:ie.treeNodeData,checkedNodes:Ne(ge),halfCheckedKeys:g,halfCheckedNodes:Ne(g),e:k}),t("update:checkedKeys",ge),t("update:halfCheckedKeys",g)}function Ve(s){const{targetKey:p,targetSelected:v,newSelectedKeys:h,event:g}=s,k=p?x.value.get(p):void 0;t("select",h,{selected:v,node:k==null?void 0:k.treeNodeData,selectedNodes:Ne(h),e:g}),t("update:selectedKeys",h)}function je(s){const{targetKey:p,targetExpanded:v,newExpandedKeys:h,event:g}=s,k=p?x.value.get(p):void 0;t("expand",h,{expanded:v,node:k==null?void 0:k.treeNodeData,expandedNodes:Ne(h),e:g}),t("update:expandedKeys",h)}function xt(s){const[p,v]=Oe(s,[],!0);Ae({newCheckedKeys:p,newIndeterminateKeys:v})}function Ft(s){let p=s;!i.value&&s.length>1&&(p=[s[0]]),xe(p),Ve({newSelectedKeys:p})}function At(s){se.value=[],Fe(s),je({newExpandedKeys:s})}function Vt(s,p,v){if(!s.length)return;let h=[...ye.value],g=[..._e.value];s.forEach(k=>{const ie=x.value.get(k);ie&&([h,g]=ut({node:ie,checked:p,checkedKeys:[...h],indeterminateKeys:[...g],checkStrictly:u.value}))}),Oe(h,g),Ae({targetKey:v,targetChecked:ce(v)?void 0:p,newCheckedKeys:h,newIndeterminateKeys:g})}function jt(s,p,v){if(!s.length)return;let h;if(i.value){const g=new Set(Se.value);s.forEach(k=>{p?g.add(k):g.delete(k)}),h=[...g]}else h=p?[s[0]]:[];xe(h),Ve({targetKey:v,targetSelected:ce(v)?void 0:p,newSelectedKeys:h})}function Mt(s,p,v){const h=new Set(Ke.value);s.forEach(k=>{p?h.add(k):h.delete(k),tt(k)});const g=[...h];Fe(g),je({targetKey:v,targetExpanded:ce(v)?void 0:p,newExpandedKeys:g})}function Ze(s,p,v){const h=x.value.get(p);if(!h)return;const[g,k]=ut({node:h,checked:s,checkedKeys:ye.value,indeterminateKeys:_e.value,checkStrictly:u.value});Oe(g,k),Ae({targetKey:p,targetChecked:s,newCheckedKeys:g,newIndeterminateKeys:k,event:v})}function Rt(s,p){if(!x.value.get(s))return;let h,g;if(i.value){const k=new Set(Se.value);g=!k.has(s),g?k.add(s):k.delete(s),h=[...k]}else g=!0,h=[s];xe(h),Ve({targetKey:s,targetSelected:g,newSelectedKeys:h,event:p})}function et(s,p,v){if(se.value.includes(p)||!x.value.get(p))return;const g=new Set(Ke.value);s?g.add(p):g.delete(p);const k=[...g];Fe(k),ve.value&&se.value.push(p),je({targetKey:p,targetExpanded:s,newExpandedKeys:k,event:v})}function tt(s){const p=se.value.indexOf(s);se.value.splice(p,1)}const zt=w(()=>l!=null&&l.value?async s=>{if(!be(l.value))return;const p=x.value.get(s);if(!p)return;const{treeNodeData:v}=p;re.value=[...new Set([...re.value,s])];try{await l.value(v),re.value=re.value.filter(h=>h!==s),et(!0,s),ye.value.includes(s)&&Ze(!0,s)}catch(h){re.value=re.value.filter(g=>g!==s),console.error("[tree]load data error: ",h)}}:void 0),nt=ae({treeProps:e,switcherIcon:ee,loadingIcon:f,dragIcon:D,nodeIcon:te,nodeTitle:Tt,nodeExtra:It,treeData:Pt,flattenTreeData:Le,key2TreeNode:x,checkedKeys:ye,indeterminateKeys:_e,selectedKeys:Se,expandedKeys:Ke,loadingKeys:re,currentExpandKeys:se,onLoadMore:zt,filterTreeNode:V,onCheck:Ze,onSelect:Rt,onExpand:et,onExpandEnd:tt,allowDrop(s,p){const v=x.value.get(s);return v&&be(le.value)?!!le.value({dropNode:v.treeNodeData,dropPosition:p}):!0},onDragStart(s,p){const v=x.value.get(s);he.value=v,v&&t("dragStart",p,v.treeNodeData)},onDragEnd(s,p){const v=x.value.get(s);he.value=void 0,v&&t("dragEnd",p,v.treeNodeData)},onDragOver(s,p){const v=x.value.get(s);v&&t("dragOver",p,v.treeNodeData)},onDragLeave(s,p){const v=x.value.get(s);v&&t("dragLeave",p,v.treeNodeData)},onDrop(s,p,v){const h=x.value.get(s);he.value&&h&&!(h.key===he.value.key||h.pathParentKeys.includes(he.value.key||""))&&t("drop",{e:v,dragNode:he.value.treeNodeData,dropNode:h.treeNodeData,dropPosition:p})}});return an(Dt,nt),{classNames:q,visibleTreeNodeList:Ot,treeContext:nt,virtualListRef:P(),computedSelectedKeys:Se,computedExpandedKeys:Ke,computedCheckedKeys:ye,computedIndeterminateKeys:_e,getPublicCheckedKeys:Xe,getNodes:Ne,internalCheckNodes:Vt,internalSetCheckedKeys:xt,internalSelectNodes:jt,internalSetSelectedKeys:Ft,internalExpandNodes:Mt,internalSetExpandedKeys:At}},methods:{toggleCheck(e,t){const{key2TreeNode:n,onCheck:o,checkedKeys:a}=this.treeContext,i=!a.includes(e),l=n.get(e);l&&me(l)&&o(i,e,t)},scrollIntoView(e){this.virtualListRef&&this.virtualListRef.scrollTo(e)},getSelectedNodes(){return this.getNodes(this.computedSelectedKeys)},getCheckedNodes(e={}){const{checkedStrategy:t,includeHalfChecked:n}=e,o=this.getPublicCheckedKeys(this.computedCheckedKeys,t);return[...this.getNodes(o),...n?this.getHalfCheckedNodes():[]]},getHalfCheckedNodes(){return this.getNodes(this.computedIndeterminateKeys)},getExpandedNodes(){return this.getNodes(this.computedExpandedKeys)},checkAll(e=!0){const{key2TreeNode:t}=this.treeContext,n=e?[...t.keys()].filter(o=>{const a=t.get(o);return a&&me(a)}):[];this.internalSetCheckedKeys(n)},checkNode(e,t=!0,n=!1){const{checkStrictly:o,treeContext:a}=this,{key2TreeNode:i}=a,l=Be(e),u=(l?e:[e]).filter(r=>{const c=i.get(r);return c&&me(c)&&(o||!n||_n(c))});this.internalCheckNodes(u,t,l?void 0:e)},selectAll(e=!0){const{key2TreeNode:t}=this.treeContext,n=e?[...t.keys()].filter(o=>{const a=t.get(o);return a&&ct(a)}):[];this.internalSetSelectedKeys(n)},selectNode(e,t=!0){const{key2TreeNode:n}=this.treeContext,o=Be(e),a=(o?e:[e]).filter(i=>{const l=n.get(i);return l&&ct(l)});this.internalSelectNodes(a,t,o?void 0:e)},expandAll(e=!0){const{key2TreeNode:t}=this.treeContext,n=e?[...t.keys()].filter(o=>{const a=t.get(o);return a&&dt(a)}):[];this.internalSetExpandedKeys(n)},expandNode(e,t=!0){const{key2TreeNode:n}=this.treeContext,o=Be(e),a=(o?e:[e]).filter(i=>{const l=n.get(i);return l&&dt(l)});this.internalExpandNodes(a,t,o?void 0:e)}}});function lo(e,t,n,o,a,i){const l=O("TreeNode"),u=O("VirtualList");return y(),B("div",{class:C(e.classNames)},[e.virtualListProps?(y(),N(u,Y({key:0,ref:"virtualListRef"},e.virtualListProps,{data:e.visibleTreeNodeList}),{item:I(({item:r})=>[j(l,Y({key:r.key},r.treeNodeProps),null,16)]),_:1},16,["data"])):(y(!0),B(de,{key:1},De(e.visibleTreeNodeList,r=>(y(),N(l,Y({key:r.key},r.treeNodeProps),null,16))),128))],2)}var He=ue(ao,[["render",lo]]);const ro=Object.assign(He,{install:(e,t)=>{Te(e,t);const n=Ie(t);e.component(n+He.name,He)}});function so(){return Xt("/api/system/menu/list",{method:"get"})}const io=e=>(ln("data-v-53057fdd"),e=e(),rn(),e),co={class:"page"},uo={"na-loading-text":"加载中",class:"content tw-overflow-hidden tw-mt-[10px] tw-text-c-1 tw-py-[10px] tw-bg-cbg-1 tw-rounded lg:tw-flex tw-flex-wrap"},po={class:"menu-tree tw-flex-grow-[1] tw-bord lg:tw-border-r lg:tw-border-b-0 tw-border-solid tw-border-cb-1 tw-pr-4 tw-px-5 tw-pb-5 tw-mb-4 tw-border-b"},fo={class:"tw-text-title-1 tw-items-center tw-flex tw-pb-[10px] tw-mb-2 tw-border-b tw-border-solid tw-border-cb-1"},vo=io(()=>L("span",{class:"tw-text-title-1 tw-leading-snug"},"菜单列表",-1)),yo={class:"tw-ml-auto"},ho={class:"menu-detail tw-px-5 tw-flex-1 tw-mb-2 tw-flex-grow-[4]"},go={class:"tw-text-title-1 -tw-mt-2 tw-items-center tw-justify-between tw-flex tw-flex-wrap tw-pb-[10px] tw-mb-2 tw-border-b tw-border-solid tw-border-cb-1"},mo={class:"tw-text-title-1 tw-leading-snug tw-mt-2"},bo=Q({__name:"Menu",setup(e){let t=ae([]),{loading:n,run:o}=en(so);o().then(_=>{t.length=0,t.push(..._.data)}).catch(_=>{console.log(_)}),P(!0),Zt();const a=P([]),i=P(null);let l=P([]);function u(_,R=[]){return _.map(($,A)=>{let V=[...R,A],U={};return U.title=$.meta.title,U.key=V.join("-"),$.meta.type===$e.Catelog&&(U.icon=()=>X(Ee,{icon:$.meta.icon,backupIcon:"icon-folder"})),$.meta.type===$e.Page&&(U.icon=()=>X(Ee,{icon:$.meta.icon,backupIcon:"icon-file"})),$.meta.type===$e.Button&&(U.icon=()=>X(Ee,{icon:"icon-check-square"})),$.children&&$.children.length&&(U.children=u($.children,V)),U})}const r=P(ne.detail),c=w(()=>u(t,[]));let d=_=>{a.value=_,l.value=m(),b()};const m=()=>{let _=[];function R($,A){let V=Number.parseInt(A.shift());return A.length?[$[V],...R($[V].children,A)]:[$[V]]}return a.value.length?(_=a.value[0].split("-"),R(t,_)):[]};function b(){var _;r.value=ne.detail,(_=i.value)==null||_.update(r.value,l.value[l.value.length-1])}function S(){var _;if(r.value===ne.edit){b();return}r.value=ne.edit,(_=i.value)==null||_.update(ne.edit,l.value[l.value.length-1])}function T(){var _;r.value=ne.add,(_=i.value)==null||_.update(ne.add)}function E(){}function M(){}return(_,R)=>{var G;const $=wn,A=bn,V=mt,U=ro,le=Nn,Z=Ht,W=Ut,fe=qt,Ce=Yt,we=st("perms"),ve=st("loading");return y(),B("div",co,[j($,{class:"header",title:"菜单管理",subtitle:"编辑全局菜单项","show-back":!1}),j(A,null,{default:I(()=>[H("以下操作均为模拟操作")]),_:1}),it((y(),B("div",uo,[L("div",po,[L("div",fo,[vo,L("div",yo,[it((y(),N(V,{size:"small",type:"secondary"},{default:I(()=>[H(" 添加顶级菜单 ")]),_:1})),[[we,["system.menus.add"]]])])]),j(U,{"action-on-node-click":"expand",animation:!1,data:z(c),"block-node":"","selected-keys":z(a),"onUpdate:selectedKeys":z(d)},null,8,["data","selected-keys","onUpdate:selectedKeys"])]),L("div",ho,[L("div",go,[L("span",mo,J(["菜单详情","编辑菜单","添加子菜单"][z(r)-1]),1),(G=z(l)[z(l).length-1])!=null&&G.meta?(y(),N(Z,{key:0,class:"tw-mt-2"},{default:I(()=>{var q,ee;return[j(V,{size:"small",type:"secondary",onClick:S},{default:I(()=>[H(J(z(r)===z(ne).edit?"取消编辑":"编辑菜单"),1)]),_:1}),((ee=(q=z(l)[z(l).length-1])==null?void 0:q.meta)==null?void 0:ee.type)===z($e).Catelog?(y(),N(V,{key:0,size:"small",type:"secondary",onClick:T},{default:I(()=>[H(" 添加子菜单 ")]),_:1})):K("",!0),j(le,{content:"确定要删除吗?",type:"info","cancel-text":"取消","ok-text":"删除"},{default:I(()=>[j(V,{size:"small",type:"secondary",status:"danger",onClick:E},{default:I(()=>[H(" 删除菜单 ")]),_:1})]),_:1})]}),_:1})):K("",!0)]),L("div",null,[j(Ce,{class:"!tw-text-body-1 tw-mb-4"},{default:I(()=>[(y(!0),B(de,null,De(z(l),q=>(y(),N(fe,{key:q.name},Kt({default:I(()=>[j(Ee,{icon:q.meta.icon},null,8,["icon"]),H(" "+J(q.meta.title),1)]),_:2},[q.meta.type===z($e).Catelog&&q.children&&q.children.length?{name:"droplist",fn:I(()=>[(y(!0),B(de,null,De(q.children,ee=>(y(),N(W,null,{default:I(()=>[H(J(ee.meta.title),1)]),_:2},1024))),256))]),key:"0"}:void 0]),1024))),128))]),_:1})]),z(a).length?(y(),N(Wt,{key:0,ref_key:"menuDetailForm",ref:i,onUpdate:M},null,512)):(y(),N(A,{key:1,type:"warning"},{default:I(()=>[H("请选择在右侧菜单树中选择菜单或点击【添加顶级菜单】进行操作 ")]),_:1}))])])),[[ve,z(n)]])])}}});const ta=hn(bo,[["__scopeId","data-v-53057fdd"]]);export{ta as default};
