import{P as Yr,bE as B,m as Y,bF as Hr,ae as Fr,bG as X,bH as lr,bI as wr,b6 as Gr,as as kr,at as J,bJ as zr,x as z,bD as Br,bK as sr,$ as k,j as L,bL as F,bM as er,aq as br,bN as Er,t as Pr,ar as tr,aU as ra,bO as aa,bP as na,q as _r}from"./install-d8df1eea.js";var N=Yr.CMD;function j(a,r){return Math.abs(a-r)<1e-5}function or(a){var r=a.data,n=a.len(),e=[],t,v=0,o=0,i=0,u=0;function d(m,A){t&&t.length>2&&e.push(t),t=[m,A]}function l(m,A,q,C){j(m,q)&&j(A,C)||t.push(m,A,q,C,q,C)}function s(m,A,q,C,O,S){var Z=Math.abs(A-m),H=Math.tan(Z/4)*4/3,V=A<m?-1:1,hr=Math.cos(m),gr=Math.sin(m),pr=Math.cos(A),Mr=Math.sin(A),Wr=hr*O+q,jr=gr*S+C,Ir=pr*O+q,Tr=Mr*S+C,yr=O*H*V,Dr=S*H*V;t.push(Wr-yr*gr,jr+Dr*hr,Ir+yr*Mr,Tr-Dr*pr,Ir,Tr)}for(var f,c,T,h,g=0;g<n;){var M=r[g++],y=g===1;switch(y&&(v=r[g],o=r[g+1],i=v,u=o,(M===N.L||M===N.C||M===N.Q)&&(t=[i,u])),M){case N.M:v=i=r[g++],o=u=r[g++],d(i,u);break;case N.L:f=r[g++],c=r[g++],l(v,o,f,c),v=f,o=c;break;case N.C:t.push(r[g++],r[g++],r[g++],r[g++],v=r[g++],o=r[g++]);break;case N.Q:f=r[g++],c=r[g++],T=r[g++],h=r[g++],t.push(v+2/3*(f-v),o+2/3*(c-o),T+2/3*(f-T),h+2/3*(c-h),T,h),v=T,o=h;break;case N.A:var p=r[g++],E=r[g++],D=r[g++],I=r[g++],G=r[g++],_=r[g++]+G;g+=1;var P=!r[g++];f=Math.cos(G)*D+p,c=Math.sin(G)*I+E,y?(i=f,u=c,d(i,u)):l(v,o,f,c),v=Math.cos(_)*D+p,o=Math.sin(_)*I+E;for(var R=(P?-1:1)*Math.PI/2,x=G;P?x>_:x<_;x+=R){var U=P?Math.max(x+R,_):Math.min(x+R,_);s(x,U,p,E,D,I)}break;case N.R:i=v=r[g++],u=o=r[g++],f=i+r[g++],c=u+r[g++],d(f,u),l(f,u,f,c),l(f,c,i,c),l(i,c,i,u),l(i,u,f,u);break;case N.Z:t&&l(v,o,i,u),v=i,o=u;break}}return t&&t.length>2&&e.push(t),e}function ur(a,r,n,e,t,v,o,i,u,d){if(j(a,n)&&j(r,e)&&j(t,o)&&j(v,i)){u.push(o,i);return}var l=2/d,s=l*l,f=o-a,c=i-r,T=Math.sqrt(f*f+c*c);f/=T,c/=T;var h=n-a,g=e-r,M=t-o,y=v-i,p=h*h+g*g,E=M*M+y*y;if(p<s&&E<s){u.push(o,i);return}var D=f*h+c*g,I=-f*M-c*y,G=p-D*D,_=E-I*I;if(G<s&&D>=0&&_<s&&I>=0){u.push(o,i);return}var P=[],R=[];B(a,n,t,o,.5,P),B(r,e,v,i,.5,R),ur(P[0],R[0],P[1],R[1],P[2],R[2],P[3],R[3],u,d),ur(P[4],R[4],P[5],R[5],P[6],R[6],P[7],R[7],u,d)}function ea(a,r){var n=or(a),e=[];r=r||1;for(var t=0;t<n.length;t++){var v=n[t],o=[],i=v[0],u=v[1];o.push(i,u);for(var d=2;d<v.length;){var l=v[d++],s=v[d++],f=v[d++],c=v[d++],T=v[d++],h=v[d++];ur(i,u,l,s,f,c,T,h,o,r),i=T,u=h}e.push(o)}return e}function Kr(a,r,n){var e=a[r],t=a[1-r],v=Math.abs(e/t),o=Math.ceil(Math.sqrt(v*n)),i=Math.floor(n/o);i===0&&(i=1,o=n);for(var u=[],d=0;d<o;d++)u.push(i);var l=o*i,s=n-l;if(s>0)for(var d=0;d<s;d++)u[d%o]+=1;return u}function Rr(a,r,n){for(var e=a.r0,t=a.r,v=a.startAngle,o=a.endAngle,i=Math.abs(o-v),u=i*t,d=t-e,l=u>Math.abs(d),s=Kr([u,d],l?0:1,r),f=(l?i:d)/s.length,c=0;c<s.length;c++)for(var T=(l?d:i)/s[c],h=0;h<s[c];h++){var g={};l?(g.startAngle=v+f*c,g.endAngle=v+f*(c+1),g.r0=e+T*h,g.r=e+T*(h+1)):(g.startAngle=v+T*h,g.endAngle=v+T*(h+1),g.r0=e+f*c,g.r=e+f*(c+1)),g.clockwise=a.clockwise,g.cx=a.cx,g.cy=a.cy,n.push(g)}}function ta(a,r,n){for(var e=a.width,t=a.height,v=e>t,o=Kr([e,t],v?0:1,r),i=v?"width":"height",u=v?"height":"width",d=v?"x":"y",l=v?"y":"x",s=a[i]/o.length,f=0;f<o.length;f++)for(var c=a[u]/o[f],T=0;T<o[f];T++){var h={};h[d]=f*s,h[l]=T*c,h[i]=s,h[u]=c,h.x+=a.x,h.y+=a.y,n.push(h)}}function Cr(a,r,n,e){return a*e-n*r}function va(a,r,n,e,t,v,o,i){var u=n-a,d=e-r,l=o-t,s=i-v,f=Cr(l,s,u,d);if(Math.abs(f)<1e-6)return null;var c=a-t,T=r-v,h=Cr(c,T,l,s)/f;return h<0||h>1?null:new X(h*u+a,h*d+r)}function ia(a,r,n){var e=new X;X.sub(e,n,r),e.normalize();var t=new X;X.sub(t,a,r);var v=t.dot(e);return v}function $(a,r){var n=a[a.length-1];n&&n[0]===r[0]&&n[1]===r[1]||a.push(r)}function da(a,r,n){for(var e=a.length,t=[],v=0;v<e;v++){var o=a[v],i=a[(v+1)%e],u=va(o[0],o[1],i[0],i[1],r.x,r.y,n.x,n.y);u&&t.push({projPt:ia(u,r,n),pt:u,idx:v})}if(t.length<2)return[{points:a},{points:a}];t.sort(function(g,M){return g.projPt-M.projPt});var d=t[0],l=t[t.length-1];if(l.idx<d.idx){var s=d;d=l,l=s}for(var f=[d.pt.x,d.pt.y],c=[l.pt.x,l.pt.y],T=[f],h=[c],v=d.idx+1;v<=l.idx;v++)$(T,a[v].slice());$(T,c),$(T,f);for(var v=l.idx+1;v<=d.idx+e;v++)$(h,a[v%e].slice());return $(h,f),$(h,c),[{points:T},{points:h}]}function mr(a){var r=a.points,n=[],e=[];Hr(r,n,e);var t=new Fr(n[0],n[1],e[0]-n[0],e[1]-n[1]),v=t.width,o=t.height,i=t.x,u=t.y,d=new X,l=new X;return v>o?(d.x=l.x=i+v/2,d.y=u,l.y=u+o):(d.y=l.y=u+o/2,d.x=i,l.x=i+v),da(r,d,l)}function b(a,r,n,e){if(n===1)e.push(r);else{var t=Math.floor(n/2),v=a(r);b(a,v[0],t,e),b(a,v[1],n-t,e)}return e}function oa(a,r){for(var n=[],e=0;e<r;e++)n.push(lr(a));return n}function ua(a,r){r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel}function fa(a){for(var r=[],n=0;n<a.length;)r.push([a[n++],a[n++]]);return r}function la(a,r){var n=[],e=a.shape,t;switch(a.type){case"rect":ta(e,r,n),t=kr;break;case"sector":Rr(e,r,n),t=Gr;break;case"circle":Rr({r0:0,r:e.r,startAngle:0,endAngle:Math.PI*2,cx:e.cx,cy:e.cy},r,n),t=Gr;break;default:var v=a.getComputedTransform(),o=v?Math.sqrt(Math.max(v[0]*v[0]+v[1]*v[1],v[2]*v[2]+v[3]*v[3])):1,i=Y(ea(a.getUpdatedPathProxy(),o),function(M){return fa(M)}),u=i.length;if(u===0)b(mr,{points:i[0]},r,n);else if(u===r)for(var d=0;d<u;d++)n.push({points:i[d]});else{var l=0,s=Y(i,function(M){var y=[],p=[];Hr(M,y,p);var E=(p[1]-y[1])*(p[0]-y[0]);return l+=E,{poly:M,area:E}});s.sort(function(M,y){return y.area-M.area});for(var f=r,d=0;d<u;d++){var c=s[d];if(f<=0)break;var T=d===u-1?f:Math.ceil(c.area/l*r);T<0||(b(mr,{points:c.poly},T,n),f-=T)}}t=wr;break}if(!t)return oa(a,r);for(var h=[],d=0;d<n.length;d++){var g=new t;g.setShape(n[d]),ua(a,g),h.push(g)}return h}function sa(a,r){var n=a.length,e=r.length;if(n===e)return[a,r];for(var t=[],v=[],o=n<e?a:r,i=Math.min(n,e),u=Math.abs(e-n)/6,d=(i-2)/6,l=Math.ceil(u/d)+1,s=[o[0],o[1]],f=u,c=2;c<i;){var T=o[c-2],h=o[c-1],g=o[c++],M=o[c++],y=o[c++],p=o[c++],E=o[c++],D=o[c++];if(f<=0){s.push(g,M,y,p,E,D);continue}for(var I=Math.min(f,l-1)+1,G=1;G<=I;G++){var _=G/I;B(T,g,y,E,_,t),B(h,M,p,D,_,v),T=t[3],h=v[3],s.push(t[1],v[1],t[2],v[2],T,h),g=t[5],M=v[5],y=t[6],p=v[6]}f-=I-1}return o===a?[s,r]:[a,s]}function xr(a,r){for(var n=a.length,e=a[n-2],t=a[n-1],v=[],o=0;o<r.length;)v[o++]=e,v[o++]=t;return v}function ca(a,r){for(var n,e,t,v=[],o=[],i=0;i<Math.max(a.length,r.length);i++){var u=a[i],d=r[i],l=void 0,s=void 0;u?d?(n=sa(u,d),l=n[0],s=n[1],e=l,t=s):(s=xr(t||u,u),l=u):(l=xr(e||d,d),s=d),v.push(l),o.push(s)}return[v,o]}function Ar(a){for(var r=0,n=0,e=0,t=a.length,v=0,o=t-2;v<t;o=v,v+=2){var i=a[o],u=a[o+1],d=a[v],l=a[v+1],s=i*l-d*u;r+=s,n+=(i+d)*s,e+=(u+l)*s}return r===0?[a[0]||0,a[1]||0]:[n/r/3,e/r/3,r]}function ha(a,r,n,e){for(var t=(a.length-2)/6,v=1/0,o=0,i=a.length,u=i-2,d=0;d<t;d++){for(var l=d*6,s=0,f=0;f<i;f+=2){var c=f===0?l:(l+f-2)%u+2,T=a[c]-n[0],h=a[c+1]-n[1],g=r[f]-e[0],M=r[f+1]-e[1],y=g-T,p=M-h;s+=y*y+p*p}s<v&&(v=s,o=d)}return o}function ga(a){for(var r=[],n=a.length,e=0;e<n;e+=2)r[e]=a[n-e-2],r[e+1]=a[n-e-1];return r}function pa(a,r,n,e){for(var t=[],v,o=0;o<a.length;o++){var i=a[o],u=r[o],d=Ar(i),l=Ar(u);v==null&&(v=d[2]<0!=l[2]<0);var s=[],f=[],c=0,T=1/0,h=[],g=i.length;v&&(i=ga(i));for(var M=ha(i,u,d,l)*6,y=g-2,p=0;p<y;p+=2){var E=(M+p)%y+2;s[p+2]=i[E]-d[0],s[p+3]=i[E+1]-d[1]}if(s[0]=i[M]-d[0],s[1]=i[M+1]-d[1],n>0)for(var D=e/n,I=-e/2;I<=e/2;I+=D){for(var G=Math.sin(I),_=Math.cos(I),P=0,p=0;p<i.length;p+=2){var R=s[p],x=s[p+1],U=u[p]-l[0],m=u[p+1]-l[1],A=U*_-m*G,q=U*G+m*_;h[p]=A,h[p+1]=q;var C=A-R,O=q-x;P+=C*C+O*O}if(P<T){T=P,c=I;for(var S=0;S<h.length;S++)f[S]=h[S]}}else for(var Z=0;Z<g;Z+=2)f[Z]=u[Z]-l[0],f[Z+1]=u[Z+1]-l[1];t.push({from:s,to:f,fromCp:d,toCp:l,rotation:-c})}return t}function rr(a){return a.__isCombineMorphing}var Vr="__mOriginal_";function ar(a,r,n){var e=Vr+r,t=a[e]||a[r];a[e]||(a[e]=a[r]);var v=n.replace,o=n.after,i=n.before;a[r]=function(){var u=arguments,d;return i&&i.apply(this,u),v?d=v.apply(this,u):d=t.apply(this,u),o&&o.apply(this,u),d}}function w(a,r){var n=Vr+r;a[n]&&(a[r]=a[n],a[n]=null)}function Lr(a,r){for(var n=0;n<a.length;n++)for(var e=a[n],t=0;t<e.length;){var v=e[t],o=e[t+1];e[t++]=r[0]*v+r[2]*o+r[4],e[t++]=r[1]*v+r[3]*o+r[5]}}function Qr(a,r){var n=a.getUpdatedPathProxy(),e=r.getUpdatedPathProxy(),t=ca(or(n),or(e)),v=t[0],o=t[1],i=a.getComputedTransform(),u=r.getComputedTransform();function d(){this.transform=null}i&&Lr(v,i),u&&Lr(o,u),ar(r,"updateTransform",{replace:d}),r.transform=null;var l=pa(v,o,10,Math.PI),s=[];ar(r,"buildPath",{replace:function(f){for(var c=r.__morphT,T=1-c,h=[],g=0;g<l.length;g++){var M=l[g],y=M.from,p=M.to,E=M.rotation*c,D=M.fromCp,I=M.toCp,G=Math.sin(E),_=Math.cos(E);zr(h,D,I,c);for(var P=0;P<y.length;P+=2){var R=y[P],x=y[P+1],U=p[P],m=p[P+1],A=R*T+U*c,q=x*T+m*c;s[P]=A*_-q*G+h[0],s[P+1]=A*G+q*_+h[1]}var C=s[0],O=s[1];f.moveTo(C,O);for(var P=2;P<y.length;){var U=s[P++],m=s[P++],S=s[P++],Z=s[P++],H=s[P++],V=s[P++];C===U&&O===m&&S===H&&Z===V?f.lineTo(H,V):f.bezierCurveTo(U,m,S,Z,H,V),C=H,O=V}}}})}function cr(a,r,n){if(!a||!r)return r;var e=n.done,t=n.during;Qr(a,r),r.__morphT=0;function v(){w(r,"buildPath"),w(r,"updateTransform"),r.__morphT=-1,r.createPathProxy(),r.dirtyShape()}return r.animateTo({__morphT:1},J({during:function(o){r.dirtyShape(),t&&t(o)},done:function(){v(),e&&e()}},n)),r}function Ma(a,r,n,e,t,v){var o=16;a=t===n?0:Math.round(32767*(a-n)/(t-n)),r=v===e?0:Math.round(32767*(r-e)/(v-e));for(var i=0,u,d=(1<<o)/2;d>0;d/=2){var l=0,s=0;(a&d)>0&&(l=1),(r&d)>0&&(s=1),i+=d*d*(3*l^s),s===0&&(l===1&&(a=d-1-a,r=d-1-r),u=a,a=r,r=u)}return i}function nr(a){var r=1/0,n=1/0,e=-1/0,t=-1/0,v=Y(a,function(i){var u=i.getBoundingRect(),d=i.getComputedTransform(),l=u.x+u.width/2+(d?d[4]:0),s=u.y+u.height/2+(d?d[5]:0);return r=Math.min(l,r),n=Math.min(s,n),e=Math.max(l,e),t=Math.max(s,t),[l,s]}),o=Y(v,function(i,u){return{cp:i,z:Ma(i[0],i[1],r,n,e,t),path:a[u]}});return o.sort(function(i,u){return i.z-u.z}).map(function(i){return i.path})}function Xr(a){return la(a.path,a.count)}function fr(){return{fromIndividuals:[],toIndividuals:[],count:0}}function Ia(a,r,n){var e=[];function t(D){for(var I=0;I<D.length;I++){var G=D[I];rr(G)?t(G.childrenRef()):G instanceof z&&e.push(G)}}t(a);var v=e.length;if(!v)return fr();var o=n.dividePath||Xr,i=o({path:r,count:v});if(i.length!==v)return console.error("Invalid morphing: unmatched splitted path"),fr();e=nr(e),i=nr(i);for(var u=n.done,d=n.during,l=n.individualDelay,s=new Br,f=0;f<v;f++){var c=e[f],T=i[f];T.parent=r,T.copyTransform(s),l||Qr(c,T)}r.__isCombineMorphing=!0,r.childrenRef=function(){return i};function h(D){for(var I=0;I<i.length;I++)i[I].addSelfToZr(D)}ar(r,"addSelfToZr",{after:function(D){h(D)}}),ar(r,"removeSelfFromZr",{after:function(D){for(var I=0;I<i.length;I++)i[I].removeSelfFromZr(D)}});function g(){r.__isCombineMorphing=!1,r.__morphT=-1,r.childrenRef=null,w(r,"addSelfToZr"),w(r,"removeSelfFromZr")}var M=i.length;if(l)for(var y=M,p=function(){y--,y===0&&(g(),u&&u())},f=0;f<M;f++){var E=l?J({delay:(n.delay||0)+l(f,M,e[f],i[f]),done:p},n):n;cr(e[f],i[f],E)}else r.__morphT=0,r.animateTo({__morphT:1},J({during:function(D){for(var I=0;I<M;I++){var G=i[I];G.__morphT=r.__morphT,G.dirtyShape()}d&&d(D)},done:function(){g();for(var D=0;D<a.length;D++)w(a[D],"updateTransform");u&&u()}},n));return r.__zr&&h(r.__zr),{fromIndividuals:e,toIndividuals:i,count:M}}function Ta(a,r,n){var e=r.length,t=[],v=n.dividePath||Xr;function o(c){for(var T=0;T<c.length;T++){var h=c[T];rr(h)?o(h.childrenRef()):h instanceof z&&t.push(h)}}if(rr(a)){o(a.childrenRef());var i=t.length;if(i<e)for(var u=0,d=i;d<e;d++)t.push(lr(t[u++%i]));t.length=e}else{t=v({path:a,count:e});for(var l=a.getComputedTransform(),d=0;d<t.length;d++)t[d].setLocalTransform(l);if(t.length!==e)return console.error("Invalid morphing: unmatched splitted path"),fr()}t=nr(t),r=nr(r);for(var s=n.individualDelay,d=0;d<e;d++){var f=s?J({delay:(n.delay||0)+s(d,e,t[d],r[d])},n):n;cr(t[d],r[d],f)}return{fromIndividuals:t,toIndividuals:r,count:r.length}}function qr(a){return k(a[0])}function Ur(a,r){for(var n=[],e=a.length,t=0;t<e;t++)n.push({one:a[t],many:[]});for(var t=0;t<r.length;t++){var v=r[t].length,o=void 0;for(o=0;o<v;o++)n[o%e].many.push(r[t][o])}for(var i=0,t=e-1;t>=0;t--)if(!n[t].many.length){var u=n[i].many;if(u.length<=1)if(i)i=0;else return n;var v=u.length,d=Math.ceil(v/2);n[t].many=u.slice(d,v),n[i].many=u.slice(0,d),i++}return n}var ya={clone:function(a){for(var r=[],n=1-Math.pow(1-a.path.style.opacity,1/a.count),e=0;e<a.count;e++){var t=lr(a.path);t.setStyle("opacity",n),r.push(t)}return r},split:null};function vr(a,r,n,e,t,v){if(!a.length||!r.length)return;var o=sr("update",e,t);if(!(o&&o.duration>0))return;var i=e.getModel("universalTransition").get("delay"),u=Object.assign({setToFinal:!0},o),d,l;qr(a)&&(d=a,l=r),qr(r)&&(d=r,l=a);function s(M,y,p,E,D){var I=M.many,G=M.one;if(I.length===1&&!D){var _=y?I[0]:G,P=y?G:I[0];if(rr(_))s({many:[_],one:P},!0,p,E,!0);else{var R=i?J({delay:i(p,E)},u):u;cr(_,P,R),v(_,P,_,P,R)}}else for(var x=J({dividePath:ya[n],individualDelay:i&&function(O,S,Z,H){return i(O+p,E)}},u),U=y?Ia(I,G,x):Ta(G,I,x),m=U.fromIndividuals,A=U.toIndividuals,q=m.length,C=0;C<q;C++){var R=i?J({delay:i(C,q)},u):u;v(m[C],A[C],y?I[C]:M.one,y?M.one:I[C],R)}}for(var f=d?d===a:a.length>r.length,c=d?Ur(l,d):Ur(f?r:a,[f?a:r]),T=0,h=0;h<c.length;h++)T+=c[h].many.length;for(var g=0,h=0;h<c.length;h++)s(c[h],f,g,T),g+=c[h].many.length}function Q(a){if(!a)return[];if(k(a)){for(var r=[],n=0;n<a.length;n++)r.push(Q(a[n]));return r}var e=[];return a.traverse(function(t){t instanceof z&&!t.disableMorphing&&!t.invisible&&!t.ignore&&e.push(t)}),e}var Jr=1e4,Da=br();function Ga(a){for(var r=a.dimensions,n=0;n<r.length;n++){var e=a.getDimensionInfo(r[n]);if(e&&e.otherDims.itemGroupId===0)return r[n]}}function Or(a){var r=[];return L(a,function(n){var e=n.data;if(!(e.count()>Jr))for(var t=e.getIndices(),v=Ga(e),o=0;o<t.length;o++)r.push({dataGroupId:n.dataGroupId,data:e,dim:n.dim||v,divide:n.divide,dataIndex:o})}),r}function ir(a,r,n){a.traverse(function(e){e instanceof z&&ra(e,{style:{opacity:0}},r,{dataIndex:n,isFrom:!0})})}function dr(a){if(a.parent){var r=a.getComputedTransform();a.setLocalTransform(r),a.parent.remove(a)}}function W(a){a.stopAnimation(),a.isGroup&&a.traverse(function(r){r.stopAnimation()})}function Ea(a,r,n){var e=sr("update",n,r);e&&a.traverse(function(t){if(t instanceof aa){var v=na(t);v&&t.animateFrom({style:v},e)}})}function Pa(a,r){var n=a.length;if(n!==r.length)return!1;for(var e=0;e<n;e++){var t=a[e],v=r[e];if(t.data.getId(t.dataIndex)!==v.data.getId(v.dataIndex))return!1}return!0}function $r(a,r,n){var e=Or(a),t=Or(r);function v(M,y,p,E,D){(p||M)&&y.animateFrom({style:p&&p!==M?_r(_r({},p.style),M.style):M.style},D)}function o(M){for(var y=0;y<M.length;y++)if(M[y].dim)return M[y].dim}var i=o(e),u=o(t),d=!1;function l(M,y){return function(p){var E=p.data,D=p.dataIndex;if(y)return E.getId(D);var I=p.dataGroupId,G=M?i||u:u||i,_=G&&E.getDimensionInfo(G),P=_&&_.ordinalMeta;if(_){var R=E.get(_.name,D);return P&&P.categories[R]||R+""}var x=E.getRawDataItem(D);return x&&x.groupId?x.groupId+"":I||E.getId(D)}}var s=Pa(e,t),f={};if(!s)for(var c=0;c<t.length;c++){var T=t[c],h=T.data.getItemGraphicEl(T.dataIndex);h&&(f[h.id]=!0)}function g(M,y){var p=e[y],E=t[M],D=E.data.hostModel,I=p.data.getItemGraphicEl(p.dataIndex),G=E.data.getItemGraphicEl(E.dataIndex);if(I===G){G&&Ea(G,E.dataIndex,D);return}I&&f[I.id]||G&&(W(G),I?(W(I),dr(I),d=!0,vr(Q(I),Q(G),E.divide,D,M,v)):ir(G,D,M))}new Er(e,t,l(!0,s),l(!1,s),null,"multiple").update(g).updateManyToOne(function(M,y){var p=t[M],E=p.data,D=E.hostModel,I=E.getItemGraphicEl(p.dataIndex),G=Pr(Y(y,function(_){return e[_].data.getItemGraphicEl(e[_].dataIndex)}),function(_){return _&&_!==I&&!f[_.id]});I&&(W(I),G.length?(L(G,function(_){W(_),dr(_)}),d=!0,vr(Q(G),Q(I),p.divide,D,M,v)):ir(I,D,p.dataIndex))}).updateOneToMany(function(M,y){var p=e[y],E=p.data.getItemGraphicEl(p.dataIndex);if(!(E&&f[E.id])){var D=Pr(Y(M,function(G){return t[G].data.getItemGraphicEl(t[G].dataIndex)}),function(G){return G&&G!==E}),I=t[M[0]].data.hostModel;D.length&&(L(D,function(G){return W(G)}),E?(W(E),dr(E),d=!0,vr(Q(E),Q(D),p.divide,I,M[0],v)):L(D,function(G){return ir(G,I,M[0])}))}}).updateManyToMany(function(M,y){new Er(y,M,function(p){return e[p].data.getId(e[p].dataIndex)},function(p){return t[p].data.getId(t[p].dataIndex)}).update(function(p,E){g(M[p],y[E])}).execute()}).execute(),d&&L(r,function(M){var y=M.data,p=y.hostModel,E=p&&n.getViewOfSeriesModel(p),D=sr("update",p,0);E&&p.isAnimationEnabled()&&D&&D.duration>0&&E.group.traverse(function(I){I instanceof z&&!I.animators.length&&I.animateFrom({style:{opacity:0}},D)})})}function Sr(a){var r=a.getModel("universalTransition").get("seriesKey");return r||a.id}function Zr(a){return k(a)?a.sort().join(","):a}function K(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function _a(a,r){var n=tr(),e=tr(),t=tr();return L(a.oldSeries,function(v,o){var i=a.oldDataGroupIds[o],u=a.oldData[o],d=Sr(v),l=Zr(d);e.set(l,{dataGroupId:i,data:u}),k(d)&&L(d,function(s){t.set(s,{key:l,dataGroupId:i,data:u})})}),L(r.updatedSeries,function(v){if(v.isUniversalTransitionEnabled()&&v.isAnimationEnabled()){var o=v.get("dataGroupId"),i=v.getData(),u=Sr(v),d=Zr(u),l=e.get(d);if(l)n.set(d,{oldSeries:[{dataGroupId:l.dataGroupId,divide:K(l.data),data:l.data}],newSeries:[{dataGroupId:o,divide:K(i),data:i}]});else if(k(u)){var s=[];L(u,function(T){var h=e.get(T);h.data&&s.push({dataGroupId:h.dataGroupId,divide:K(h.data),data:h.data})}),s.length&&n.set(d,{oldSeries:s,newSeries:[{dataGroupId:o,data:i,divide:K(i)}]})}else{var f=t.get(u);if(f){var c=n.get(f.key);c||(c={oldSeries:[{dataGroupId:f.dataGroupId,data:f.data,divide:K(f.data)}],newSeries:[]},n.set(f.key,c)),c.newSeries.push({dataGroupId:o,data:i,divide:K(i)})}}}}),n}function Nr(a,r){for(var n=0;n<a.length;n++){var e=r.seriesIndex!=null&&r.seriesIndex===a[n].seriesIndex||r.seriesId!=null&&r.seriesId===a[n].id;if(e)return n}}function Ra(a,r,n,e){var t=[],v=[];L(F(a.from),function(o){var i=Nr(r.oldSeries,o);i>=0&&t.push({dataGroupId:r.oldDataGroupIds[i],data:r.oldData[i],divide:K(r.oldData[i]),dim:o.dimension})}),L(F(a.to),function(o){var i=Nr(n.updatedSeries,o);if(i>=0){var u=n.updatedSeries[i].getData();v.push({dataGroupId:r.oldDataGroupIds[i],data:u,divide:K(u),dim:o.dimension})}}),t.length>0&&v.length>0&&$r(t,v,e)}function ma(a){a.registerUpdateLifecycle("series:beforeupdate",function(r,n,e){L(F(e.seriesTransition),function(t){L(F(t.to),function(v){for(var o=e.updatedSeries,i=0;i<o.length;i++)(v.seriesIndex!=null&&v.seriesIndex===o[i].seriesIndex||v.seriesId!=null&&v.seriesId===o[i].id)&&(o[i][er]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(r,n,e){var t=Da(n);if(t.oldSeries&&e.updatedSeries&&e.optionChanged){var v=e.seriesTransition;if(v)L(F(v),function(c){Ra(c,t,e,n)});else{var o=_a(t,e);L(o.keys(),function(c){var T=o.get(c);$r(T.oldSeries,T.newSeries,n)})}L(e.updatedSeries,function(c){c[er]&&(c[er]=!1)})}for(var i=r.getSeries(),u=t.oldSeries=[],d=t.oldDataGroupIds=[],l=t.oldData=[],s=0;s<i.length;s++){var f=i[s].getData();f.count()<Jr&&(u.push(i[s]),d.push(i[s].get("dataGroupId")),l.push(f))}})}export{ma as i};
