import{_ as T,e as ie,ah as ne,aS as fe,bm as se,bR as z,bl as me,aB as Ae,bS as be,bK as B,Y as k,bL as ye,bT as Se,bP as Z,G as _e,l as xe,a5 as X,ac as we,R as oe,a1 as De,a4 as Pe,a3 as Ce,bU as Le,a7 as Ie,bM as Me,bV as ke,bO as he,ad as Te,bW as Oe,bX as Ve}from"./install-32865521.js";import{c as le,a as Re,g as Be,b as ce,d as Ee,e as Ne}from"./install-32c4c6d1.js";var ue=function(i){T(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,r){return le(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,r,a){var n=this.coordinateSystem;if(n&&n.clampData){var s=n.dataToPoint(n.clampData(e));if(a)ie(n.getAxes(),function(u,d){if(u.type==="category"){var g=u.getTicksCoords(),v=n.clampData(e)[d];r&&(r[d]==="x1"||r[d]==="y1")&&(v+=1),v>g.length-1&&(v=g.length-1),v<0&&(v=0),g[v]&&(s[d]=u.toGlobalCoord(g[v].coord))}});else{var l=this.getData(),o=l.getLayout("offset"),c=l.getLayout("size"),h=n.getBaseAxis().isHorizontal()?0:1;s[h]+=o+c/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(ne);ne.registerClass(ue);const j=ue;var We=function(i){T(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return le(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>e&&(e=r),e},t.prototype.brushSelector=function(e,r,a){return a.rect(r.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=fe(j.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(j);const Ge=We;var Fe=function(){function i(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return i}(),Ye=function(i){T(t,i);function t(e){var r=i.call(this,e)||this;return r.type="sausage",r}return t.prototype.getDefaultShape=function(){return new Fe},t.prototype.buildPath=function(e,r){var a=r.cx,n=r.cy,s=Math.max(r.r0||0,0),l=Math.max(r.r,0),o=(l-s)*.5,c=s+o,h=r.startAngle,u=r.endAngle,d=r.clockwise,g=Math.PI*2,v=d?u-h<g:h-u<g;v||(h=u-(d?g:-g));var f=Math.cos(h),m=Math.sin(h),b=Math.cos(u),x=Math.sin(u);v?(e.moveTo(f*s+a,m*s+n),e.arc(f*c+a,m*c+n,o,-Math.PI+h,h,!d)):e.moveTo(f*l+a,m*l+n),e.arc(a,n,l,h,u,!d),e.arc(b*c+a,x*c+n,o,u-Math.PI*2,u-Math.PI,!d),s!==0&&e.arc(a,n,s,u,h,d)},t}(se);const $=Ye;function Xe(i,t){t=t||{};var e=t.isRoundCap;return function(r,a,n){var s=a.position;if(!s||s instanceof Array)return z(r,a,n);var l=i(s),o=a.distance!=null?a.distance:5,c=this.shape,h=c.cx,u=c.cy,d=c.r,g=c.r0,v=(d+g)/2,f=c.startAngle,m=c.endAngle,b=(f+m)/2,x=e?Math.abs(d-g)/2:0,w=Math.cos,A=Math.sin,D=h+d*w(f),P=u+d*A(f),C="left",L="top";switch(l){case"startArc":D=h+(g-o)*w(b),P=u+(g-o)*A(b),C="center",L="top";break;case"insideStartArc":D=h+(g+o)*w(b),P=u+(g+o)*A(b),C="center",L="bottom";break;case"startAngle":D=h+v*w(f)+O(f,o+x,!1),P=u+v*A(f)+V(f,o+x,!1),C="right",L="middle";break;case"insideStartAngle":D=h+v*w(f)+O(f,-o+x,!1),P=u+v*A(f)+V(f,-o+x,!1),C="left",L="middle";break;case"middle":D=h+v*w(b),P=u+v*A(b),C="center",L="middle";break;case"endArc":D=h+(d+o)*w(b),P=u+(d+o)*A(b),C="center",L="bottom";break;case"insideEndArc":D=h+(d-o)*w(b),P=u+(d-o)*A(b),C="center",L="top";break;case"endAngle":D=h+v*w(m)+O(m,o+x,!0),P=u+v*A(m)+V(m,o+x,!0),C="left",L="middle";break;case"insideEndAngle":D=h+v*w(m)+O(m,-o+x,!0),P=u+v*A(m)+V(m,-o+x,!0),C="right",L="middle";break;default:return z(r,a,n)}return r=r||{},r.x=D,r.y=P,r.align=C,r.verticalAlign=L,r}}function Ue(i,t,e,r){if(me(r)){i.setTextConfig({rotation:r});return}else if(Ae(t)){i.setTextConfig({rotation:0});return}var a=i.shape,n=a.clockwise?a.startAngle:a.endAngle,s=a.clockwise?a.endAngle:a.startAngle,l=(n+s)/2,o,c=e(t);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":o=l;break;case"startAngle":case"insideStartAngle":o=n;break;case"endAngle":case"insideEndAngle":o=s;break;default:i.setTextConfig({rotation:0});return}var h=Math.PI*1.5-o;c==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),i.setTextConfig({rotation:h})}function O(i,t,e){return t*Math.sin(i)*(e?-1:1)}function V(i,t,e){return t*Math.cos(i)*(e?1:-1)}var F=Math.max,Y=Math.min;function ze(i,t){var e=i.getArea&&i.getArea();if(ce(i,"cartesian2d")){var r=i.getBaseAxis();if(r.type!=="category"||!r.onBand){var a=t.getLayout("bandWidth");r.isHorizontal()?(e.x-=a,e.width+=a*2):(e.y-=a,e.height+=a*2)}}return e}var Ze=function(i){T(t,i);function t(){var e=i.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,r,a,n){this._model=e,this._removeOnRenderedListener(a),this._updateDrawMode(e);var s=e.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,r,a):this._renderNormal(e,r,a,n))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,r){this._progressiveEls=[],this._incrementalRenderLarge(e,r)},t.prototype.eachRendered=function(e){be(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var r=e.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(e,r,a,n){var s=this.group,l=e.getData(),o=this._data,c=e.coordinateSystem,h=c.getBaseAxis(),u;c.type==="cartesian2d"?u=h.isHorizontal():c.type==="polar"&&(u=h.dim==="angle");var d=e.isAnimationEnabled()?e:null,g=je(e,c);g&&this._enableRealtimeSort(g,l,a);var v=e.get("clip",!0)||g,f=ze(c,l);s.removeClipPath();var m=e.get("roundCap",!0),b=e.get("showBackground",!0),x=e.getModel("backgroundStyle"),w=x.get("borderRadius")||0,A=[],D=this._backgroundEls,P=n&&n.isInitSort,C=n&&n.type==="changeAxisOrder";function L(p){var I=R[c.type](l,p),y=et(c,u,I);return y.useStyle(x.getItemStyle()),c.type==="cartesian2d"&&y.setShape("r",w),A[p]=y,y}l.diff(o).add(function(p){var I=l.getItemModel(p),y=R[c.type](l,p,I);if(b&&L(p),!(!l.hasValue(p)||!Q[c.type](y))){var M=!1;v&&(M=q[c.type](f,y));var S=H[c.type](e,l,p,y,u,d,h.model,!1,m);g&&(S.forceLabelAnimation=!0),ee(S,l,p,I,y,e,u,c.type==="polar"),P?S.attr({shape:y}):g?K(g,d,S,y,p,u,!1,!1):B(S,{shape:y},e,p),l.setItemGraphicEl(p,S),s.add(S),S.ignore=M}}).update(function(p,I){var y=l.getItemModel(p),M=R[c.type](l,p,y);if(b){var S=void 0;D.length===0?S=L(I):(S=D[I],S.useStyle(x.getItemStyle()),c.type==="cartesian2d"&&S.setShape("r",w),A[p]=S);var ve=R[c.type](l,p),pe=ge(u,ve,c);k(S,{shape:pe},d,p)}var _=o.getItemGraphicEl(I);if(!l.hasValue(p)||!Q[c.type](M)){s.remove(_);return}var W=!1;if(v&&(W=q[c.type](f,M),W&&s.remove(_)),_?ye(_):_=H[c.type](e,l,p,M,u,d,h.model,!!_,m),g&&(_.forceLabelAnimation=!0),C){var U=_.getTextContent();if(U){var G=Se(U);G.prevValue!=null&&(G.prevValue=G.value)}}else ee(_,l,p,y,M,e,u,c.type==="polar");P?_.attr({shape:M}):g?K(g,d,_,M,p,u,!0,C):k(_,{shape:M},e,p,null),l.setItemGraphicEl(p,_),_.ignore=W,s.add(_)}).remove(function(p){var I=o.getItemGraphicEl(p);I&&Z(I,e,p)}).execute();var E=this._backgroundGroup||(this._backgroundGroup=new _e);E.removeAll();for(var N=0;N<A.length;++N)E.add(A[N]);s.add(E),this._backgroundEls=A,this._data=l},t.prototype._renderLarge=function(e,r,a){this._clear(),re(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,r){this._removeBackground(),re(r,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var r=e.get("clip",!0)&&Re(e.coordinateSystem,!1,e),a=this.group;r?a.setClipPath(r):a.removeClipPath()},t.prototype._enableRealtimeSort=function(e,r,a){var n=this;if(r.count()){var s=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,e,a),this._isFirstFrame=!1;else{var l=function(o){var c=r.getItemGraphicEl(o),h=c&&c.shape;return h&&Math.abs(s.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){n._updateSortWithinSameData(r,l,s,a)},a.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,r,a){var n=[];return e.each(e.mapDimension(r.dim),function(s,l){var o=a(l);o=o??NaN,n.push({dataIndex:l,mappedValue:o,ordinalNumber:s})}),n.sort(function(s,l){return l.mappedValue-s.mappedValue}),{ordinalNumbers:xe(n,function(s){return s.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,r,a){for(var n=a.scale,s=e.mapDimension(a.dim),l=Number.MAX_VALUE,o=0,c=n.getOrdinalMeta().categories.length;o<c;++o){var h=e.rawIndexOf(s,n.getRawOrdinalNumber(o)),u=h<0?Number.MIN_VALUE:r(e.indexOfRawIndex(h));if(u>l)return!0;l=u}return!1},t.prototype._isOrderDifferentInView=function(e,r){for(var a=r.scale,n=a.getExtent(),s=Math.max(0,n[0]),l=Math.min(n[1],a.getOrdinalMeta().categories.length-1);s<=l;++s)if(e.ordinalNumbers[s]!==a.getRawOrdinalNumber(s))return!0},t.prototype._updateSortWithinSameData=function(e,r,a,n){if(this._isOrderChangedWithinSameData(e,r,a)){var s=this._dataSort(e,a,r);this._isOrderDifferentInView(s,a)&&(this._removeOnRenderedListener(n),n.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:s}))}},t.prototype._dispatchInitSort=function(e,r,a){var n=r.baseAxis,s=this._dataSort(e,n,function(l){return e.get(e.mapDimension(r.otherAxis.dim),l)});a.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",isInitSort:!0,axisId:n.index,sortInfo:s})},t.prototype.remove=function(e,r){this._clear(this._model),this._removeOnRenderedListener(r)},t.prototype.dispose=function(e,r){this._removeOnRenderedListener(r)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var r=this.group,a=this._data;e&&e.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(n){Z(n,e,X(n).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(we),q={cartesian2d:function(i,t){var e=t.width<0?-1:1,r=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var a=i.x+i.width,n=i.y+i.height,s=F(t.x,i.x),l=Y(t.x+t.width,a),o=F(t.y,i.y),c=Y(t.y+t.height,n),h=l<s,u=c<o;return t.x=h&&s>a?l:s,t.y=u&&o>n?c:o,t.width=h?0:l-s,t.height=u?0:c-o,e<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),h||u},polar:function(i,t){var e=t.r0<=t.r?1:-1;if(e<0){var r=t.r;t.r=t.r0,t.r0=r}var a=Y(t.r,i.r),n=F(t.r0,i.r0);t.r=a,t.r0=n;var s=a-n<0;if(e<0){var r=t.r;t.r=t.r0,t.r0=r}return s}},H={cartesian2d:function(i,t,e,r,a,n,s,l,o){var c=new oe({shape:De({},r),z2:1});if(c.__dataIndex=e,c.name="item",n){var h=c.shape,u=a?"height":"width";h[u]=0}return c},polar:function(i,t,e,r,a,n,s,l,o){var c=!a&&o?$:he,h=new c({shape:r,z2:1});h.name="item";var u=de(a);if(h.calculateTextPosition=Xe(u,{isRoundCap:c===$}),n){var d=h.shape,g=a?"r":"endAngle",v={};d[g]=a?0:r.startAngle,v[g]=r[g],(l?k:B)(h,{shape:v},n)}return h}};function je(i,t){var e=i.get("realtimeSort",!0),r=t.getBaseAxis();if(e&&r.type==="category"&&t.type==="cartesian2d")return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}function K(i,t,e,r,a,n,s,l){var o,c;n?(c={x:r.x,width:r.width},o={y:r.y,height:r.height}):(c={y:r.y,height:r.height},o={x:r.x,width:r.width}),l||(s?k:B)(e,{shape:o},t,a,null);var h=t?i.baseAxis.model:null;(s?k:B)(e,{shape:c},h,a)}function J(i,t){for(var e=0;e<t.length;e++)if(!isFinite(i[t[e]]))return!0;return!1}var $e=["x","y","width","height"],qe=["cx","cy","r","startAngle","endAngle"],Q={cartesian2d:function(i){return!J(i,$e)},polar:function(i){return!J(i,qe)}},R={cartesian2d:function(i,t,e){var r=i.getItemLayout(t),a=e?Ke(e,r):0,n=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+n*a/2,y:r.y+s*a/2,width:r.width-n*a,height:r.height-s*a}},polar:function(i,t,e){var r=i.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function He(i){return i.startAngle!=null&&i.endAngle!=null&&i.startAngle===i.endAngle}function de(i){return function(t){var e=t?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+e;default:return r}}}(i)}function ee(i,t,e,r,a,n,s,l){var o=t.getItemVisual(e,"style");l||i.setShape("r",r.get(["itemStyle","borderRadius"])||0),i.useStyle(o);var c=r.getShallow("cursor");c&&i.attr("cursor",c);var h=l?s?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":s?a.height>=0?"bottom":"top":a.width>=0?"right":"left",u=Pe(r);Ce(i,u,{labelFetcher:n,labelDataIndex:e,defaultText:Be(n.getData(),e),inheritColor:o.fill,defaultOpacity:o.opacity,defaultOutsidePosition:h});var d=i.getTextContent();if(l&&d){var g=r.get(["label","position"]);i.textConfig.inside=g==="middle"?!0:null,Ue(i,g==="outside"?h:g,de(s),r.get(["label","rotate"]))}Le(d,u,n.getRawValue(e),function(f){return Ee(t,f)});var v=r.getModel(["emphasis"]);Ie(i,v.get("focus"),v.get("blurScope"),v.get("disabled")),Me(i,r),He(a)&&(i.style.fill="none",i.style.stroke="none",ie(i.states,function(f){f.style&&(f.style.fill=f.style.stroke="none")}))}function Ke(i,t){var e=i.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var r=i.get(["itemStyle","borderWidth"])||0,a=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),n=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,a,n)}var Je=function(){function i(){}return i}(),te=function(i){T(t,i);function t(e){var r=i.call(this,e)||this;return r.type="largeBar",r}return t.prototype.getDefaultShape=function(){return new Je},t.prototype.buildPath=function(e,r){for(var a=r.points,n=this.baseDimIdx,s=1-this.baseDimIdx,l=[],o=[],c=this.barWidth,h=0;h<a.length;h+=3)o[n]=c,o[s]=a[h+2],l[n]=a[h+n],l[s]=a[h+s],e.rect(l[0],l[1],o[0],o[1])},t}(se);function re(i,t,e,r){var a=i.getData(),n=a.getLayout("valueAxisHorizontal")?1:0,s=a.getLayout("largeDataIndices"),l=a.getLayout("size"),o=i.getModel("backgroundStyle"),c=a.getLayout("largeBackgroundPoints");if(c){var h=new te({shape:{points:c},incremental:!!r,silent:!0,z2:0});h.baseDimIdx=n,h.largeDataIndices=s,h.barWidth=l,h.useStyle(o.getItemStyle()),t.add(h),e&&e.push(h)}var u=new te({shape:{points:a.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});u.baseDimIdx=n,u.largeDataIndices=s,u.barWidth=l,t.add(u),u.useStyle(a.getVisual("style")),X(u).seriesIndex=i.seriesIndex,i.get("silent")||(u.on("mousedown",ae),u.on("mousemove",ae)),e&&e.push(u)}var ae=ke(function(i){var t=this,e=Qe(t,i.offsetX,i.offsetY);X(t).dataIndex=e>=0?e:null},30,!1);function Qe(i,t,e){for(var r=i.baseDimIdx,a=1-r,n=i.shape.points,s=i.largeDataIndices,l=[],o=[],c=i.barWidth,h=0,u=n.length/3;h<u;h++){var d=h*3;if(o[r]=c,o[a]=n[d+2],l[r]=n[d+r],l[a]=n[d+a],o[a]<0&&(l[a]+=o[a],o[a]=-o[a]),t>=l[0]&&t<=l[0]+o[0]&&e>=l[1]&&e<=l[1]+o[1])return s[h]}return-1}function ge(i,t,e){if(ce(e,"cartesian2d")){var r=t,a=e.getArea();return{x:i?r.x:a.x,y:i?a.y:r.y,width:i?r.width:a.width,height:i?a.height:r.height}}else{var a=e.getArea(),n=t;return{cx:a.cx,cy:a.cy,r0:i?a.r0:n.r0,r:i?a.r:n.r,startAngle:i?n.startAngle:0,endAngle:i?n.endAngle:Math.PI*2}}}function et(i,t,e){var r=i.type==="polar"?he:oe;return new r({shape:ge(t,e,i),silent:!0,z2:0})}const tt=Ze;function it(i){i.registerChartView(tt),i.registerSeriesModel(Ge),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,Te(Ve,"bar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Oe("bar")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,Ne("bar")),i.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var r=t.componentType||"series";e.eachComponent({mainType:r,query:t},function(a){t.sortInfo&&a.axis.setCategorySortInfo(t.sortInfo)})})}export{it as i};
