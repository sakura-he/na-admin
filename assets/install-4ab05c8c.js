import{w as vt,_ as D,e as g,B as Y,f as la,m as Qe,g as Sr,h as fe,j as Mr,k as wr,l as k,n as ua,o as ca,p as xr,q as w,s as br,t as z,v as dt,x as q,E as ha,y as U,z as it,G as C,R as N,A as ve,T as pa,C as Tr,L as fa,D as va,P as Ge,F as nt,Z as Ar,H as da,I as Rr,J as ga,K as ya,M as ma,N as _a,O as Sa,Q as Dr,S as A,V as Ir,W as Vr,X as Ma,Y as wa,$ as gt,a0 as Cr,a1 as de,a2 as xa,a3 as Lr,a4 as Pr,a5 as Re,a6 as ba,a7 as Ta,a8 as Aa,a9 as Ra,aa as Da,ab as Ia,ac as Va,ad as et,ae as Ca,af as yt,ag as ne,ah as La,ai as Se,aj as j,ak as Pa,al as Oa,am as Ga,an as Ea,ao as De,ap as za,aq as Or,ar as ot,as as Fa,at as ka,au as mt,av as st,aw as lt,ax as Gr,ay as ut,u as ge,az as Ha,aA as Q,aB as H,aC as Fe,aD as ke,aE as R,aF as Na,aH as He,aI as Za,aJ as Er,aK as Ie,aL as Ba,aM as Wa,aN as Ya,aO as Ua,aP as K,aQ as Xa,aR as $a,aS as Ee,aT as zr,aU as Ja,aV as Ka,aW as ja,aX as qa,aY as ie,aZ as he,a_ as be,a$ as Fr,b0 as pe,b1 as Qa,b2 as ei,b3 as ti,b4 as ri,b5 as _t,b6 as ai,b7 as ii,b8 as ni,b9 as St,ba as oi}from"./install-32865521.js";import{c as si}from"./createSeriesDataSimply-e2b30047.js";var li=1e-8;function Mt(n,r){return Math.abs(n-r)<li}function wt(n,r,e){var t=0,a=n[0];if(!a)return!1;for(var i=1;i<n.length;i++){var o=n[i];t+=vt(a[0],a[1],o[0],o[1],r,e),a=o}var s=n[0];return(!Mt(a[0],s[0])||!Mt(a[1],s[1]))&&(t+=vt(a[0],a[1],s[0],s[1],r,e)),t!==0}var ui=[];function Ne(n,r){for(var e=0;e<n.length;e++)fe(n[e],n[e],r)}function xt(n,r,e,t){for(var a=0;a<n.length;a++){var i=n[a];t&&(i=t.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(Mr(r,r,i),wr(e,e,i))}}function ci(n){for(var r=0,e=0,t=0,a=n.length,i=n[a-1][0],o=n[a-1][1],s=0;s<a;s++){var l=n[s][0],u=n[s][1],c=i*u-l*o;r+=c,e+=(i+l)*c,t+=(o+u)*c,i=l,o=u}return r?[e/r/3,t/r/3,r]:[n[0][0]||0,n[0][1]||0]}var kr=function(){function n(r){this.name=r}return n.prototype.setCenter=function(r){this._center=r},n.prototype.getCenter=function(){var r=this._center;return r||(r=this._center=this.calcCenter()),r},n}(),bt=function(){function n(r,e){this.type="polygon",this.exterior=r,this.interiors=e}return n}(),Tt=function(){function n(r){this.type="linestring",this.points=r}return n}(),Hr=function(n){D(r,n);function r(e,t,a){var i=n.call(this,e)||this;return i.type="geoJSON",i.geometries=t,i._center=a&&[a[0],a[1]],i}return r.prototype.calcCenter=function(){for(var e=this.geometries,t,a=0,i=0;i<e.length;i++){var o=e[i],s=o.exterior,l=s&&s.length;l>a&&(t=o,a=l)}if(t)return ci(t.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},r.prototype.getBoundingRect=function(e){var t=this._rect;if(t&&!e)return t;var a=[1/0,1/0],i=[-1/0,-1/0],o=this.geometries;return g(o,function(s){s.type==="polygon"?xt(s.exterior,a,i,e):g(s.points,function(l){xt(l,a,i,e)})}),isFinite(a[0])&&isFinite(a[1])&&isFinite(i[0])&&isFinite(i[1])||(a[0]=a[1]=i[0]=i[1]=0),t=new Y(a[0],a[1],i[0]-a[0],i[1]-a[1]),e||(this._rect=t),t},r.prototype.contain=function(e){var t=this.getBoundingRect(),a=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var i=0,o=a.length;i<o;i++){var s=a[i];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(wt(l,e[0],e[1])){for(var c=0;c<(u?u.length:0);c++)if(wt(u[c],e[0],e[1]))continue e;return!0}}}return!1},r.prototype.transformTo=function(e,t,a,i){var o=this.getBoundingRect(),s=o.width/o.height;a?i||(i=a/s):a=s*i;for(var l=new Y(e,t,a,i),u=o.calculateTransform(l),c=this.geometries,h=0;h<c.length;h++){var f=c[h];f.type==="polygon"?(Ne(f.exterior,u),g(f.interiors,function(p){Ne(p,u)})):g(f.points,function(p){Ne(p,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},r.prototype.cloneShallow=function(e){e==null&&(e=this.name);var t=new r(e,this.geometries,this._center);return t._rect=this._rect,t.transformTo=null,t},r}(kr),hi=function(n){D(r,n);function r(e,t){var a=n.call(this,e)||this;return a.type="geoSVG",a._elOnlyForCalculate=t,a}return r.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,t=e.getBoundingRect(),a=[t.x+t.width/2,t.y+t.height/2],i=la(ui),o=e;o&&!o.isGeoSVGGraphicRoot;)Qe(i,o.getLocalTransform(),i),o=o.parent;return Sr(i,i),fe(a,a,i),a},r}(kr);function pi(n){if(!n.UTF8Encoding)return n;var r=n,e=r.UTF8Scale;e==null&&(e=1024);var t=r.features;return g(t,function(a){var i=a.geometry,o=i.encodeOffsets,s=i.coordinates;if(o)switch(i.type){case"LineString":i.coordinates=Nr(s,o,e);break;case"Polygon":Ze(s,o,e);break;case"MultiLineString":Ze(s,o,e);break;case"MultiPolygon":g(s,function(l,u){return Ze(l,o[u],e)})}}),r.UTF8Encoding=!1,r}function Ze(n,r,e){for(var t=0;t<n.length;t++)n[t]=Nr(n[t],r[t],e)}function Nr(n,r,e){for(var t=[],a=r[0],i=r[1],o=0;o<n.length;o+=2){var s=n.charCodeAt(o)-64,l=n.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=a,l+=i,a=s,i=l,t.push([s/e,l/e])}return t}function fi(n,r){return n=pi(n),k(ua(n.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var t=e.properties,a=e.geometry,i=[];switch(a.type){case"Polygon":var o=a.coordinates;i.push(new bt(o[0],o.slice(1)));break;case"MultiPolygon":g(a.coordinates,function(l){l[0]&&i.push(new bt(l[0],l.slice(1)))});break;case"LineString":i.push(new Tt([a.coordinates]));break;case"MultiLineString":i.push(new Tt(a.coordinates))}var s=new Hr(t[r||"name"],i,t.cp);return s.properties=t,s})}var At="\0_ec_interaction_mutex";function Rt(n,r){return!!vi(n)[r]}function vi(n){return n[At]||(n[At]={})}ca({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},xr);var di=function(n){D(r,n);function r(e){var t=n.call(this)||this;t._zr=e;var a=w(t._mousedownHandler,t),i=w(t._mousemoveHandler,t),o=w(t._mouseupHandler,t),s=w(t._mousewheelHandler,t),l=w(t._pinchHandler,t);return t.enable=function(u,c){this.disable(),this._opt=br(z(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(e.on("mousedown",a),e.on("mousemove",i),e.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(e.on("mousewheel",s),e.on("pinch",l))},t.disable=function(){e.off("mousedown",a),e.off("mousemove",i),e.off("mouseup",o),e.off("mousewheel",s),e.off("pinch",l)},t}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype.setPointerChecker=function(e){this.pointerChecker=e},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(e){if(!dt(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var a=e.offsetX,i=e.offsetY;this.pointerChecker&&this.pointerChecker(e,a,i)&&(this._x=a,this._y=i,this._dragging=!0)}},r.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!Te("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||Rt(this._zr,"globalPan"))){var t=e.offsetX,a=e.offsetY,i=this._x,o=this._y,s=t-i,l=a-o;this._x=t,this._y=a,this._opt.preventDefaultMouseMove&&q(e.event),Zr(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:i,oldY:o,newX:t,newY:a,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(e){dt(e)||(this._dragging=!1)},r.prototype._mousewheelHandler=function(e){var t=Te("zoomOnMouseWheel",e,this._opt),a=Te("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,o=Math.abs(i),s=e.offsetX,l=e.offsetY;if(!(i===0||!t&&!a)){if(t){var u=o>3?1.4:o>1?1.2:1.1,c=i>0?u:1/u;Be(this,"zoom","zoomOnMouseWheel",e,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(a){var h=Math.abs(i),f=(i>0?1:-1)*(h>3?.4:h>1?.15:.05);Be(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:f,originX:s,originY:l,isAvailableBehavior:null})}}},r.prototype._pinchHandler=function(e){if(!Rt(this._zr,"globalPan")){var t=e.pinchScale>1?1.1:1/1.1;Be(this,"zoom",null,e,{scale:t,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},r}(ha);function Be(n,r,e,t,a){n.pointerChecker&&n.pointerChecker(t,a.originX,a.originY)&&(q(t.event),Zr(n,r,e,t,a))}function Zr(n,r,e,t,a){a.isAvailableBehavior=w(Te,null,e,t),n.trigger(r,a)}function Te(n,r,e){var t=e[n];return!n||t&&(!U(t)||r.event[t+"Key"])}const Br=di;function gi(n,r,e){var t=n.target;t.x+=r,t.y+=e,t.dirty()}function yi(n,r,e,t){var a=n.target,i=n.zoomLimit,o=n.zoom=n.zoom||1;if(o*=r,i){var s=i.min||0,l=i.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/n.zoom;n.zoom=o,a.x-=(e-a.x)*(u-1),a.y-=(t-a.y)*(u-1),a.scaleX*=u,a.scaleY*=u,a.dirty()}var mi={axisPointer:1,tooltip:1,brush:1};function _i(n,r,e){var t=r.getComponentByElement(n.topTarget),a=t&&t.coordinateSystem;return t&&t!==e&&!mi.hasOwnProperty(t.mainType)&&a&&a.model!==e}function Wr(n){if(U(n)){var r=new DOMParser;n=r.parseFromString(n,"text/xml")}var e=n;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var We,Ve={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Dt=it(Ve),Ce={"alignment-baseline":"textBaseline","stop-color":"stopColor"},It=it(Ce),Si=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(r,e){e=e||{};var t=Wr(r);this._defsUsePending=[];var a=new C;this._root=a;var i=[],o=t.getAttribute("viewBox")||"",s=parseFloat(t.getAttribute("width")||e.width),l=parseFloat(t.getAttribute("height")||e.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),G(t,a,null,!0,!1);for(var u=t.firstChild;u;)this._parseNode(u,a,i,null,!1,!1),u=u.nextSibling;xi(this._defs,this._defsUsePending),this._defsUsePending=[];var c,h;if(o){var f=ze(o);f.length>=4&&(c={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(c&&s!=null&&l!=null&&(h=Ur(c,{x:0,y:0,width:s,height:l}),!e.ignoreViewBox)){var p=a;a=new C,a.add(p),p.scaleX=p.scaleY=h.scale,p.x=h.x,p.y=h.y}return!e.ignoreRootClip&&s!=null&&l!=null&&a.setClipPath(new N({shape:{x:0,y:0,width:s,height:l}})),{root:a,width:s,height:l,viewBoxRect:c,viewBoxTransform:h,named:i}},n.prototype._parseNode=function(r,e,t,a,i,o){var s=r.nodeName.toLowerCase(),l,u=a;if(s==="defs"&&(i=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=e;else{if(!i){var c=We[s];if(c&&ve(We,s)){l=c.call(this,r,e);var h=r.getAttribute("name");if(h){var f={name:h,namedFrom:null,svgNodeTagLower:s,el:l};t.push(f),s==="g"&&(u=f)}else a&&t.push({name:a.name,namedFrom:a,svgNodeTagLower:s,el:l});e.add(l)}}var p=Vt[s];if(p&&ve(Vt,s)){var v=p.call(this,r),d=r.getAttribute("id");d&&(this._defs[d]=v)}}if(l&&l.isGroup)for(var y=r.firstChild;y;)y.nodeType===1?this._parseNode(y,l,t,u,i,o):y.nodeType===3&&o&&this._parseText(y,l),y=y.nextSibling},n.prototype._parseText=function(r,e){var t=new pa({style:{text:r.textContent},silent:!0,x:this._textX||0,y:this._textY||0});E(e,t),G(r,t,this._defsUsePending,!1,!1),Mi(t,e);var a=t.style,i=a.fontSize;i&&i<9&&(a.fontSize=9,t.scaleX*=i/9,t.scaleY*=i/9);var o=(a.fontSize||a.fontFamily)&&[a.fontStyle,a.fontWeight,(a.fontSize||12)+"px",a.fontFamily||"sans-serif"].join(" ");a.font=o;var s=t.getBoundingRect();return this._textX+=s.width,e.add(t),t},n.internalField=function(){We={g:function(r,e){var t=new C;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t},rect:function(r,e){var t=new N;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t.setShape({x:parseFloat(r.getAttribute("x")||"0"),y:parseFloat(r.getAttribute("y")||"0"),width:parseFloat(r.getAttribute("width")||"0"),height:parseFloat(r.getAttribute("height")||"0")}),t.silent=!0,t},circle:function(r,e){var t=new Tr;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),r:parseFloat(r.getAttribute("r")||"0")}),t.silent=!0,t},line:function(r,e){var t=new fa;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t.setShape({x1:parseFloat(r.getAttribute("x1")||"0"),y1:parseFloat(r.getAttribute("y1")||"0"),x2:parseFloat(r.getAttribute("x2")||"0"),y2:parseFloat(r.getAttribute("y2")||"0")}),t.silent=!0,t},ellipse:function(r,e){var t=new va;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),rx:parseFloat(r.getAttribute("rx")||"0"),ry:parseFloat(r.getAttribute("ry")||"0")}),t.silent=!0,t},polygon:function(r,e){var t=r.getAttribute("points"),a;t&&(a=Pt(t));var i=new Ge({shape:{points:a||[]},silent:!0});return E(e,i),G(r,i,this._defsUsePending,!1,!1),i},polyline:function(r,e){var t=r.getAttribute("points"),a;t&&(a=Pt(t));var i=new nt({shape:{points:a||[]},silent:!0});return E(e,i),G(r,i,this._defsUsePending,!1,!1),i},image:function(r,e){var t=new Ar;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t.setStyle({image:r.getAttribute("xlink:href")||r.getAttribute("href"),x:+r.getAttribute("x"),y:+r.getAttribute("y"),width:+r.getAttribute("width"),height:+r.getAttribute("height")}),t.silent=!0,t},text:function(r,e){var t=r.getAttribute("x")||"0",a=r.getAttribute("y")||"0",i=r.getAttribute("dx")||"0",o=r.getAttribute("dy")||"0";this._textX=parseFloat(t)+parseFloat(i),this._textY=parseFloat(a)+parseFloat(o);var s=new C;return E(e,s),G(r,s,this._defsUsePending,!1,!0),s},tspan:function(r,e){var t=r.getAttribute("x"),a=r.getAttribute("y");t!=null&&(this._textX=parseFloat(t)),a!=null&&(this._textY=parseFloat(a));var i=r.getAttribute("dx")||"0",o=r.getAttribute("dy")||"0",s=new C;return E(e,s),G(r,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(o),s},path:function(r,e){var t=r.getAttribute("d")||"",a=da(t);return E(e,a),G(r,a,this._defsUsePending,!1,!1),a.silent=!0,a}}}(),n}(),Vt={lineargradient:function(n){var r=parseInt(n.getAttribute("x1")||"0",10),e=parseInt(n.getAttribute("y1")||"0",10),t=parseInt(n.getAttribute("x2")||"10",10),a=parseInt(n.getAttribute("y2")||"0",10),i=new Rr(r,e,t,a);return Ct(n,i),Lt(n,i),i},radialgradient:function(n){var r=parseInt(n.getAttribute("cx")||"0",10),e=parseInt(n.getAttribute("cy")||"0",10),t=parseInt(n.getAttribute("r")||"0",10),a=new ga(r,e,t);return Ct(n,a),Lt(n,a),a}};function Ct(n,r){var e=n.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(r.global=!0)}function Lt(n,r){for(var e=n.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var t=e.getAttribute("offset"),a=void 0;t&&t.indexOf("%")>0?a=parseInt(t,10)/100:t?a=parseFloat(t):a=0;var i={};Yr(e,i,i);var o=i.stopColor||e.getAttribute("stop-color")||"#000000";r.colorStops.push({offset:a,color:o})}e=e.nextSibling}}function E(n,r){n&&n.__inheritedStyle&&(r.__inheritedStyle||(r.__inheritedStyle={}),br(r.__inheritedStyle,n.__inheritedStyle))}function Pt(n){for(var r=ze(n),e=[],t=0;t<r.length;t+=2){var a=parseFloat(r[t]),i=parseFloat(r[t+1]);e.push([a,i])}return e}function G(n,r,e,t,a){var i=r,o=i.__inheritedStyle=i.__inheritedStyle||{},s={};n.nodeType===1&&(Ai(n,r),Yr(n,o,s),t||Ri(n,o,s)),i.style=i.style||{},o.fill!=null&&(i.style.fill=Ot(i,"fill",o.fill,e)),o.stroke!=null&&(i.style.stroke=Ot(i,"stroke",o.stroke,e)),g(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(i.style[l]=parseFloat(o[l]))}),g(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(i.style[l]=o[l])}),a&&(i.__selfStyle=s),o.lineDash&&(i.style.lineDash=k(ze(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(i.invisible=!0),o.display==="none"&&(i.ignore=!0)}function Mi(n,r){var e=r.__selfStyle;if(e){var t=e.textBaseline,a=t;!t||t==="auto"||t==="baseline"?a="alphabetic":t==="before-edge"||t==="text-before-edge"?a="top":t==="after-edge"||t==="text-after-edge"?a="bottom":(t==="central"||t==="mathematical")&&(a="middle"),n.style.textBaseline=a}var i=r.__inheritedStyle;if(i){var o=i.textAlign,s=o;o&&(o==="middle"&&(s="center"),n.style.textAlign=s)}}var wi=/^url\(\s*#(.*?)\)/;function Ot(n,r,e,t){var a=e&&e.match(wi);if(a){var i=ya(a[1]);t.push([n,r,i]);return}return e==="none"&&(e=null),e}function xi(n,r){for(var e=0;e<r.length;e++){var t=r[e];t[0].style[t[1]]=n[t[2]]}}var bi=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function ze(n){return n.match(bi)||[]}var Ti=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Ye=Math.PI/180;function Ai(n,r){var e=n.getAttribute("transform");if(e){e=e.replace(/,/g," ");var t=[],a=null;e.replace(Ti,function(h,f,p){return t.push(f,p),""});for(var i=t.length-1;i>0;i-=2){var o=t[i],s=t[i-1],l=ze(o);switch(a=a||Dr(),s){case"translate":Sa(a,a,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":_a(a,a,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":ma(a,a,-parseFloat(l[0])*Ye);break;case"skewX":var u=Math.tan(parseFloat(l[0])*Ye);Qe(a,[1,0,u,1,0,0],a);break;case"skewY":var c=Math.tan(parseFloat(l[0])*Ye);Qe(a,[1,c,0,1,0,0],a);break;case"matrix":a[0]=parseFloat(l[0]),a[1]=parseFloat(l[1]),a[2]=parseFloat(l[2]),a[3]=parseFloat(l[3]),a[4]=parseFloat(l[4]),a[5]=parseFloat(l[5]);break}}r.setLocalTransform(a)}}var Gt=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Yr(n,r,e){var t=n.getAttribute("style");if(t){Gt.lastIndex=0;for(var a;(a=Gt.exec(t))!=null;){var i=a[1],o=ve(Ve,i)?Ve[i]:null;o&&(r[o]=a[2]);var s=ve(Ce,i)?Ce[i]:null;s&&(e[s]=a[2])}}}function Ri(n,r,e){for(var t=0;t<Dt.length;t++){var a=Dt[t],i=n.getAttribute(a);i!=null&&(r[Ve[a]]=i)}for(var t=0;t<It.length;t++){var a=It[t],i=n.getAttribute(a);i!=null&&(e[Ce[a]]=i)}}function Ur(n,r){var e=r.width/n.width,t=r.height/n.height,a=Math.min(e,t);return{scale:a,x:-(n.x+n.width/2)*a+(r.x+r.width/2),y:-(n.y+n.height/2)*a+(r.y+r.height/2)}}function Di(n,r){var e=new Si;return e.parse(n,r)}var Ii=A(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Vi=function(){function n(r,e){this.type="geoSVG",this._usedGraphicMap=A(),this._freedGraphics=[],this._mapName=r,this._parsedXML=Wr(e)}return n.prototype.load=function(){var r=this._firstGraphic;if(!r){r=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(r),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=Li(r.named),t=e.regions,a=e.regionsMap;this._regions=t,this._regionsMap=a}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(r){var e,t;try{e=r&&Di(r,{ignoreViewBox:!0,ignoreRootClip:!0})||{},t=e.root,Ir(t!=null)}catch(y){throw new Error(`Invalid svg format
`+y.message)}var a=new C;a.add(t),a.isGeoSVGGraphicRoot=!0;var i=e.width,o=e.height,s=e.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,h=void 0,f=void 0;if(i!=null?(u=0,h=i):s&&(u=s.x,h=s.width),o!=null?(c=0,f=o):s&&(c=s.y,f=s.height),u==null||c==null){var p=t.getBoundingRect();u==null&&(u=p.x,h=p.width),c==null&&(c=p.y,f=p.height)}l=this._boundingRect=new Y(u,c,h,f)}if(s){var v=Ur(s,l);t.scaleX=t.scaleY=v.scale,t.x=v.x,t.y=v.y}a.setClipPath(new N({shape:l.plain()}));var d=[];return g(e.named,function(y){Ii.get(y.svgNodeTagLower)!=null&&(d.push(y),Ci(y.el))}),{root:a,boundingRect:l,named:d}},n.prototype.useGraphic=function(r){var e=this._usedGraphicMap,t=e.get(r);return t||(t=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(r,t),t)},n.prototype.freeGraphic=function(r){var e=this._usedGraphicMap,t=e.get(r);t&&(e.removeKey(r),this._freedGraphics.push(t))},n}();function Ci(n){n.silent=!1,n.isGroup&&n.traverse(function(r){r.silent=!1})}function Li(n){var r=[],e=A();return g(n,function(t){if(t.namedFrom==null){var a=new hi(t.name,t.el);r.push(a),e.set(t.name,a)}}),{regions:r,regionsMap:e}}var tt=[126,25],Et="南海诸岛",$=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var X=0;X<$.length;X++)for(var ee=0;ee<$[X].length;ee++)$[X][ee][0]/=10.5,$[X][ee][1]/=-10.5/.75,$[X][ee][0]+=tt[0],$[X][ee][1]+=tt[1];function Pi(n,r){if(n==="china"){for(var e=0;e<r.length;e++)if(r[e].name===Et)return;r.push(new Hr(Et,k($,function(t){return{type:"polygon",exterior:t}}),tt))}}var Oi={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function Gi(n,r){if(n==="china"){var e=Oi[r.name];if(e){var t=r.getCenter();t[0]+=e[0]/10.5,t[1]+=-e[1]/(10.5/.75),r.setCenter(t)}}}var Ei=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function zi(n,r){n==="china"&&r.name==="台湾"&&r.geometries.push({type:"polygon",exterior:Ei[0]})}var Fi="name",ki=function(){function n(r,e,t){this.type="geoJSON",this._parsedMap=A(),this._mapName=r,this._specialAreas=t,this._geoJSON=Ni(e)}return n.prototype.load=function(r,e){e=e||Fi;var t=this._parsedMap.get(e);if(!t){var a=this._parseToRegions(e);t=this._parsedMap.set(e,{regions:a,boundingRect:Hi(a)})}var i=A(),o=[];return g(t.regions,function(s){var l=s.name;r&&ve(r,l)&&(s=s.cloneShallow(l=r[l])),o.push(s),i.set(l,s)}),{regions:o,boundingRect:t.boundingRect||new Y(0,0,0,0),regionsMap:i}},n.prototype._parseToRegions=function(r){var e=this._mapName,t=this._geoJSON,a;try{a=t?fi(t,r):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return Pi(e,a),g(a,function(i){var o=i.name;Gi(e,i),zi(e,i);var s=this._specialAreas&&this._specialAreas[o];s&&i.transformTo(s.left,s.top,s.width,s.height)},this),a},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function Hi(n){for(var r,e=0;e<n.length;e++){var t=n[e].getBoundingRect();r=r||t.clone(),r.union(t)}return r}function Ni(n){return U(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var oe=A();const Z={registerMap:function(n,r,e){if(r.svg){var t=new Vi(n,r.svg);oe.set(n,t)}else{var a=r.geoJson||r.geoJSON;a&&!r.features?e=r.specialAreas:a=r;var t=new ki(n,a,e);oe.set(n,t)}},getGeoResource:function(n){return oe.get(n)},getMapForUser:function(n){var r=oe.get(n);return r&&r.type==="geoJSON"&&r.getMapForUser()},load:function(n,r,e){var t=oe.get(n);if(t)return t.load(r,e)}};var ct=["rect","circle","line","ellipse","polygon","polyline","path"],Zi=A(ct),Bi=A(ct.concat(["g"])),Wi=A(ct.concat(["g"])),Xr=Vr();function Me(n){var r=n.getItemStyle(),e=n.get("areaColor");return e!=null&&(r.fill=e),r}function zt(n){var r=n.style;r&&(r.stroke=r.stroke||r.fill,r.fill=null)}var Yi=function(){function n(r){var e=new C;this.uid=Ma("ec_map_draw"),this._controller=new Br(r.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new C),e.add(this._svgGroup=new C)}return n.prototype.draw=function(r,e,t,a,i){var o=r.mainType==="geo",s=r.getData&&r.getData();o&&e.eachComponent({mainType:"series",subType:"map"},function(m){!s&&m.getHostGeoModel()===r&&(s=m.getData())});var l=r.coordinateSystem,u=this._regionsGroup,c=this.group,h=l.getTransformInfo(),f=h.raw,p=h.roam,v=!u.childAt(0)||i;v?(c.x=p.x,c.y=p.y,c.scaleX=p.scaleX,c.scaleY=p.scaleY,c.dirty()):wa(c,p,r);var d=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,y={api:t,geo:l,mapOrGeoModel:r,data:s,isVisualEncodedByVisualMap:d,isGeo:o,transformInfoRaw:f};l.resourceType==="geoJSON"?this._buildGeoJSON(y):l.resourceType==="geoSVG"&&this._buildSVG(y),this._updateController(r,e,t),this._updateMapSelectHandler(r,u,t,a)},n.prototype._buildGeoJSON=function(r){var e=this._regionsGroupByName=A(),t=A(),a=this._regionsGroup,i=r.transformInfoRaw,o=r.mapOrGeoModel,s=r.data,l=r.geo.projection,u=l&&l.stream;function c(p,v){return v&&(p=v(p)),p&&[p[0]*i.scaleX+i.x,p[1]*i.scaleY+i.y]}function h(p){for(var v=[],d=!u&&l&&l.project,y=0;y<p.length;++y){var m=c(p[y],d);m&&v.push(m)}return v}function f(p){return{shape:{points:h(p)}}}a.removeAll(),g(r.geo.regions,function(p){var v=p.name,d=e.get(v),y=t.get(v)||{},m=y.dataIdx,_=y.regionModel;d||(d=e.set(v,new C),a.add(d),m=s?s.indexOfName(v):null,_=r.isGeo?o.getRegionModel(v):s?s.getItemModel(m):null,t.set(v,{dataIdx:m,regionModel:_}));var M=[],S=[];g(p.geometries,function(I){if(I.type==="polygon"){var V=[I.exterior].concat(I.interiors||[]);u&&(V=Bt(V,u)),g(V,function(L){M.push(new Ge(f(L)))})}else{var b=I.points;u&&(b=Bt(b,u,!0)),g(b,function(L){S.push(new nt(f(L)))})}});var x=c(p.getCenter(),l&&l.project);function T(I,V){if(I.length){var b=new Ra({culling:!0,segmentIgnoreThreshold:1,shape:{paths:I}});d.add(b),Ft(r,b,m,_),kt(r,b,v,_,o,m,x),V&&(zt(b),g(b.states,zt))}}T(M),T(S,!0)}),e.each(function(p,v){var d=t.get(v),y=d.dataIdx,m=d.regionModel;Ht(r,p,v,m,o,y),Nt(r,p,v,m,o),Zt(r,p,v,m,o)},this)},n.prototype._buildSVG=function(r){var e=r.geo.map,t=r.transformInfoRaw;this._svgGroup.x=t.x,this._svgGroup.y=t.y,this._svgGroup.scaleX=t.scaleX,this._svgGroup.scaleY=t.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var a=this._svgDispatcherMap=A(),i=!1;g(this._svgGraphicRecord.named,function(o){var s=o.name,l=r.mapOrGeoModel,u=r.data,c=o.svgNodeTagLower,h=o.el,f=u?u.indexOfName(s):null,p=l.getRegionModel(s);if(Zi.get(c)!=null&&h instanceof gt&&Ft(r,h,f,p),h instanceof gt&&(h.culling=!0),h.z2EmphasisLift=0,!o.namedFrom&&(Wi.get(c)!=null&&kt(r,h,s,p,l,f,null),Ht(r,h,s,p,l,f),Nt(r,h,s,p,l),Bi.get(c)!=null)){var v=Zt(r,h,s,p,l);v==="self"&&(i=!0);var d=a.get(s)||a.set(s,[]);d.push(h)}},this),this._enableBlurEntireSVG(i,r)},n.prototype._enableBlurEntireSVG=function(r,e){if(r&&e.isGeo){var t=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),a=t.opacity;this._svgGraphicRecord.root.traverse(function(i){if(!i.isGroup){Cr(i);var o=i.ensureState("blur").style||{};o.opacity==null&&a!=null&&(o.opacity=a),i.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(r,e){if(r==null)return[];var t=e.coordinateSystem;if(t.resourceType==="geoJSON"){var a=this._regionsGroupByName;if(a){var i=a.get(r);return i?[i]:[]}}else if(t.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(r)||[]},n.prototype._svgResourceChanged=function(r){return this._svgMapName!==r},n.prototype._useSVG=function(r){var e=Z.getGeoResource(r);if(e&&e.type==="geoSVG"){var t=e.useGraphic(this.uid);this._svgGroup.add(t.root),this._svgGraphicRecord=t,this._svgMapName=r}},n.prototype._freeSVG=function(){var r=this._svgMapName;if(r!=null){var e=Z.getGeoResource(r);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(r,e,t){var a=r.coordinateSystem,i=this._controller,o=this._controllerHost;o.zoomLimit=r.get("scaleLimit"),o.zoom=a.getZoom(),i.enable(r.get("roam")||!1);var s=r.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=r.id,u}i.off("pan").on("pan",function(u){this._mouseDownFlag=!1,gi(o,u.dx,u.dy),t.dispatchAction(de(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),i.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,yi(o,u.scale,u.originX,u.originY),t.dispatchAction(de(l(),{zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),i.setPointerChecker(function(u,c,h){return a.containPoint([c,h])&&!_i(u,t,r)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(r){var e=r.getTextContent();e&&(e.ignore=Xr(e).ignore)})},n.prototype._updateMapSelectHandler=function(r,e,t,a){var i=this;e.off("mousedown"),e.off("click"),r.get("selectedMode")&&(e.on("mousedown",function(){i._mouseDownFlag=!0}),e.on("click",function(o){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},n}();function Ft(n,r,e,t){var a=t.getModel("itemStyle"),i=t.getModel(["emphasis","itemStyle"]),o=t.getModel(["blur","itemStyle"]),s=t.getModel(["select","itemStyle"]),l=Me(a),u=Me(i),c=Me(s),h=Me(o),f=n.data;if(f){var p=f.getItemVisual(e,"style"),v=f.getItemVisual(e,"decal");n.isVisualEncodedByVisualMap&&p.fill&&(l.fill=p.fill),v&&(l.decal=xa(v,n.api))}r.setStyle(l),r.style.strokeNoScale=!0,r.ensureState("emphasis").style=u,r.ensureState("select").style=c,r.ensureState("blur").style=h,Cr(r)}function kt(n,r,e,t,a,i,o){var s=n.data,l=n.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),i)),c=s&&s.getItemLayout(i);if(l||u||c&&c.showLabel){var h=l?e:i,f=void 0;(!s||i>=0)&&(f=a);var p=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Lr(r,Pr(t),{labelFetcher:f,labelDataIndex:h,defaultText:e},p);var v=r.getTextContent();if(v&&(Xr(v).ignore=v.ignore,r.textConfig&&o)){var d=r.getBoundingRect().clone();r.textConfig.layoutRect=d,r.textConfig.position=[(o[0]-d.x)/d.width*100+"%",(o[1]-d.y)/d.height*100+"%"]}r.disableLabelAnimation=!0}else r.removeTextContent(),r.removeTextConfig(),r.disableLabelAnimation=null}function Ht(n,r,e,t,a,i){n.data?n.data.setItemGraphicEl(i,r):Re(r).eventData={componentType:"geo",componentIndex:a.componentIndex,geoIndex:a.componentIndex,name:e,region:t&&t.option||{}}}function Nt(n,r,e,t,a){n.data||ba({el:r,componentModel:a,itemName:e,itemTooltipOption:t.get("tooltip")})}function Zt(n,r,e,t,a){r.highDownSilentOnTouch=!!a.get("selectedMode");var i=t.getModel("emphasis"),o=i.get("focus");return Ta(r,o,i.get("blurScope"),i.get("disabled")),n.isGeo&&Aa(r,a,e),o}function Bt(n,r,e){var t=[],a;function i(){a=[]}function o(){a.length&&(t.push(a),a=[])}var s=r({polygonStart:i,polygonEnd:o,lineStart:i,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&a.push([l,u])},sphere:function(){}});return!e&&s.polygonStart(),g(n,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!e&&s.polygonEnd(),t}const $r=Yi;var Ui=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,t,a,i){if(!(i&&i.type==="mapToggleSelect"&&i.from===this.uid)){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&i&&i.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===e.id){var s=this._mapDraw;s&&o.add(s.group)}else if(e.needsDrawMap){var s=this._mapDraw||new $r(a);o.add(s.group),s.draw(e,t,a,this,i),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,a)}}},r.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},r.prototype._renderSymbols=function(e,t,a){var i=e.originalData,o=this.group;i.each(i.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=i.getItemLayout(l);if(!(!u||!u.point)){var c=u.point,h=u.offset,f=new Tr({style:{fill:e.getData().getVisual("style").fill},shape:{cx:c[0]+h*9,cy:c[1],r:3},silent:!0,z2:8+(h?0:Da+1)});if(!h){var p=e.mainSeries.getData(),v=i.getName(l),d=p.indexOfName(v),y=i.getItemModel(l),m=y.getModel("label"),_=p.getItemGraphicEl(d);Lr(f,Pr(y),{labelFetcher:{getFormattedLabel:function(M,S){return e.getFormattedLabel(d,S)}},defaultText:v}),f.disableLabelAnimation=!0,m.get("position")||f.setTextConfig({position:"bottom"}),_.onHoverStateChange=function(M){Ia(f,M)}}o.add(f)}}})},r.type="map",r}(Va);const Xi=Ui;var $i=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(t){if(t!=null){var a=this.getData().getName(t),i=this.coordinateSystem,o=i.getRegion(a);return o&&i.dataToPoint(o.getCenter())}},e}return r.prototype.getInitialData=function(e){for(var t=si(this,{coordDimensions:["value"],encodeDefaulter:et(Ca,this)}),a=A(),i=[],o=0,s=t.count();o<s;o++){var l=t.getName(o);a.set(l,!0)}var u=Z.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return g(u.regions,function(c){var h=c.name;a.get(h)||i.push(h)}),t.appendValues([],i),t},r.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},r.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},r.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},r.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},r.prototype.formatTooltip=function(e,t,a){for(var i=this.getData(),o=this.getRawValue(e),s=i.getName(e),l=this.seriesGroup,u=[],c=0;c<l.length;c++){var h=l[c].originalData.indexOfName(s),f=i.mapDimension("value");isNaN(l[c].originalData.get(f,h))||u.push(l[c].name)}return yt("section",{header:u.join(", "),noHeader:!u.length,blocks:[yt("nameValue",{name:s,value:o})]})},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.getLegendIcon=function(e){var t=e.icon||"roundRect",a=ne(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return a.setStyle(e.itemStyle),a.style.stroke="none",t.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a},r.type="series.map",r.dependencies=["geo"],r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},r}(La);const Ji=$i;function Ki(n,r){var e={};return g(n,function(t){t.each(t.mapDimension("value"),function(a,i){var o="ec-"+t.getName(i);e[o]=e[o]||[],isNaN(a)||e[o].push(a)})}),n[0].map(n[0].mapDimension("value"),function(t,a){for(var i="ec-"+n[0].getName(a),o=0,s=1/0,l=-1/0,u=e[i].length,c=0;c<u;c++)s=Math.min(s,e[i][c]),l=Math.max(l,e[i][c]),o+=e[i][c];var h;return r==="min"?h=s:r==="max"?h=l:r==="average"?h=o/u:h=o,u===0?NaN:h})}function ji(n){var r={};n.eachSeriesByType("map",function(e){var t=e.getHostGeoModel(),a=t?"o"+t.id:"i"+e.getMapType();(r[a]=r[a]||[]).push(e)}),g(r,function(e,t){for(var a=Ki(k(e,function(o){return o.getData()}),e[0].get("mapValueCalculation")),i=0;i<e.length;i++)e[i].originalData=e[i].getData();for(var i=0;i<e.length;i++)e[i].seriesGroup=e,e[i].needsDrawMap=i===0&&!e[i].getHostGeoModel(),e[i].setData(a.cloneShallow()),e[i].mainSeries=e[0]})}function qi(n){var r={};n.eachSeriesByType("map",function(e){var t=e.getMapType();if(!(e.getHostGeoModel()||r[t])){var a={};g(e.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&n.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var h=l.getName(c),f=s.getRegion(h);if(!(!f||isNaN(u))){var p=a[h]||0,v=s.dataToPoint(f.getCenter());a[h]=p+1,l.setItemLayout(c,{point:v,offset:p})}})});var i=e.getData();i.each(function(o){var s=i.getName(o),l=i.getItemLayout(o)||{};l.showLabel=!a[s],i.setItemLayout(o,l)}),r[t]=!0}})}var Wt=fe,Qi=function(n){D(r,n);function r(e){var t=n.call(this)||this;return t.type="view",t.dimensions=["x","y"],t._roamTransformable=new Se,t._rawTransformable=new Se,t.name=e,t}return r.prototype.setBoundingRect=function(e,t,a,i){return this._rect=new Y(e,t,a,i),this._rect},r.prototype.getBoundingRect=function(){return this._rect},r.prototype.setViewRect=function(e,t,a,i){this._transformTo(e,t,a,i),this._viewRect=new Y(e,t,a,i)},r.prototype._transformTo=function(e,t,a,i){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new Y(e,t,a,i));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},r.prototype.setCenter=function(e,t){e&&(this._center=[j(e[0],t.getWidth()),j(e[1],t.getHeight())],this._updateCenterAndZoom())},r.prototype.setZoom=function(e){e=e||1;var t=this.zoomLimit;t&&(t.max!=null&&(e=Math.min(t.max,e)),t.min!=null&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},r.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),t=e.x+e.width/2,a=e.y+e.height/2;return[t,a]},r.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},r.prototype.getZoom=function(){return this._zoom||1},r.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},r.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,a=this.getDefaultCenter(),i=this.getCenter(),o=this.getZoom();i=fe([],i,e),a=fe([],a,e),t.originX=i[0],t.originY=i[1],t.x=a[0]-i[0],t.y=a[1]-i[1],t.scaleX=t.scaleY=o,this._updateTransform()},r.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),Pa(this.transform||(this.transform=[]),t.transform||Dr()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],Sr(this.invTransform,this.transform),this.decomposeTransform()},r.prototype.getTransformInfo=function(){var e=this._rawTransformable,t=this._roamTransformable,a=new Se;return a.transform=t.transform,a.decomposeTransform(),{roam:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},r.prototype.getViewRect=function(){return this._viewRect},r.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},r.prototype.dataToPoint=function(e,t,a){var i=t?this._rawTransform:this.transform;return a=a||[],i?Wt(a,e,i):Oa(a,e)},r.prototype.pointToData=function(e){var t=this.invTransform;return t?Wt([],e,t):[e[0],e[1]]},r.prototype.convertToPixel=function(e,t,a){var i=Yt(t);return i===this?i.dataToPoint(a):null},r.prototype.convertFromPixel=function(e,t,a){var i=Yt(t);return i===this?i.pointToData(a):null},r.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},r.dimensions=["x","y"],r}(Se);function Yt(n){var r=n.seriesModel;return r?r.coordinateSystem:null}const Jr=Qi;var en={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Kr=["lng","lat"],jr=function(n){D(r,n);function r(e,t,a){var i=n.call(this,e)||this;i.dimensions=Kr,i.type="geo",i._nameCoordMap=A(),i.map=t;var o=a.projection,s=Z.load(t,a.nameMap,a.nameProperty),l=Z.getGeoResource(t);i.resourceType=l?l.type:null;var u=i.regions=s.regions,c=en[l.type];i._regionsMap=s.regionsMap,i.regions=s.regions,i.projection=o;var h;if(o)for(var f=0;f<u.length;f++){var p=u[f].getBoundingRect(o);h=h||p.clone(),h.union(p)}else h=s.boundingRect;return i.setBoundingRect(h.x,h.y,h.width,h.height),i.aspectScale=o?1:Ga(a.aspectScale,c.aspectScale),i._invertLongitute=o?!1:c.invertLongitute,i}return r.prototype._transformTo=function(e,t,a,i){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new Y(e,t,a,i));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},r.prototype.getRegion=function(e){return this._regionsMap.get(e)},r.prototype.getRegionByCoord=function(e){for(var t=this.regions,a=0;a<t.length;a++){var i=t[a];if(i.type==="geoJSON"&&i.contain(e))return t[a]}},r.prototype.addGeoCoord=function(e,t){this._nameCoordMap.set(e,t)},r.prototype.getGeoCoord=function(e){var t=this._regionsMap.get(e);return this._nameCoordMap.get(e)||t&&t.getCenter()},r.prototype.dataToPoint=function(e,t,a){if(U(e)&&(e=this.getGeoCoord(e)),e){var i=this.projection;return i&&(e=i.project(e)),e&&this.projectedToPoint(e,t,a)}},r.prototype.pointToData=function(e){var t=this.projection;return t&&(e=t.unproject(e)),e&&this.pointToProjected(e)},r.prototype.pointToProjected=function(e){return n.prototype.pointToData.call(this,e)},r.prototype.projectedToPoint=function(e,t,a){return n.prototype.dataToPoint.call(this,e,t,a)},r.prototype.convertToPixel=function(e,t,a){var i=Ut(t);return i===this?i.dataToPoint(a):null},r.prototype.convertFromPixel=function(e,t,a){var i=Ut(t);return i===this?i.pointToData(a):null},r}(Jr);Ea(jr,Jr);function Ut(n){var r=n.geoModel,e=n.seriesModel;return r?r.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",De).models[0]||{}).coordinateSystem:null}const Xt=jr;function $t(n,r){var e=n.get("boundingCoords");if(e!=null){var t=e[0],a=e[1];if(isFinite(t[0])&&isFinite(t[1])&&isFinite(a[0])&&isFinite(a[1])){var i=this.projection;if(i){var o=t[0],s=t[1],l=a[0],u=a[1];t=[1/0,1/0],a=[-1/0,-1/0];var c=function(T,I,V,b){for(var L=V-T,P=b-I,B=0;B<=100;B++){var _e=B/100,ft=i.project([T+L*_e,I+P*_e]);Mr(t,t,ft),wr(a,a,ft)}};c(o,s,l,s),c(l,s,l,u),c(l,u,o,u),c(o,u,l,s)}this.setBoundingRect(t[0],t[1],a[0]-t[0],a[1]-t[1])}}var h=this.getBoundingRect(),f=n.get("layoutCenter"),p=n.get("layoutSize"),v=r.getWidth(),d=r.getHeight(),y=h.width/h.height*this.aspectScale,m=!1,_,M;f&&p&&(_=[j(f[0],v),j(f[1],d)],M=j(p,Math.min(v,d)),!isNaN(_[0])&&!isNaN(_[1])&&!isNaN(M)&&(m=!0));var S;if(m)S={},y>1?(S.width=M,S.height=M/y):(S.height=M,S.width=M*y),S.y=_[1]-S.height/2,S.x=_[0]-S.width/2;else{var x=n.getBoxLayoutParams();x.aspect=y,S=ot(x,{width:v,height:d})}this.setViewRect(S.x,S.y,S.width,S.height),this.setCenter(n.get("center"),r),this.setZoom(n.get("zoom"))}function tn(n,r){g(r.get("geoCoord"),function(e,t){n.addGeoCoord(t,e)})}var rn=function(){function n(){this.dimensions=Kr}return n.prototype.create=function(r,e){var t=[];function a(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}r.eachComponent("geo",function(o,s){var l=o.get("map"),u=new Xt(l+s,l,de({nameMap:o.get("nameMap")},a(o)));u.zoomLimit=o.get("scaleLimit"),t.push(u),o.coordinateSystem=u,u.model=o,u.resize=$t,u.resize(o,e)}),r.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=t[l]}});var i={};return r.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();i[s]=i[s]||[],i[s].push(o)}}),g(i,function(o,s){var l=k(o,function(c){return c.get("nameMap")}),u=new Xt(s,s,de({nameMap:za(l)},a(o[0])));u.zoomLimit=Or.apply(null,k(o,function(c){return c.get("scaleLimit")})),t.push(u),u.resize=$t,u.resize(o[0],e),g(o,function(c){c.coordinateSystem=u,tn(u,c)})}),t},n.prototype.getFilledRegions=function(r,e,t,a){for(var i=(r||[]).slice(),o=A(),s=0;s<i.length;s++)o.set(i[s].name,i[s]);var l=Z.load(e,t,a);return g(l.regions,function(u){var c=u.name;!o.get(c)&&i.push({name:c})}),i},n}(),an=new rn;const qr=an;var nn=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,t,a){var i=Z.getGeoResource(e.map);if(i&&i.type==="geoJSON"){var o=e.itemStyle=e.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(e,a),Fa(e,"label",["show"])},r.prototype.optionUpdated=function(){var e=this,t=this.option;t.regions=qr.getFilledRegions(t.regions,t.map,t.nameMap,t.nameProperty);var a={};this._optionModelMap=ka(t.regions||[],function(i,o){var s=o.name;return s&&(i.set(s,new mt(o,e,e.ecModel)),o.selected&&(a[s]=!0)),i},A()),t.selectedMap||(t.selectedMap=a)},r.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new mt(null,this,this.ecModel)},r.prototype.getFormattedLabel=function(e,t){var a=this.getRegionModel(e),i=t==="normal"?a.get(["label","formatter"]):a.get(["emphasis","label","formatter"]),o={name:e};if(st(i))return o.status=t,i(o);if(U(i))return i.replace("{a}",e??"")},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.select=function(e){var t=this.option,a=t.selectedMode;if(a){a!=="multiple"&&(t.selectedMap=null);var i=t.selectedMap||(t.selectedMap={});i[e]=!0}},r.prototype.unSelect=function(e){var t=this.option.selectedMap;t&&(t[e]=!1)},r.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},r.prototype.isSelected=function(e){var t=this.option.selectedMap;return!!(t&&t[e])},r.type="geo",r.layoutMode="box",r.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},r}(lt);const on=nn;function Jt(n,r){return n.pointToProjected?n.pointToProjected(r):n.pointToData(r)}function sn(n,r,e,t){var a=n.getZoom(),i=n.getCenter(),o=r.zoom,s=n.projectedToPoint?n.projectedToPoint(i):n.dataToPoint(i);if(r.dx!=null&&r.dy!=null&&(s[0]-=r.dx,s[1]-=r.dy,n.setCenter(Jt(n,s),t)),o!=null){if(e){var l=e.min||0,u=e.max||1/0;o=Math.max(Math.min(a*o,u),l)/a}n.scaleX*=o,n.scaleY*=o;var c=(r.originX-n.x)*(o-1),h=(r.originY-n.y)*(o-1);n.x-=c,n.y-=h,n.updateTransform(),n.setCenter(Jt(n,s),t),n.setZoom(o*a)}return{center:n.getCenter(),zoom:n.getZoom()}}var ln=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e.focusBlurEnabled=!0,e}return r.prototype.init=function(e,t){this._api=t},r.prototype.render=function(e,t,a,i){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new $r(a));var o=this._mapDraw;o.draw(e,t,a,this,i),o.group.on("click",this._handleRegionClick,this),o.group.silent=e.get("silent"),this.group.add(o.group),this.updateSelectStatus(e,t,a)},r.prototype._handleRegionClick=function(e){var t;Gr(e.target,function(a){return(t=Re(a).eventData)!=null},!0),t&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:t.name})},r.prototype.updateSelectStatus=function(e,t,a){var i=this;this._mapDraw.group.traverse(function(o){var s=Re(o).eventData;if(s)return i._model.isSelected(s.name)?a.enterSelect(o):a.leaveSelect(o),!0})},r.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},r.type="geo",r}(ut);const un=ln;function cn(n,r,e){Z.registerMap(n,r,e)}function hn(n){n.registerCoordinateSystem("geo",qr),n.registerComponentModel(on),n.registerComponentView(un),n.registerImpl("registerMap",cn),n.registerImpl("getMap",function(e){return Z.getMapForUser(e)});function r(e,t){t.update="geo:updateSelectStatus",n.registerAction(t,function(a,i){var o={},s=[];return i.eachComponent({mainType:"geo",query:a},function(l){l[e](a.name);var u=l.coordinateSystem;g(u.regions,function(h){o[h.name]=l.isSelected(h.name)||!1});var c=[];g(o,function(h,f){o[f]&&c.push(f)}),s.push({geoIndex:l.componentIndex,name:c})}),{selected:o,allSelected:s,name:a.name}})}r("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),r("select",{type:"geoSelect",event:"geoselected"}),r("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,t,a){var i=e.componentType||"series";t.eachComponent({mainType:i,query:e},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=sn(s,e,o.get("scaleLimit"),a);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),i==="series"&&g(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function Vo(n){ge(hn),n.registerChartView(Xi),n.registerSeriesModel(Ji),n.registerLayout(qi),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,ji),Ha("map",n.registerAction)}var ye=g,pn=Q,Le=-1,ht=function(){function n(r){var e=r.mappingMethod,t=r.type,a=this.option=z(r);this.type=t,this.mappingMethod=e,this._normalizeData=dn[e];var i=n.visualHandlers[t];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[e],e==="piecewise"?(Ue(a),fn(a)):e==="category"?a.categories?vn(a):Ue(a,!0):(Ir(e!=="linear"||a.dataExtent),Ue(a))}return n.prototype.mapValueToVisual=function(r){var e=this._normalizeData(r);return this._normalizedToVisual(e,r)},n.prototype.getNormalizer=function(){return w(this._normalizeData,this)},n.listVisualTypes=function(){return it(n.visualHandlers)},n.isValidType=function(r){return n.visualHandlers.hasOwnProperty(r)},n.eachVisual=function(r,e,t){Q(r)?g(r,e,t):e.call(t,r)},n.mapVisual=function(r,e,t){var a,i=H(r)?[]:Q(r)?{}:(a=!0,null);return n.eachVisual(r,function(o,s){var l=e.call(t,o,s);a?i=l:i[s]=l}),i},n.retrieveVisuals=function(r){var e={},t;return r&&ye(n.visualHandlers,function(a,i){r.hasOwnProperty(i)&&(e[i]=r[i],t=!0)}),t?e:null},n.prepareVisualTypes=function(r){if(H(r))r=r.slice();else if(pn(r)){var e=[];ye(r,function(t,a){e.push(a)}),r=e}else return[];return r.sort(function(t,a){return a==="color"&&t!=="color"&&t.indexOf("color")===0?1:-1}),r},n.dependsOn=function(r,e){return e==="color"?!!(r&&r.indexOf(e)===0):r===e},n.findPieceIndex=function(r,e,t){for(var a,i=1/0,o=0,s=e.length;o<s;o++){var l=e[o].value;if(l!=null){if(l===r||U(l)&&l===r+"")return o;t&&f(l,o)}}for(var o=0,s=e.length;o<s;o++){var u=e[o],c=u.interval,h=u.close;if(c){if(c[0]===-1/0){if(xe(h[1],r,c[1]))return o}else if(c[1]===1/0){if(xe(h[0],c[0],r))return o}else if(xe(h[0],c[0],r)&&xe(h[1],r,c[1]))return o;t&&f(c[0],o),t&&f(c[1],o)}}if(t)return r===1/0?e.length-1:r===-1/0?0:a;function f(p,v){var d=Math.abs(p-r);d<i&&(i=d,a=v)}},n.visualHandlers={color:{applyVisual:se("color"),getColorMapper:function(){var r=this.option;return w(r.mappingMethod==="category"?function(e,t){return!t&&(e=this._normalizeData(e)),ce.call(this,e)}:function(e,t,a){var i=!!a;return!t&&(e=this._normalizeData(e)),a=Fe(e,r.parsedVisual,a),i?a:ke(a,"rgba")},this)},_normalizedToVisual:{linear:function(r){return ke(Fe(r,this.option.parsedVisual),"rgba")},category:ce,piecewise:function(r,e){var t=at.call(this,e);return t==null&&(t=ke(Fe(r,this.option.parsedVisual),"rgba")),t},fixed:J}},colorHue:we(function(r,e){return He(r,e)}),colorSaturation:we(function(r,e){return He(r,null,e)}),colorLightness:we(function(r,e){return He(r,null,null,e)}),colorAlpha:we(function(r,e){return Za(r,e)}),decal:{applyVisual:se("decal"),_normalizedToVisual:{linear:null,category:ce,piecewise:null,fixed:null}},opacity:{applyVisual:se("opacity"),_normalizedToVisual:rt([0,1])},liftZ:{applyVisual:se("liftZ"),_normalizedToVisual:{linear:J,category:J,piecewise:J,fixed:J}},symbol:{applyVisual:function(r,e,t){var a=this.mapValueToVisual(r);t("symbol",a)},_normalizedToVisual:{linear:Kt,category:ce,piecewise:function(r,e){var t=at.call(this,e);return t==null&&(t=Kt.call(this,r)),t},fixed:J}},symbolSize:{applyVisual:se("symbolSize"),_normalizedToVisual:rt([0,1])}},n}();function fn(n){var r=n.pieceList;n.hasSpecialVisual=!1,g(r,function(e,t){e.originIndex=t,e.visual!=null&&(n.hasSpecialVisual=!0)})}function vn(n){var r=n.categories,e=n.categoryMap={},t=n.visual;if(ye(r,function(o,s){e[o]=s}),!H(t)){var a=[];Q(t)?ye(t,function(o,s){var l=e[s];a[l??Le]=o}):a[Le]=t,t=Qr(n,a)}for(var i=r.length-1;i>=0;i--)t[i]==null&&(delete e[r[i]],r.pop())}function Ue(n,r){var e=n.visual,t=[];Q(e)?ye(e,function(i){t.push(i)}):e!=null&&t.push(e);var a={color:1,symbol:1};!r&&t.length===1&&!a.hasOwnProperty(n.type)&&(t[1]=t[0]),Qr(n,t)}function we(n){return{applyVisual:function(r,e,t){var a=this.mapValueToVisual(r);t("color",n(e("color"),a))},_normalizedToVisual:rt([0,1])}}function Kt(n){var r=this.option.visual;return r[Math.round(R(n,[0,1],[0,r.length-1],!0))]||{}}function se(n){return function(r,e,t){t(n,this.mapValueToVisual(r))}}function ce(n){var r=this.option.visual;return r[this.option.loop&&n!==Le?n%r.length:n]}function J(){return this.option.visual[0]}function rt(n){return{linear:function(r){return R(r,n,this.option.visual,!0)},category:ce,piecewise:function(r,e){var t=at.call(this,e);return t==null&&(t=R(r,n,this.option.visual,!0)),t},fixed:J}}function at(n){var r=this.option,e=r.pieceList;if(r.hasSpecialVisual){var t=ht.findPieceIndex(n,e),a=e[t];if(a&&a.visual)return a.visual[this.type]}}function Qr(n,r){return n.visual=r,n.type==="color"&&(n.parsedVisual=k(r,function(e){var t=Na(e);return t||[0,0,0,1]})),r}var dn={linear:function(n){return R(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var r=this.option.pieceList,e=ht.findPieceIndex(n,r,!0);if(e!=null)return R(e,[0,r.length-1],[0,1],!0)},category:function(n){var r=this.option.categories?this.option.categoryMap[n]:n;return r??Le},fixed:xr};function xe(n,r,e){return n?r<=e:r<e}const O=ht;function me(n,r,e,t,a,i){n=n||0;var o=e[1]-e[0];if(a!=null&&(a=te(a,[0,o])),i!=null&&(i=Math.max(i,a??0)),t==="all"){var s=Math.abs(r[1]-r[0]);s=te(s,[0,o]),a=i=te(s,[a,i]),t=0}r[0]=te(r[0],e),r[1]=te(r[1],e);var l=Xe(r,t);r[t]+=n;var u=a||0,c=e.slice();l.sign<0?c[0]+=u:c[1]-=u,r[t]=te(r[t],c);var h;return h=Xe(r,t),a!=null&&(h.sign!==l.sign||h.span<a)&&(r[1-t]=r[t]+l.sign*a),h=Xe(r,t),i!=null&&h.span>i&&(r[1-t]=r[t]+h.sign*i),r}function Xe(n,r){var e=n[r]-n[1-r];return{span:Math.abs(e),sign:e>0?-1:e<0?1:r?-1:1}}function te(n,r){return Math.min(r[1]!=null?r[1]:1/0,Math.max(r[0]!=null?r[0]:-1/0,n))}var jt=["x","y","radius","angle","single"],gn=["cartesian2d","polar","singleAxis"];function yn(n){var r=n.get("coordinateSystem");return Er(gn,r)>=0}function W(n){return n+"Axis"}function mn(n,r){var e=A(),t=[],a=A();n.eachComponent({mainType:"dataZoom",query:r},function(c){a.get(c.uid)||s(c)});var i;do i=!1,n.eachComponent("dataZoom",o);while(i);function o(c){!a.get(c.uid)&&l(c)&&(s(c),i=!0)}function s(c){a.set(c.uid,!0),t.push(c),u(c)}function l(c){var h=!1;return c.eachTargetAxis(function(f,p){var v=e.get(f);v&&v[p]&&(h=!0)}),h}function u(c){c.eachTargetAxis(function(h,f){(e.get(h)||e.set(h,[]))[f]=!0})}return t}function ea(n){var r=n.ecModel,e={infoList:[],infoMap:A()};return n.eachTargetAxis(function(t,a){var i=r.getComponent(W(t),a);if(i){var o=i.getCoordSysModel();if(o){var s=o.uid,l=e.infoMap.get(s);l||(l={model:o,axisModels:[]},e.infoList.push(l),e.infoMap.set(s,l)),l.axisModels.push(i)}}}),e}var $e=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},n}(),_n=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return r.prototype.init=function(e,t,a){var i=qt(e);this.settledOption=i,this.mergeDefaultAndTheme(e,a),this._doInit(i)},r.prototype.mergeOption=function(e){var t=qt(e);Ie(this.option,e,!0),Ie(this.settledOption,t,!0),this._doInit(t)},r.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var a=this.settledOption;g([["start","startValue"],["end","endValue"]],function(i,o){this._rangePropMode[o]==="value"&&(t[i[0]]=a[i[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=A(),a=this._fillSpecifiedTargetAxis(t);a?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return g(jt,function(a){var i=this.getReferringComponents(W(a),Ba);if(i.specified){t=!0;var o=new $e;g(i.models,function(s){o.add(s.componentIndex)}),e.set(a,o)}},this),t},r.prototype._fillAutoTargetAxisByOrient=function(e,t){var a=this.ecModel,i=!0;if(i){var o=t==="vertical"?"y":"x",s=a.findComponents({mainType:o+"Axis"});l(s,o)}if(i){var s=a.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===t}});l(s,"single")}function l(u,c){var h=u[0];if(h){var f=new $e;if(f.add(h.componentIndex),e.set(c,f),i=!1,c==="x"||c==="y"){var p=h.getReferringComponents("grid",De).models[0];p&&g(u,function(v){h.componentIndex!==v.componentIndex&&p===v.getReferringComponents("grid",De).models[0]&&f.add(v.componentIndex)})}}}i&&g(jt,function(u){if(i){var c=a.findComponents({mainType:W(u),filter:function(f){return f.get("type",!0)==="category"}});if(c[0]){var h=new $e;h.add(c[0].componentIndex),e.set(u,h),i=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(t){!e&&(e=t)},this),e==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(e){var t=this._rangePropMode,a=this.get("rangeMode");g([["start","startValue"],["end","endValue"]],function(i,o){var s=e[i[0]]!=null,l=e[i[1]]!=null;s&&!l?t[o]="percent":!s&&l?t[o]="value":a?t[o]=a[o]:s&&(t[o]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(t,a){e==null&&(e=this.ecModel.getComponent(W(t),a))},this),e},r.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each(function(a,i){g(a.indexList,function(o){e.call(t,i,o)})})},r.prototype.getAxisProxy=function(e,t){var a=this.getAxisModel(e,t);if(a)return a.__dzAxisProxy},r.prototype.getAxisModel=function(e,t){var a=this._targetAxisInfoMap.get(e);if(a&&a.indexMap[t])return this.ecModel.getComponent(W(e),t)},r.prototype.setRawRange=function(e){var t=this.option,a=this.settledOption;g([["start","startValue"],["end","endValue"]],function(i){(e[i[0]]!=null||e[i[1]]!=null)&&(t[i[0]]=a[i[0]]=e[i[0]],t[i[1]]=a[i[1]]=e[i[1]])},this),this._updateRangeUse(e)},r.prototype.setCalculatedRange=function(e){var t=this.option;g(["start","startValue","end","endValue"],function(a){t[a]=e[a]})},r.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},r.prototype.getValueRange=function(e,t){if(e==null&&t==null){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataValueWindow()}else return this.getAxisProxy(e,t).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,a=this._targetAxisInfoMap.keys(),i=0;i<a.length;i++)for(var o=a[i],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;t||(t=u)}return t},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(lt);function qt(n){var r={};return g(["start","end","startValue","endValue","throttle"],function(e){n.hasOwnProperty(e)&&(r[e]=n[e])}),r}const Pe=_n;var Sn=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,t,a,i){this.dataZoomModel=e,this.ecModel=t,this.api=a},r.type="dataZoom",r}(ut);const ta=Sn;var ae=g,Qt=K,Mn=function(){function n(r,e,t,a){this._dimName=r,this._axisIndex=e,this.ecModel=a,this._dataZoomModel=t}return n.prototype.hostedBy=function(r){return this._dataZoomModel===r},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(e){if(yn(e)){var t=W(this._dimName),a=e.getReferringComponents(t,De).models[0];a&&this._axisIndex===a.componentIndex&&r.push(e)}},this),r},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return z(this._minMaxSpan)},n.prototype.calculateDataWindow=function(r){var e=this._dataExtent,t=this.getAxisModel(),a=t.axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;ae(["start","end"],function(f,p){var v=r[f],d=r[f+"Value"];i[p]==="percent"?(v==null&&(v=o[p]),d=a.parse(R(v,o,e))):(u=!0,d=d==null?e[p]:a.parse(d),v=R(d,e,o)),l[p]=d==null||isNaN(d)?e[p]:d,s[p]=v==null||isNaN(v)?o[p]:v}),Qt(l),Qt(s);var c=this._minMaxSpan;u?h(l,s,e,o,!1):h(s,l,o,e,!0);function h(f,p,v,d,y){var m=y?"Span":"ValueSpan";me(0,f,v,"all",c["min"+m],c["max"+m]);for(var _=0;_<2;_++)p[_]=R(f[_],v,d,!0),y&&(p[_]=a.parse(p[_]))}return{valueWindow:l,percentWindow:s}},n.prototype.reset=function(r){if(r===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=wn(this,this._dimName,e),this._updateMinMaxSpan();var t=this.calculateDataWindow(r.settledOption);this._valueWindow=t.valueWindow,this._percentWindow=t.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(r,e){if(r!==this._dataZoomModel)return;var t=this._dimName,a=this.getTargetSeriesModels(),i=r.get("filterMode"),o=this._valueWindow;if(i==="none")return;ae(a,function(l){var u=l.getData(),c=u.mapDimensionsAll(t);if(c.length){if(i==="weakFilter"){var h=u.getStore(),f=k(c,function(p){return u.getDimensionIndex(p)},u);u.filterSelf(function(p){for(var v,d,y,m=0;m<c.length;m++){var _=h.get(f[m],p),M=!isNaN(_),S=_<o[0],x=_>o[1];if(M&&!S&&!x)return!0;M&&(y=!0),S&&(v=!0),x&&(d=!0)}return y&&v&&d})}else ae(c,function(p){if(i==="empty")l.setData(u=u.map(p,function(d){return s(d)?d:NaN}));else{var v={};v[p]=o,u.selectRange(v)}});ae(c,function(p){u.setApproximateExtent(o,p)})}});function s(l){return l>=o[0]&&l<=o[1]}},n.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},e=this._dataZoomModel,t=this._dataExtent;ae(["min","max"],function(a){var i=e.get(a+"Span"),o=e.get(a+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?i=R(t[0]+o,t,[0,100],!0):i!=null&&(o=R(i,[0,100],t,!0)-t[0]),r[a+"Span"]=i,r[a+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var r=this.getAxisModel(),e=this._percentWindow,t=this._valueWindow;if(e){var a=Wa(t,[0,500]);a=Math.min(a,20);var i=r.axis.scale.rawExtentInfo;e[0]!==0&&i.setDeterminedMinMax("min",+t[0].toFixed(a)),e[1]!==100&&i.setDeterminedMinMax("max",+t[1].toFixed(a)),i.freeze()}},n}();function wn(n,r,e){var t=[1/0,-1/0];ae(e,function(o){Ya(t,o.getData(),r)});var a=n.getAxisModel(),i=Ua(a.axis.scale,a,t).calculate();return[i.min,i.max]}const xn=Mn;var bn={getTargetSeries:function(n){function r(a){n.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(o,s){var l=n.getComponent(W(o),s);a(o,s,l,i)})})}r(function(a,i,o,s){o.__dzAxisProxy=null});var e=[];r(function(a,i,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new xn(a,i,s,n),e.push(o.__dzAxisProxy))});var t=A();return g(e,function(a){g(a.getTargetSeriesModels(),function(i){t.set(i.uid,i)})}),t},overallReset:function(n,r){n.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(t,a){e.getAxisProxy(t,a).reset(e)}),e.eachTargetAxis(function(t,a){e.getAxisProxy(t,a).filterData(e,r)})}),n.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy();if(t){var a=t.getDataPercentWindow(),i=t.getDataValueWindow();e.setCalculatedRange({start:a[0],end:a[1],startValue:i[0],endValue:i[1]})}})}};const Tn=bn;function An(n){n.registerAction("dataZoom",function(r,e){var t=mn(e,r);g(t,function(a){a.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var er=!1;function ra(n){er||(er=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,Tn),An(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}var tr=g;function rr(n){if(n){for(var r in n)if(n.hasOwnProperty(r))return!0}}function ar(n,r,e){var t={};return tr(r,function(i){var o=t[i]=a();tr(n[i],function(s,l){if(O.isValidType(l)){var u={type:l,visual:s};e&&e(u,i),o[l]=new O(u),l==="opacity"&&(u=z(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new O(u))}})}),t;function a(){var i=function(){};i.prototype.__hidden=i.prototype;var o=new i;return o}}function Rn(n,r,e){var t;g(e,function(a){r.hasOwnProperty(a)&&rr(r[a])&&(t=!0)}),t&&g(e,function(a){r.hasOwnProperty(a)&&rr(r[a])?n[a]=z(r[a]):delete n[a]})}function Dn(n,r,e,t){var a={};return g(n,function(i){var o=O.prepareVisualTypes(r[i]);a[i]=o}),{progress:function(o,s){var l;t!=null&&(l=s.getDimensionIndex(t));function u(x){return Xa(s,h,x)}function c(x,T){$a(s,h,x,T)}for(var h,f=s.getStore();(h=o.next())!=null;){var p=s.getRawDataItem(h);if(!(p&&p.visualMap===!1))for(var v=t!=null?f.get(l,h):h,d=e(v),y=r[d],m=a[d],_=0,M=m.length;_<M;_++){var S=m[_];y[S]&&y[S].applyVisual(v,u,c)}}}}}var In=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.inside",r.defaultOption=Ee(Pe.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(Pe);const Vn=In;var pt=Vr();function Cn(n,r,e){pt(n).coordSysRecordMap.each(function(t){var a=t.dataZoomInfoMap.get(r.uid);a&&(a.getRange=e)})}function Ln(n,r){for(var e=pt(n).coordSysRecordMap,t=e.keys(),a=0;a<t.length;a++){var i=t[a],o=e.get(i),s=o.dataZoomInfoMap;if(s){var l=r.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||aa(e,o))}}}function aa(n,r){if(r){n.removeKey(r.model.uid);var e=r.controller;e&&e.dispose()}}function Pn(n,r){var e={model:r,containsPoint:et(Gn,r),dispatchAction:et(On,n),dataZoomInfoMap:null,controller:null},t=e.controller=new Br(n.getZr());return g(["pan","zoom","scrollMove"],function(a){t.on(a,function(i){var o=[];e.dataZoomInfoMap.each(function(s){if(i.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[a],u=l&&l(s.dzReferCoordSysInfo,e.model.mainType,e.controller,i);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&e.dispatchAction(o)})}),e}function On(n,r){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function Gn(n,r,e,t){return n.coordinateSystem.containPoint([e,t])}function En(n){var r,e="type_",t={type_true:2,type_move:1,type_false:0,type_undefined:-1},a=!0;return n.each(function(i){var o=i.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;t[e+s]>t[e+r]&&(r=s),a=a&&o.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!a}}}function zn(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(r,e){var t=pt(e),a=t.coordSysRecordMap||(t.coordSysRecordMap=A());a.each(function(i){i.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){var o=ea(i);g(o.infoList,function(s){var l=s.model.uid,u=a.get(l)||a.set(l,Pn(e,s.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=A());c.set(i.uid,{dzReferCoordSysInfo:s,model:i,getRange:null})})}),a.each(function(i){var o=i.controller,s,l=i.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){aa(a,i);return}var c=En(l);o.enable(c.controlType,c.opt),o.setPointerChecker(i.containsPoint),zr(i,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var Fn=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return r.prototype.render=function(e,t,a){if(n.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),Cn(a,e,{pan:w(Je.pan,this),zoom:w(Je.zoom,this),scrollMove:w(Je.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Ln(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(ta),Je={zoom:function(n,r,e,t){var a=this.range,i=a.slice(),o=n.axisModels[0];if(o){var s=Ke[r](null,[t.originX,t.originY],o,e,n),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(i[1]-i[0])+i[0],u=Math.max(1/t.scale,0);i[0]=(i[0]-l)*u+l,i[1]=(i[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(me(0,i,[0,100],0,c.minSpan,c.maxSpan),this.range=i,a[0]!==i[0]||a[1]!==i[1])return i}},pan:ir(function(n,r,e,t,a,i){var o=Ke[t]([i.oldX,i.oldY],[i.newX,i.newY],r,a,e);return o.signal*(n[1]-n[0])*o.pixel/o.pixelLength}),scrollMove:ir(function(n,r,e,t,a,i){var o=Ke[t]([0,0],[i.scrollDelta,i.scrollDelta],r,a,e);return o.signal*(n[1]-n[0])*i.scrollDelta})};function ir(n){return function(r,e,t,a){var i=this.range,o=i.slice(),s=r.axisModels[0];if(s){var l=n(o,s,r,e,t,a);if(me(l,o,[0,100],"all"),this.range=o,i[0]!==o[0]||i[1]!==o[1])return o}}}var Ke={grid:function(n,r,e,t,a){var i=e.axis,o={},s=a.model.coordinateSystem.getRect();return n=n||[0,0],i.dim==="x"?(o.pixel=r[0]-n[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=i.inverse?1:-1):(o.pixel=r[1]-n[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=i.inverse?-1:1),o},polar:function(n,r,e,t,a){var i=e.axis,o={},s=a.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return n=n?s.pointToCoord(n):[0,0],r=s.pointToCoord(r),e.mainType==="radiusAxis"?(o.pixel=r[0]-n[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=i.inverse?1:-1):(o.pixel=r[1]-n[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=i.inverse?-1:1),o},singleAxis:function(n,r,e,t,a){var i=e.axis,o=a.model.coordinateSystem.getRect(),s={};return n=n||[0,0],i.orient==="horizontal"?(s.pixel=r[0]-n[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=i.inverse?1:-1):(s.pixel=r[1]-n[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=i.inverse?-1:1),s}};const kn=Fn;function Hn(n){ra(n),n.registerComponentModel(Vn),n.registerComponentView(kn),zn(n)}var Nn=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=Ee(Pe.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),r}(Pe);const Zn=Nn;var le=N,nr=7,Bn=1,je=30,Wn=7,ue="horizontal",or="vertical",Yn=5,Un=["line","bar","candlestick","scatter"],Xn={easing:"cubicOut",duration:100,delay:0},$n=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e._displayables={},e}return r.prototype.init=function(e,t){this.api=t,this._onBrush=w(this._onBrush,this),this._onBrushEnd=w(this._onBrushEnd,this)},r.prototype.render=function(e,t,a,i){if(n.prototype.render.apply(this,arguments),zr(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!i||i.type!=="dataZoom"||i.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Ja(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new C;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},r.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,a=e.get("brushSelect"),i=a?Wn:0,o=this._findCoordRect(),s={width:t.getWidth(),height:t.getHeight()},l=this._orient===ue?{right:s.width-o.x-o.width,top:s.height-je-nr-i,width:o.width,height:je}:{right:nr,top:o.y,width:je,height:o.height},u=Ka(e.option);g(["right","top","width","height"],function(h){u[h]==="ph"&&(u[h]=l[h])});var c=ot(u,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===or&&this._size.reverse()},r.prototype._positionGroup=function(){var e=this.group,t=this._location,a=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(a===ue&&!o?{scaleY:l?1:-1,scaleX:1}:a===ue&&o?{scaleY:l?1:-1,scaleX:-1}:a===or&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=e.getBoundingRect([s]);e.x=t.x-u.x,e.y=t.y-u.y,e.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,a=this._displayables.sliderGroup,i=e.get("brushSelect");a.add(new le({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var o=new le({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:w(this._onClickPanel,this)}),s=this.api.getZr();i?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),a.add(o)},r.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var t=this._size,a=this._shadowSize||[],i=e.series,o=i.getRawData(),s=i.getShadowDim&&i.getShadowDim(),l=s&&o.getDimensionInfo(s)?i.getShadowDim():e.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||t[0]!==a[0]||t[1]!==a[1]){var h=o.getDataExtent(l),f=(h[1]-h[0])*.3;h=[h[0]-f,h[1]+f];var p=[0,t[1]],v=[0,t[0]],d=[[t[0],0],[0,0]],y=[],m=v[1]/(o.count()-1),_=0,M=Math.round(o.count()/t[0]),S;o.each([l],function(b,L){if(M>0&&L%M){_+=m;return}var P=b==null||isNaN(b)||b==="",B=P?0:R(b,h,p,!0);P&&!S&&L?(d.push([d[d.length-1][0],0]),y.push([y[y.length-1][0],0])):!P&&S&&(d.push([_,0]),y.push([_,0])),d.push([_,B]),y.push([_,B]),_+=m,S=P}),u=this._shadowPolygonPts=d,c=this._shadowPolylinePts=y}this._shadowData=o,this._shadowDim=l,this._shadowSize=[t[0],t[1]];var x=this.dataZoomModel;function T(b){var L=x.getModel(b?"selectedDataBackground":"dataBackground"),P=new C,B=new Ge({shape:{points:u},segmentIgnoreThreshold:1,style:L.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),_e=new nt({shape:{points:c},segmentIgnoreThreshold:1,style:L.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return P.add(B),P.add(_e),P}for(var I=0;I<3;I++){var V=T(I===1);this._displayables.sliderGroup.add(V),this._displayables.dataShadowSegs.push(V)}},r.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(t!==!1){var a,i=this.ecModel;return e.eachTargetAxis(function(o,s){var l=e.getAxisProxy(o,s).getTargetSeriesModels();g(l,function(u){if(!a&&!(t!==!0&&Er(Un,u.get("type"))<0)){var c=i.getComponent(W(o),s).axis,h=Jn(o),f,p=u.coordinateSystem;h!=null&&p.getOtherAxis&&(f=p.getOtherAxis(c).inverse),h=u.getData().mapDimension(h),a={thisAxis:c,series:u,thisDim:o,otherDim:h,otherAxisInverse:f}}},this)},this),a}},r.prototype._renderHandle=function(){var e=this.group,t=this._displayables,a=t.handles=[null,null],i=t.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,h=l.get("brushSelect"),f=t.filler=new le({silent:h,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(f),o.add(new le({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Bn,fill:"rgba(0,0,0,0)"}})),g([0,1],function(M){var S=l.get("handleIcon");!ja[S]&&S.indexOf("path://")<0&&S.indexOf("image://")<0&&(S="path://"+S);var x=ne(S,-1,0,2,2,null,!0);x.attr({cursor:sr(this._orient),draggable:!0,drift:w(this._onDragMove,this,M),ondragend:w(this._onDragEnd,this),onmouseover:w(this._showDataInfo,this,!0),onmouseout:w(this._showDataInfo,this,!1),z2:5});var T=x.getBoundingRect(),I=l.get("handleSize");this._handleHeight=j(I,this._size[1]),this._handleWidth=T.width/T.height*this._handleHeight,x.setStyle(l.getModel("handleStyle").getItemStyle()),x.style.strokeNoScale=!0,x.rectHover=!0,x.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),qa(x);var V=l.get("handleColor");V!=null&&(x.style.fill=V),o.add(a[M]=x);var b=l.getModel("textStyle");e.add(i[M]=new ie({silent:!0,invisible:!0,style:he(b,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:b.getTextColor(),font:b.getFont()}),z2:10}))},this);var p=f;if(h){var v=j(l.get("moveHandleSize"),s[1]),d=t.moveHandle=new N({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:v}}),y=v*.8,m=t.moveHandleIcon=ne(l.get("moveHandleIcon"),-y/2,-y/2,y,y,"#fff",!0);m.silent=!0,m.y=s[1]+v/2-.5,d.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var _=Math.min(s[1]/2,Math.max(v,10));p=t.moveZone=new N({invisible:!0,shape:{y:s[1]-_,height:v+_}}),p.on("mouseover",function(){u.enterEmphasis(d)}).on("mouseout",function(){u.leaveEmphasis(d)}),o.add(d),o.add(m),o.add(p)}p.attr({draggable:!0,cursor:sr(this._orient),drift:w(this._onDragMove,this,"all"),ondragstart:w(this._showDataInfo,this,!0),ondragend:w(this._onDragEnd,this),onmouseover:w(this._showDataInfo,this,!0),onmouseout:w(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[R(e[0],[0,100],t,!0),R(e[1],[0,100],t,!0)]},r.prototype._updateInterval=function(e,t){var a=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),s=a.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];me(t,i,o,a.get("zoomLock")?"all":e,s.minSpan!=null?R(s.minSpan,l,o,!0):null,s.maxSpan!=null?R(s.maxSpan,l,o,!0):null);var u=this._range,c=this._range=K([R(i[0],o,l,!0),R(i[1],o,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},r.prototype._updateView=function(e){var t=this._displayables,a=this._handleEnds,i=K(a.slice()),o=this._size;g([0,1],function(p){var v=t.handles[p],d=this._handleHeight;v.attr({scaleX:d/2,scaleY:d/2,x:a[p]+(p?-1:1),y:o[1]/2-d/2})},this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]});var s={x:i[0],width:i[1]-i[0]};t.moveHandle&&(t.moveHandle.setShape(s),t.moveZone.setShape(s),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=t.dataShadowSegs,u=[0,i[0],i[1],o[0]],c=0;c<l.length;c++){var h=l[c],f=h.getClipPath();f||(f=new N,h.setClipPath(f)),f.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:o[1]})}this._updateDataInfo(e)},r.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,a=this._displayables,i=a.handleLabels,o=this._orient,s=["",""];if(t.get("showDetail")){var l=t.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,h=e?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(h[0],u),this._formatLabel(h[1],u)]}}var f=K(this._handleEnds.slice());p.call(this,0),p.call(this,1);function p(v){var d=be(a.handles[v].parent,this.group),y=Fr(v===0?"right":"left",d),m=this._handleWidth/2+Yn,_=pe([f[v]+(v===0?-m:m),this._size[1]/2],d);i[v].setStyle({x:_[0],y:_[1],verticalAlign:o===ue?"middle":y,align:o===ue?y:"center",text:s[v]})}},r.prototype._formatLabel=function(e,t){var a=this.dataZoomModel,i=a.get("labelFormatter"),o=a.get("labelPrecision");(o==null||o==="auto")&&(o=t.getPixelPrecision());var s=e==null||isNaN(e)?"":t.type==="category"||t.type==="time"?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(o,20));return st(i)?i(e,s):U(i)?i.replace("{value}",s):s},r.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,a=t.handleLabels;a[0].attr("invisible",!e),a[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},r.prototype._onDragMove=function(e,t,a,i){this._dragging=!0,q(i.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=pe([t,a],o,!0),l=this._updateInterval(e,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(e){var t=this._size,a=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(a[0]<0||a[0]>t[0]||a[1]<0||a[1]>t[1])){var i=this._handleEnds,o=(i[0]+i[1])/2,s=this._updateInterval("all",a[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(e){var t=e.offsetX,a=e.offsetY;this._brushStart=new Qa(t,a),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,!!t){t.attr("ignore",!0);var a=t.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(a.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=K([R(a.x,o,s,!0),R(a.x+a.width,o,s,!0)]),this._handleEnds=[a.x,a.x+a.width],this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(e){this._brushing&&(q(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},r.prototype._updateBrushRect=function(e,t){var a=this._displayables,i=this.dataZoomModel,o=a.brushRect;o||(o=a.brushRect=new le({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),a.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(e,t),c=l.transformCoordToLocal(s.x,s.y),h=this._size;u[0]=Math.max(Math.min(h[0],u[0]),0),o.setShape({x:c[0],y:0,width:u[0]-c[0],height:h[1]})},r.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?Xn:null,start:t[0],end:t[1]})},r.prototype._findCoordRect=function(){var e,t=ea(this.dataZoomModel).infoList;if(!e&&t.length){var a=t[0].model.coordinateSystem;e=a.getRect&&a.getRect()}if(!e){var i=this.api.getWidth(),o=this.api.getHeight();e={x:i*.2,y:o*.2,width:i*.6,height:o*.6}}return e},r.type="dataZoom.slider",r}(ta);function Jn(n){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[n]}function sr(n){return n==="vertical"?"ns-resize":"ew-resize"}const Kn=$n;function jn(n){n.registerComponentModel(Zn),n.registerComponentView(Kn),ra(n)}function Co(n){ge(Hn),ge(jn)}var qn={get:function(n,r,e){var t=z((Qn[n]||{})[r]);return e&&H(t)?t[t.length-1]:t}},Qn={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const ia=qn;var lr=O.mapVisual,eo=O.eachVisual,to=H,ur=g,ro=K,ao=R,io=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return r.prototype.init=function(e,t,a){this.mergeDefaultAndTheme(e,a)},r.prototype.optionUpdated=function(e,t){var a=this.option;!t&&Rn(a,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(e){var t=this.stateList;e=w(e,this),this.controllerVisuals=ar(this.option.controller,t,e),this.targetVisuals=ar(this.option.target,t,e)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,t=[];return e==null||e==="all"?this.ecModel.eachSeries(function(a,i){t.push(i)}):t=ei(e),t},r.prototype.eachTargetSeries=function(e,t){g(this.getTargetSeriesIndices(),function(a){var i=this.ecModel.getSeriesByIndex(a);i&&e.call(t,i)},this)},r.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries(function(a){a===e&&(t=!0)}),t},r.prototype.formatValueText=function(e,t,a){var i=this.option,o=i.precision,s=this.dataBound,l=i.formatter,u;a=a||["<",">"],H(e)&&(e=e.slice(),u=!0);var c=t?e:u?[h(e[0]),h(e[1])]:h(e);if(U(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(st(l))return u?l(e[0],e[1]):l(e);if(u)return e[0]===s[0]?a[0]+" "+c[1]:e[1]===s[1]?a[1]+" "+c[0]:c[0]+" - "+c[1];return c;function h(f){return f===s[0]?"min":f===s[1]?"max":(+f).toFixed(Math.min(o,20))}},r.prototype.resetExtent=function(){var e=this.option,t=ro([e.min,e.max]);this._dataExtent=t},r.prototype.getDataDimensionIndex=function(e){var t=this.option.dimension;if(t!=null)return e.getDimensionIndex(t);for(var a=e.dimensions,i=a.length-1;i>=0;i--){var o=a[i],s=e.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,a={inRange:t.inRange,outOfRange:t.outOfRange},i=t.target||(t.target={}),o=t.controller||(t.controller={});Ie(i,a),Ie(o,a);var s=this.isCategory();l.call(this,i),l.call(this,o),u.call(this,i,"inRange","outOfRange"),c.call(this,o);function l(h){to(t.color)&&!h.inRange&&(h.inRange={color:t.color.slice().reverse()}),h.inRange=h.inRange||{color:e.get("gradientColor")}}function u(h,f,p){var v=h[f],d=h[p];v&&!d&&(d=h[p]={},ur(v,function(y,m){if(O.isValidType(m)){var _=ia.get(m,"inactive",s);_!=null&&(d[m]=_,m==="color"&&!d.hasOwnProperty("opacity")&&!d.hasOwnProperty("colorAlpha")&&(d.opacity=[0,0]))}}))}function c(h){var f=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,p=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,v=this.get("inactiveColor"),d=this.getItemSymbol(),y=d||"roundRect";ur(this.stateList,function(m){var _=this.itemSize,M=h[m];M||(M=h[m]={color:s?v:[v]}),M.symbol==null&&(M.symbol=f&&z(f)||(s?y:[y])),M.symbolSize==null&&(M.symbolSize=p&&z(p)||(s?_[0]:[_[0],_[0]])),M.symbol=lr(M.symbol,function(T){return T==="none"?y:T});var S=M.symbolSize;if(S!=null){var x=-1/0;eo(S,function(T){T>x&&(x=T)}),M.symbolSize=lr(S,function(T){return ao(T,[0,x],[0,_[0]],!0)})}},this)}},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(e){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(e){return null},r.prototype.getVisualMeta=function(e){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},r}(lt);const Oe=io;var cr=[20,140],no=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(e,t){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(a){a.mappingMethod="linear",a.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=cr[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=cr[1])},r.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):H(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},r.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),g(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)},this)},r.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},r.prototype.getSelected=function(){var e=this.getExtent(),t=K((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},r.prototype.getValueState=function(e){var t=this.option.range,a=this.getExtent();return(t[0]<=a[0]||t[0]<=e)&&(t[1]>=a[1]||e<=t[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries(function(a){var i=[],o=a.getData();o.each(this.getDataDimensionIndex(o),function(s,l){e[0]<=s&&s<=e[1]&&i.push(l)},this),t.push({seriesId:a.id,dataIndex:i})},this),t},r.prototype.getVisualMeta=function(e){var t=hr(this,"outOfRange",this.getExtent()),a=hr(this,"inRange",this.option.range.slice()),i=[];function o(p,v){i.push({value:p,color:e(p,v)})}for(var s=0,l=0,u=a.length,c=t.length;l<c&&(!a.length||t[l]<=a[0]);l++)t[l]<a[s]&&o(t[l],"outOfRange");for(var h=1;s<u;s++,h=0)h&&i.length&&o(a[s],"outOfRange"),o(a[s],"inRange");for(var h=1;l<c;l++)(!a.length||a[a.length-1]<t[l])&&(h&&(i.length&&o(i[i.length-1].value,"outOfRange"),h=0),o(t[l],"outOfRange"));var f=i.length;return{stops:i,outerColors:[f?i[0].color:"transparent",f?i[f-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=Ee(Oe.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),r}(Oe);function hr(n,r,e){if(e[0]===e[1])return e.slice();for(var t=200,a=(e[1]-e[0])/t,i=e[0],o=[],s=0;s<=t&&i<e[1];s++)o.push(i),i+=a;return o.push(e[1]),o}const oo=no;var so=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return r.prototype.init=function(e,t){this.ecModel=e,this.api=t},r.prototype.render=function(e,t,a,i){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,t,a,i)},r.prototype.renderBackground=function(e){var t=this.visualMapModel,a=ti(t.get("padding")||0),i=e.getBoundingRect();e.add(new N({z2:-1,silent:!0,shape:{x:i.x-a[3],y:i.y-a[0],width:i.width+a[3]+a[1],height:i.height+a[0]+a[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},r.prototype.getControllerVisual=function(e,t,a){a=a||{};var i=a.forceState,o=this.visualMapModel,s={};if(t==="color"){var l=o.get("contentColor");s.color=l}function u(p){return s[p]}function c(p,v){s[p]=v}var h=o.controllerVisuals[i||o.getValueState(e)],f=O.prepareVisualTypes(h);return g(f,function(p){var v=h[p];a.convertOpacityToAlpha&&p==="opacity"&&(p="colorAlpha",v=h.__alphaForOpacity),O.dependsOn(p,t)&&v&&v.applyVisual(e,u,c)}),s[t]},r.prototype.positionGroup=function(e){var t=this.visualMapModel,a=this.api;ri(e,t.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})},r.prototype.doRender=function(e,t,a,i){},r.type="visualMap",r}(ut);const na=so;var pr=[["left","right","width"],["top","bottom","height"]];function oa(n,r,e){var t=n.option,a=t.align;if(a!=null&&a!=="auto")return a;for(var i={width:r.getWidth(),height:r.getHeight()},o=t.orient==="horizontal"?1:0,s=pr[o],l=[0,null,10],u={},c=0;c<3;c++)u[pr[1-o][c]]=l[c],u[s[c]]=c===2?e[0]:t[s[c]];var h=[["x","width",3],["y","height",0]][o],f=ot(u,i,t.padding);return s[(f.margin[h[2]]||0)+f[h[0]]+f[h[1]]*.5<i[h[1]]*.5?0:1]}function Ae(n,r){return g(n||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(r?r.componentIndex:"")}),n}var F=R,lo=g,fr=Math.min,qe=Math.max,uo=12,co=6,ho=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return r.prototype.doRender=function(e,t,a,i){this._api=a,(!i||i.type!=="selectDataRange"||i.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var a=e.get("text");this._renderEndsText(t,a,0),this._renderEndsText(t,a,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},r.prototype._renderEndsText=function(e,t,a){if(t){var i=t[1-a];i=i!=null?i+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,a===0?-s:l[1]+s],u),h=this._applyTransform(a===0?"bottom":"top",u),f=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new ie({style:he(p,{x:c[0],y:c[1],verticalAlign:f==="horizontal"?"middle":h,align:f==="horizontal"?h:"center",text:i})}))}},r.prototype._renderBar=function(e){var t=this.visualMapModel,a=this._shapes,i=t.itemSize,o=this._orient,s=this._useHandle,l=oa(t,this.api,i),u=a.mainGroup=this._createBarGroup(l),c=new C;u.add(c),c.add(a.outOfRange=vr()),c.add(a.inRange=vr(null,s?gr(this._orient):null,w(this._dragHandle,this,"all",!1),w(this._dragHandle,this,"all",!0))),c.setClipPath(new N({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var h=t.textStyleModel.getTextRect("国"),f=qe(h.width,h.height);s&&(a.handleThumbs=[],a.handleLabels=[],a.handleLabelPoints=[],this._createHandle(t,u,0,i,f,o),this._createHandle(t,u,1,i,f,o)),this._createIndicator(t,u,i,f,o),e.add(u)},r.prototype._createHandle=function(e,t,a,i,o,s){var l=w(this._dragHandle,this,a,!1),u=w(this._dragHandle,this,a,!0),c=_t(e.get("handleSize"),i[0]),h=ne(e.get("handleIcon"),-c/2,-c/2,c,c,null,!0),f=gr(this._orient);h.attr({cursor:f,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){q(m.event)}}),h.x=i[0]/2,h.useStyle(e.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),ai(h,!0),t.add(h);var p=this.visualMapModel.textStyleModel,v=new ie({cursor:f,draggable:!0,drift:l,onmousemove:function(m){q(m.event)},ondragend:u,style:he(p,{x:0,y:0,text:""})});v.ensureState("blur").style={opacity:.1},v.stateTransition={duration:200},this.group.add(v);var d=[c,0],y=this._shapes;y.handleThumbs[a]=h,y.handleLabelPoints[a]=d,y.handleLabels[a]=v},r.prototype._createIndicator=function(e,t,a,i,o){var s=_t(e.get("indicatorSize"),a[0]),l=ne(e.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:a[0]/2});var u=e.getModel("indicatorStyle").getItemStyle();if(l instanceof Ar){var c=l.style;l.useStyle(de({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);t.add(l);var h=this.visualMapModel.textStyleModel,f=new ie({silent:!0,invisible:!0,style:he(h,{x:0,y:0,text:""})});this.group.add(f);var p=[(o==="horizontal"?i/2:co)+a[0]/2,0],v=this._shapes;v.indicator=l,v.indicatorLabel=f,v.indicatorLabelPoint=p,this._firstShowIndicator=!0},r.prototype._dragHandle=function(e,t,a,i){if(this._useHandle){if(this._dragging=!t,!t){var o=this._applyTransform([a,i],this._shapes.mainGroup,!0);this._updateInterval(e,o[1]),this._hideIndicator(),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():dr(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},r.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),a=e.getExtent(),i=[0,e.itemSize[1]];this._handleEnds=[F(t[0],a,i,!0),F(t[1],a,i,!0)]},r.prototype._updateInterval=function(e,t){t=t||0;var a=this.visualMapModel,i=this._handleEnds,o=[0,a.itemSize[1]];me(t,i,o,e,0);var s=a.getExtent();this._dataInterval=[F(i[0],o,s,!0),F(i[1],o,s,!0)]},r.prototype._updateView=function(e){var t=this.visualMapModel,a=t.getExtent(),i=this._shapes,o=[0,t.itemSize[1]],s=e?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,a,s,"inRange"),u=this._createBarVisual(a,a,o,"outOfRange");i.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),i.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},r.prototype._createBarVisual=function(e,t,a,i){var o={forceState:i,convertOpacityToAlpha:!0},s=this._makeColorGradient(e,o),l=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],u=this._createBarPoints(a,l);return{barColor:new Rr(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},r.prototype._makeColorGradient=function(e,t){var a=100,i=[],o=(e[1]-e[0])/a;i.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var s=1;s<a;s++){var l=e[0]+o*s;if(l>e[1])break;i.push({color:this.getControllerVisual(l,"color",t),offset:s/a})}return i.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),i},r.prototype._createBarPoints=function(e,t){var a=this.visualMapModel.itemSize;return[[a[0]-t[0],e[0]],[a[0],e[0]],[a[0],e[1]],[a[0]-t[1],e[1]]]},r.prototype._createBarGroup=function(e){var t=this._orient,a=this.visualMapModel.get("inverse");return new C(t==="horizontal"&&!a?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:t==="horizontal"&&a?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:t==="vertical"&&!a?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},r.prototype._updateHandle=function(e,t){if(this._useHandle){var a=this._shapes,i=this.visualMapModel,o=a.handleThumbs,s=a.handleLabels,l=i.itemSize,u=i.getExtent();lo([0,1],function(c){var h=o[c];h.setStyle("fill",t.handlesColor[c]),h.y=e[c];var f=F(e[c],[0,l[1]],u,!0),p=this.getControllerVisual(f,"symbolSize");h.scaleX=h.scaleY=p/l[0],h.x=l[0]-p/2;var v=pe(a.handleLabelPoints[c],be(h,this.group));s[c].setStyle({x:v[0],y:v[1],text:i.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",a.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(e,t,a,i){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],c=this._shapes,h=c.indicator;if(h){h.attr("invisible",!1);var f={convertOpacityToAlpha:!0},p=this.getControllerVisual(e,"color",f),v=this.getControllerVisual(e,"symbolSize"),d=F(e,s,u,!0),y=l[0]-v/2,m={x:h.x,y:h.y};h.y=d,h.x=y;var _=pe(c.indicatorLabelPoint,be(h,this.group)),M=c.indicatorLabel;M.attr("invisible",!1);var S=this._applyTransform("left",c.mainGroup),x=this._orient,T=x==="horizontal";M.setStyle({text:(a||"")+o.formatValueText(t),verticalAlign:T?S:"middle",align:T?"center":S});var I={x:y,y:d,style:{fill:p}},V={style:{x:_[0],y:_[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var b={duration:100,easing:"cubicInOut",additive:!0};h.x=m.x,h.y=m.y,h.animateTo(I,b),M.animateTo(V,b)}else h.attr(I),M.attr(V);this._firstShowIndicator=!1;var L=this._shapes.handleLabels;if(L)for(var P=0;P<L.length;P++)this._api.enterBlur(L[P])}},r.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var a=e.visualMapModel.itemSize,i=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);i[1]=fr(qe(0,i[1]),a[1]),e._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=a[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(e,t){var a=this.visualMapModel,i=a.itemSize;if(a.option.hoverLink){var o=[0,i[1]],s=a.getExtent();e=fr(qe(o[0],e),o[1]);var l=po(a,s,o),u=[e-l,e+l],c=F(e,o,s,!0),h=[F(u[0],o,s,!0),F(u[1],o,s,!0)];u[0]<o[0]&&(h[0]=-1/0),u[1]>o[1]&&(h[1]=1/0),t&&(h[0]===-1/0?this._showIndicator(c,h[1],"< ",l):h[1]===1/0?this._showIndicator(c,h[0],"> ",l):this._showIndicator(c,c,"≈ ",l));var f=this._hoverLinkDataIndices,p=[];(t||dr(a))&&(p=this._hoverLinkDataIndices=a.findTargetDataIndices(h));var v=ii(f,p);this._dispatchHighDown("downplay",Ae(v[0],a)),this._dispatchHighDown("highlight",Ae(v[1],a))}},r.prototype._hoverLinkFromSeriesMouseOver=function(e){var t;if(Gr(e.target,function(l){var u=Re(l);if(u.dataIndex!=null)return t=u,!0},!0),!!t){var a=this.ecModel.getSeriesByIndex(t.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(a)){var o=a.getData(t.dataType),s=o.getStore().get(i.getDataDimensionIndex(o),t.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},r.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var a=0;a<t.length;a++)this._api.leaveBlur(t[a])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Ae(e,this.visualMapModel)),e.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(e,t,a,i){var o=be(t,i?null:this.group);return H(e)?pe(e,o,a):Fr(e,o,a)},r.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(na);function vr(n,r,e,t){return new Ge({shape:{points:n},draggable:!!e,cursor:r,drift:e,onmousemove:function(a){q(a.event)},ondragend:t})}function po(n,r,e){var t=uo/2,a=n.get("hoverLinkDataSize");return a&&(t=F(a,r,e,!0)/2),t}function dr(n){var r=n.get("hoverLinkOnHandle");return!!(r??n.get("realtime"))}function gr(n){return n==="vertical"?"ns-resize":"ew-resize"}const fo=ho;var vo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},go=function(n,r){r.eachComponent({mainType:"visualMap",query:n},function(e){e.setSelected(n.selected)})},yo=[{createOnAllSeries:!0,reset:function(n,r){var e=[];return r.eachComponent("visualMap",function(t){var a=n.pipelineContext;!t.isTargetSeries(n)||a&&a.large||e.push(Dn(t.stateList,t.targetVisuals,w(t.getValueState,t),t.getDataDimensionIndex(n.getData())))}),e}},{createOnAllSeries:!0,reset:function(n,r){var e=n.getData(),t=[];r.eachComponent("visualMap",function(a){if(a.isTargetSeries(n)){var i=a.getVisualMeta(w(mo,null,n,a))||{stops:[],outerColors:[]},o=a.getDataDimensionIndex(e);o>=0&&(i.dimension=o,t.push(i))}}),n.getData().setVisual("visualMeta",t)}}];function mo(n,r,e,t){for(var a=r.targetVisuals[t],i=O.prepareVisualTypes(a),o={color:ni(n.getData(),"color")},s=0,l=i.length;s<l;s++){var u=i[s],c=a[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(e,h,f)}return o.color;function h(p){return o[p]}function f(p,v){o[p]=v}}var yr=g;function _o(n){var r=n&&n.visualMap;H(r)||(r=r?[r]:[]),yr(r,function(e){if(e){re(e,"splitList")&&!re(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&H(t)&&yr(t,function(a){Q(a)&&(re(a,"start")&&!re(a,"min")&&(a.min=a.start),re(a,"end")&&!re(a,"max")&&(a.max=a.end))})}})}function re(n,r){return n&&n.hasOwnProperty&&n.hasOwnProperty(r)}var mr=!1;function sa(n){mr||(mr=!0,n.registerSubTypeDefaulter("visualMap",function(r){return!r.categories&&(!(r.pieces?r.pieces.length>0:r.splitNumber>0)||r.calculable)?"continuous":"piecewise"}),n.registerAction(vo,go),g(yo,function(r){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,r)}),n.registerPreprocessor(_o))}function So(n){n.registerComponentModel(oo),n.registerComponentView(fo),sa(n)}var Mo=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e._pieceList=[],e}return r.prototype.optionUpdated=function(e,t){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var a=this._mode=this._determineMode();this._pieceList=[],wo[this._mode].call(this,this._pieceList),this._resetSelected(e,t);var i=this.option.categories;this.resetVisual(function(o,s){a==="categories"?(o.mappingMethod="category",o.categories=z(i)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=k(this._pieceList,function(l){return l=z(l),s!=="inRange"&&(l.visual=null),l}))})},r.prototype.completeVisualOption=function(){var e=this.option,t={},a=O.listVisualTypes(),i=this.isCategory();g(e.pieces,function(s){g(a,function(l){s.hasOwnProperty(l)&&(t[l]=1)})}),g(t,function(s,l){var u=!1;g(this.stateList,function(c){u=u||o(e,c,l)||o(e.target,c,l)},this),!u&&g(this.stateList,function(c){(e[c]||(e[c]={}))[l]=ia.get(l,c==="inRange"?"active":"inactive",i)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}n.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(e,t){var a=this.option,i=this._pieceList,o=(t?a:e).selected||{};if(a.selected=o,g(i,function(l,u){var c=this.getSelectedMapKey(l);o.hasOwnProperty(c)||(o[c]=!0)},this),a.selectedMode==="single"){var s=!1;g(i,function(l,u){var c=this.getSelectedMapKey(l);o[c]&&(s?o[c]=!1:s=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(e){this.option.selected=z(e)},r.prototype.getValueState=function(e){var t=O.findPieceIndex(e,this._pieceList);return t!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var t=[],a=this._pieceList;return this.eachTargetSeries(function(i){var o=[],s=i.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=O.findPieceIndex(l,a);c===e&&o.push(u)},this),t.push({seriesId:i.id,dataIndex:o})},this),t},r.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(e.value!=null)t=e.value;else{var a=e.interval||[];t=a[0]===-1/0&&a[1]===1/0?0:(a[0]+a[1])/2}return t},r.prototype.getVisualMeta=function(e){if(this.isCategory())return;var t=[],a=["",""],i=this;function o(c,h){var f=i.getRepresentValue({interval:c});h||(h=i.getValueState(f));var p=e(f,h);c[0]===-1/0?a[0]=p:c[1]===1/0?a[1]=p:t.push({value:c[0],color:p},{value:c[1],color:p})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return g(s,function(c){var h=c.interval;h&&(h[0]>u&&o([u,h[0]],"outOfRange"),o(h.slice()),u=h[1])},this),{stops:t,outerColors:a}},r.type="visualMap.piecewise",r.defaultOption=Ee(Oe.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(Oe),wo={splitNumber:function(n){var r=this.option,e=Math.min(r.precision,20),t=this.getExtent(),a=r.splitNumber;a=Math.max(parseInt(a,10),1),r.splitNumber=a;for(var i=(t[1]-t[0])/a;+i.toFixed(e)!==i&&e<5;)e++;r.precision=e,i=+i.toFixed(e),r.minOpen&&n.push({interval:[-1/0,t[0]],close:[0,0]});for(var o=0,s=t[0];o<a;s+=i,o++){var l=o===a-1?t[1]:s+i;n.push({interval:[s,l],close:[1,1]})}r.maxOpen&&n.push({interval:[t[1],1/0],close:[0,0]}),St(n),g(n,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(n){var r=this.option;g(r.categories,function(e){n.push({text:this.formatValueText(e,!0),value:e})},this),_r(r,n)},pieces:function(n){var r=this.option;g(r.pieces,function(e,t){Q(e)||(e={value:e});var a={text:"",index:t};if(e.label!=null&&(a.text=e.label),e.hasOwnProperty("value")){var i=a.value=e.value;a.interval=[i,i],a.close=[1,1]}else{for(var o=a.interval=[],s=a.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],h=0;h<2;h++){for(var f=[["gte","gt","min"],["lte","lt","max"]][h],p=0;p<3&&o[h]==null;p++)o[h]=e[f[p]],s[h]=l[p],c[h]=p===2;o[h]==null&&(o[h]=u[h])}c[0]&&o[1]===1/0&&(s[0]=0),c[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(a.value=o[0])}a.visual=O.retrieveVisuals(e),n.push(a)},this),_r(r,n),St(n),g(n,function(e){var t=e.close,a=[["<","≤"][t[1]],[">","≥"][t[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,a)},this)}};function _r(n,r){var e=n.inverse;(n.orient==="vertical"?!e:e)&&r.reverse()}const xo=Mo;var bo=function(n){D(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,a=t.get("textGap"),i=t.textStyleModel,o=i.getFont(),s=i.getTextColor(),l=this._getItemAlign(),u=t.itemSize,c=this._getViewData(),h=c.endsText,f=Or(t.get("showLabel",!0),!h);h&&this._renderEndsText(e,h[0],u,f,l),g(c.viewPieceList,function(p){var v=p.piece,d=new C;d.onclick=w(this._onItemClick,this,v),this._enableHoverLink(d,p.indexInModelPieceList);var y=t.getRepresentValue(v);if(this._createItemSymbol(d,y,[0,0,u[0],u[1]]),f){var m=this.visualMapModel.getValueState(y);d.add(new ie({style:{x:l==="right"?-a:u[0]+a,y:u[1]/2,text:v.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:m==="outOfRange"?.5:1}}))}e.add(d)},this),h&&this._renderEndsText(e,h[1],u,f,l),oi(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},r.prototype._enableHoverLink=function(e,t){var a=this;e.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(o){var s=a.visualMapModel;s.option.hoverLink&&a.api.dispatchAction({type:o,batch:Ae(s.findTargetDataIndices(t),s)})}},r.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if(t.orient==="vertical")return oa(e,this.api,e.itemSize);var a=t.align;return(!a||a==="auto")&&(a="left"),a},r.prototype._renderEndsText=function(e,t,a,i,o){if(t){var s=new C,l=this.visualMapModel.textStyleModel;s.add(new ie({style:he(l,{x:i?o==="right"?a[0]:0:a[0]/2,y:a[1]/2,verticalAlign:"middle",align:i?o:"center",text:t})})),e.add(s)}},r.prototype._getViewData=function(){var e=this.visualMapModel,t=k(e.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),a=e.get("text"),i=e.get("orient"),o=e.get("inverse");return(i==="horizontal"?o:!o)?t.reverse():a&&(a=a.slice().reverse()),{viewPieceList:t,endsText:a}},r.prototype._createItemSymbol=function(e,t,a){e.add(ne(this.getControllerVisual(t,"symbol"),a[0],a[1],a[2],a[3],this.getControllerVisual(t,"color")))},r.prototype._onItemClick=function(e){var t=this.visualMapModel,a=t.option,i=a.selectedMode;if(i){var o=z(a.selected),s=t.getSelectedMapKey(e);i==="single"||i===!0?(o[s]=!0,g(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},r.type="visualMap.piecewise",r}(na);const To=bo;function Ao(n){n.registerComponentModel(xo),n.registerComponentView(To),sa(n)}function Lo(n){ge(So),ge(Ao)}export{Lo as a,hn as b,Vo as c,Co as i};
