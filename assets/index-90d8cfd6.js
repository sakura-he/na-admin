import{d as se,X as le,a4 as be,a5 as De,U as h,m as D,O as Re,fr as Oe,Z as oe,aP as we,aY as Ke,o as $,c as G,a1 as P,h as F,fs as Ue,am as Ze,ft as Ye,d_ as Ge,ap as me,aB as He,r as ze,f as We,ab as _e,af as ke,g as T,s as A,w as _,fn as Je,au as ae,t as I,a as ye,e as re,v as H,b as R,aM as Le,q as Qe,F as Xe,fu as et,fv as tt,aO as at,fw as Fe,fx as rt,n as pe,a6 as it,a9 as st,aa as lt}from"./index-30c7a380.js";import{g as Ee,s as Me}from"./get-value-by-path-bf636ec3.js";const ot=se({name:"Form",props:{model:{type:Object,required:!0},layout:{type:String,default:"horizontal"},size:{type:String},labelColProps:{type:Object,default:()=>({span:5,offset:0})},wrapperColProps:{type:Object,default:()=>({span:19,offset:0})},labelColStyle:Object,wrapperColStyle:Object,labelAlign:{type:String,default:"right"},disabled:{type:Boolean,default:void 0},rules:{type:Object},autoLabelWidth:{type:Boolean,default:!1}},emits:{submit:(e,t)=>!0,submitSuccess:(e,t)=>!0,submitFailed:(e,t)=>!0},setup(e,{emit:t}){const r=le("form"),{model:a,layout:i,disabled:l,labelAlign:o,labelColProps:n,wrapperColProps:b,labelColStyle:m,wrapperColStyle:M,size:U,rules:j}=be(e),{mergedSize:L}=De(U),N=h(()=>e.layout==="horizontal"&&e.autoLabelWidth),y=[],c=[],p=D({}),J=h(()=>Math.max(...Object.values(p))),z=u=>{u&&u.field&&y.push(u)},B=u=>{u&&u.field&&y.splice(y.indexOf(u),1)},Q=u=>{y.forEach(d=>{u[d.field]&&d.setField(u[d.field])})},ce=(u,d)=>{d&&p[d]!==u&&(p[d]=u)},X=u=>{u&&delete p[u]},W=u=>{const d=u?[].concat(u):[];y.forEach(f=>{(d.length===0||d.includes(f.field))&&f.resetField()})},de=u=>{const d=u?[].concat(u):[];y.forEach(f=>{(d.length===0||d.includes(f.field))&&f.clearValidate()})},k=u=>{const d=[];return y.forEach(f=>{d.push(f.validate())}),Promise.all(d).then(f=>{const C={};let O=!1;return f.forEach(S=>{S&&(O=!0,C[S.field]=S)}),we(u)&&u(O?C:void 0),O?C:void 0})},ee=(u,d)=>{const f=[];for(const C of y)(Ke(u)&&u.includes(C.field)||u===C.field)&&f.push(C.validate());return Promise.all(f).then(C=>{const O={};let S=!1;return C.forEach(s=>{s&&(S=!0,O[s.field]=s)}),we(d)&&d(S?O:void 0),S?O:void 0})},fe=u=>{const d=[];y.forEach(f=>{d.push(f.validate())}),Promise.all(d).then(f=>{const C={};let O=!1;f.forEach(S=>{S&&(O=!0,C[S.field]=S)}),O?t("submitFailed",{values:a.value,errors:C},u):t("submitSuccess",a.value,u),t("submit",{values:a.value,errors:O?C:void 0},u)})};return Re(Oe,D({layout:i,disabled:l,labelAlign:o,labelColProps:n,wrapperColProps:b,labelColStyle:m,wrapperColStyle:M,model:a,size:L,rules:j,fields:y,touchedFields:c,addField:z,removeField:B,validateField:ee,setLabelWidth:ce,removeLabelWidth:X,maxLabelWidth:J,autoLabelWidth:N})),{cls:h(()=>[r,`${r}-layout-${e.layout}`,`${r}-size-${L.value}`,{[`${r}-auto-label-width`]:e.autoLabelWidth}]),handleSubmit:fe,innerValidate:k,innerValidateField:ee,innerResetFields:W,innerClearValidate:de,innerSetFields:Q}},methods:{validate(e){return this.innerValidate(e)},validateField(e,t){return this.innerValidateField(e,t)},resetFields(e){return this.innerResetFields(e)},clearValidate(e){return this.innerClearValidate(e)},setFields(e){return this.innerSetFields(e)}}});function nt(e,t,r,a,i,l){return $(),G("form",{class:F(e.cls),onSubmit:t[0]||(t[0]=Ue((...o)=>e.handleSubmit&&e.handleSubmit(...o),["prevent"]))},[P(e.$slots,"default")],34)}var ge=oe(ot,[["render",nt]]),K=Object.prototype.toString;function ne(e){return K.call(e)==="[object Array]"}function E(e){return K.call(e)==="[object Object]"}function je(e){return K.call(e)==="[object String]"}function ut(e){return K.call(e)==="[object Number]"&&e===e}function ct(e){return K.call(e)==="[object Boolean]"}function Ce(e){return K.call(e)==="[object Function]"}function dt(e){return E(e)&&Object.keys(e).length===0}function x(e){return e==null||e===""}function xe(e){return ne(e)&&!e.length}var Se=function(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if(Ce(e)&&Ce(t))return e===t||e.toString()===t.toString();if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e){var a=Se(e[r],t[r]);if(!a)return!1}return!0},ft=function(e,t){var r={};return Object.keys(e).forEach(function(a){var i=e[a],l=t&&t[a];r[a]=E(i)?Object.assign(Object.assign({},i),l):l||i}),r},ht=function(e,t){for(var r=t.split("."),a=e,i=0;i<r.length;i++)if(a=a&&a[r[i]],a===void 0)return a;return a},q="#{field} is not a #{type} type",pt={required:"#{field} is required",type:{ip:q,email:q,url:q,string:q,number:q,array:q,object:q,boolean:q},number:{min:"`#{value}` is not greater than `#{min}`",max:"`#{value}` is not less than `#{max}`",equal:"`#{value}` is not equal to `#{equal}`",range:"`#{value}` is not in range `#{min} ~ #{max}`",positive:"`#{value}` is not a positive number",negative:"`#{value}` is not a negative number"},string:{maxLength:"#{field} cannot be longer than #{maxLength} characters",minLength:"#{field} must be at least #{minLength} characters",length:"#{field} must be exactly #{length} characters",match:"`#{value}` does not match pattern #{pattern}",uppercase:"`#{value}` must be all uppercase",lowercase:"`#{value}` must be all lowercased"},array:{length:"#{field} must be exactly #{length} in length",minLength:"#{field} cannot be less than #{minLength} in length",maxLength:"#{field} cannot be greater than #{maxLength} in length",includes:"#{field} is not includes #{includes}",deepEqual:"#{field} is not deep equal with #{deepEqual}",empty:"#{field} is not an empty array"},object:{deepEqual:"#{field} is not deep equal to expected value",hasKeys:"#{field} does not contain required fields",empty:"`#{field} is not an empty object"},boolean:{true:"Expect true but got `#{value}`",false:"Expect false but got `#{value}`"}},w=function(t,r){var a=this;this.getValidateMsg=function(i,l){l===void 0&&(l={});var o=Object.assign(Object.assign({},l),{value:a.obj,field:a.field,type:a.type}),n=ht(a.validateMessages,i);return Ce(n)?n(o):je(n)?n.replace(/\#\{.+?\}/g,function(b){var m=b.slice(2,-1);if(m in o){if(E(o[m])||ne(o[m]))try{return JSON.stringify(o[m])}catch{return o[m]}return String(o[m])}return b}):n},E(r)&&je(t)&&r.trim?this.obj=t.trim():E(r)&&r.ignoreEmptyString&&t===""?this.obj=void 0:this.obj=t,this.message=r.message,this.type=r.type,this.error=null,this.field=r.field||r.type,this.validateMessages=ft(pt,r.validateMessages)},ue={not:{configurable:!0},isRequired:{configurable:!0},end:{configurable:!0}};ue.not.get=function(){return this._not=!this._not,this};ue.isRequired.get=function(){if(x(this.obj)||xe(this.obj)){var e=this.getValidateMsg("required");this.error={value:this.obj,type:this.type,requiredError:!0,message:this.message||(E(e)?e:(this._not?"[NOT MODE]:":"")+e)}}return this};ue.end.get=function(){return this.error};w.prototype.addError=function(t){!this.error&&t&&(this.error={value:this.obj,type:this.type,message:this.message||(E(t)?t:(this._not?"[NOT MODE]:":"")+t)})};w.prototype.validate=function(t,r){var a=this._not?t:!t;return a&&this.addError(r),this};w.prototype.collect=function(t){t&&t(this.error)};Object.defineProperties(w.prototype,ue);var gt=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"string"})),this.validate(i&&i.strict?je(this.obj):!0,this.getValidateMsg("type.string"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={uppercase:{configurable:!0},lowercase:{configurable:!0}};return t.prototype.maxLength=function(i){return this.obj?this.validate(this.obj.length<=i,this.getValidateMsg("string.maxLength",{maxLength:i})):this},t.prototype.minLength=function(i){return this.obj?this.validate(this.obj.length>=i,this.getValidateMsg("string.minLength",{minLength:i})):this},t.prototype.length=function(i){return this.obj?this.validate(this.obj.length===i,this.getValidateMsg("string.length",{length:i})):this},t.prototype.match=function(i){var l=i instanceof RegExp;return l&&(i.lastIndex=0),this.validate(this.obj===void 0||l&&i.test(this.obj),this.getValidateMsg("string.match",{pattern:i}))},r.uppercase.get=function(){return this.obj?this.validate(this.obj.toUpperCase()===this.obj,this.getValidateMsg("string.uppercase")):this},r.lowercase.get=function(){return this.obj?this.validate(this.obj.toLowerCase()===this.obj,this.getValidateMsg("string.lowercase")):this},Object.defineProperties(t.prototype,r),t}(w),vt=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"number"})),this.validate(i&&i.strict?ut(this.obj):!0,this.getValidateMsg("type.number"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={positive:{configurable:!0},negative:{configurable:!0}};return t.prototype.min=function(i){return x(this.obj)?this:this.validate(this.obj>=i,this.getValidateMsg("number.min",{min:i}))},t.prototype.max=function(i){return x(this.obj)?this:this.validate(this.obj<=i,this.getValidateMsg("number.max",{max:i}))},t.prototype.equal=function(i){return x(this.obj)?this:this.validate(this.obj===i,this.getValidateMsg("number.equal",{equal:i}))},t.prototype.range=function(i,l){return x(this.obj)?this:this.validate(this.obj>=i&&this.obj<=l,this.getValidateMsg("number.range",{min:i,max:l}))},r.positive.get=function(){return x(this.obj)?this:this.validate(this.obj>0,this.getValidateMsg("number.positive"))},r.negative.get=function(){return x(this.obj)?this:this.validate(this.obj<0,this.getValidateMsg("number.negative"))},Object.defineProperties(t.prototype,r),t}(w),bt=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"array"})),this.validate(i&&i.strict?ne(this.obj):!0,this.getValidateMsg("type.array",{value:this.obj,type:this.type}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={empty:{configurable:!0}};return t.prototype.length=function(i){return this.obj?this.validate(this.obj.length===i,this.getValidateMsg("array.length",{value:this.obj,length:i})):this},t.prototype.minLength=function(i){return this.obj?this.validate(this.obj.length>=i,this.getValidateMsg("array.minLength",{value:this.obj,minLength:i})):this},t.prototype.maxLength=function(i){return this.obj?this.validate(this.obj.length<=i,this.getValidateMsg("array.maxLength",{value:this.obj,maxLength:i})):this},t.prototype.includes=function(i){var l=this;return this.obj?this.validate(i.every(function(o){return l.obj.indexOf(o)!==-1}),this.getValidateMsg("array.includes",{value:this.obj,includes:i})):this},t.prototype.deepEqual=function(i){return this.obj?this.validate(Se(this.obj,i),this.getValidateMsg("array.deepEqual",{value:this.obj,deepEqual:i})):this},r.empty.get=function(){return this.validate(xe(this.obj),this.getValidateMsg("array.empty",{value:this.obj}))},Object.defineProperties(t.prototype,r),t}(w),mt=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"object"})),this.validate(i&&i.strict?E(this.obj):!0,this.getValidateMsg("type.object"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={empty:{configurable:!0}};return t.prototype.deepEqual=function(i){return this.obj?this.validate(Se(this.obj,i),this.getValidateMsg("object.deepEqual",{deepEqual:i})):this},t.prototype.hasKeys=function(i){var l=this;return this.obj?this.validate(i.every(function(o){return l.obj[o]}),this.getValidateMsg("object.hasKeys",{keys:i})):this},r.empty.get=function(){return this.validate(dt(this.obj),this.getValidateMsg("object.empty"))},Object.defineProperties(t.prototype,r),t}(w),yt=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"boolean"})),this.validate(i&&i.strict?ct(this.obj):!0,this.getValidateMsg("type.boolean"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={true:{configurable:!0},false:{configurable:!0}};return r.true.get=function(){return this.validate(this.obj===!0,this.getValidateMsg("boolean.true"))},r.false.get=function(){return this.validate(this.obj===!1,this.getValidateMsg("boolean.false"))},Object.defineProperties(t.prototype,r),t}(w),jt=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ct=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),Ot=/^(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})(\.(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})){3}$/,St=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"type"}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={email:{configurable:!0},url:{configurable:!0},ip:{configurable:!0}};return r.email.get=function(){return this.type="email",this.validate(this.obj===void 0||jt.test(this.obj),this.getValidateMsg("type.email"))},r.url.get=function(){return this.type="url",this.validate(this.obj===void 0||Ct.test(this.obj),this.getValidateMsg("type.url"))},r.ip.get=function(){return this.type="ip",this.validate(this.obj===void 0||Ot.test(this.obj),this.getValidateMsg("type.ip"))},Object.defineProperties(t.prototype,r),t}(w),Vt=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"custom"}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={validate:{configurable:!0}};return r.validate.get=function(){var a=this;return function(i,l){var o;if(i)return o=i(a.obj,a.addError.bind(a)),o&&o.then?(l&&o.then(function(){l&&l(a.error)},function(n){console.error(n)}),[o,a]):(l&&l(a.error),a.error)}},Object.defineProperties(t.prototype,r),t}(w),$t=function(t,r){this.string=new gt(t,r),this.number=new vt(t,r),this.array=new bt(t,r),this.object=new mt(t,r),this.boolean=new yt(t,r),this.type=new St(t,r),this.custom=new Vt(t,r)},Te=function(t,r){r===void 0&&(r={}),this.schema=t,this.options=r};Te.prototype.validate=function(t,r){var a=this;if(!E(t))return;var i=[],l=null;function o(n,b){l||(l={}),(!l[n]||b.requiredError)&&(l[n]=b)}this.schema&&Object.keys(this.schema).forEach(function(n){if(ne(a.schema[n]))for(var b=function(U){var j=a.schema[n][U],L=j.type,N=j.message;if(!L&&!j.validator)throw"You must specify a type to field "+n+"!";var y=new $t(t[n],Object.assign(Object.assign({},a.options),{message:N,field:n})),c=y.type[L]||null;if(!c)if(j.validator){c=y.custom.validate(j.validator),Object.prototype.toString.call(c)==="[object Array]"&&c[0].then?i.push({function:c[0],_this:c[1],key:n}):c&&o(n,c);return}else c=y[L];if(Object.keys(j).forEach(function(p){j.required&&(c=c.isRequired),p!=="message"&&c[p]&&j[p]&&typeof c[p]=="object"&&(c=c[p]),c[p]&&j[p]!==void 0&&typeof c[p]=="function"&&(c=c[p](j[p]))}),c.collect(function(p){p&&o(n,p)}),l)return"break"},m=0;m<a.schema[n].length;m++){var M=b(m);if(M==="break")break}}),i.length>0?Promise.all(i.map(function(n){return n.function})).then(function(){i.forEach(function(n){n._this.error&&o(n.key,n._this.error)}),r&&r(l)}):r&&r(l)};const wt=se({name:"FormItemLabel",components:{ResizeObserver:Ze,Tooltip:Ye,IconQuestionCircle:Ge},props:{required:{type:Boolean,default:!1},showColon:{type:Boolean,default:!1},component:{type:String,default:"label"},asteriskPosition:{type:String,default:"start"},tooltip:{type:String},attrs:Object},setup(){const e=le("form-item-label"),t=me(Oe,void 0),r=He(),a=ze(),i=()=>{a.value&&_e(a.value.offsetWidth)&&(t==null||t.setLabelWidth(a.value.offsetWidth,r==null?void 0:r.uid))};return We(()=>{a.value&&_e(a.value.offsetWidth)&&(t==null||t.setLabelWidth(a.value.offsetWidth,r==null?void 0:r.uid))}),ke(()=>{t==null||t.removeLabelWidth(r==null?void 0:r.uid)}),{prefixCls:e,labelRef:a,handleResize:i}}}),_t=R("svg",{fill:"currentColor",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[R("path",{d:"M583.338667 17.066667c18.773333 0 34.133333 15.36 34.133333 34.133333v349.013333l313.344-101.888a34.133333 34.133333 0 0 1 43.008 22.016l42.154667 129.706667a34.133333 34.133333 0 0 1-21.845334 43.178667l-315.733333 102.4 208.896 287.744a34.133333 34.133333 0 0 1-7.509333 47.786666l-110.421334 80.213334a34.133333 34.133333 0 0 1-47.786666-7.509334L505.685333 706.218667 288.426667 1005.226667a34.133333 34.133333 0 0 1-47.786667 7.509333l-110.421333-80.213333a34.133333 34.133333 0 0 1-7.509334-47.786667l214.186667-295.253333L29.013333 489.813333a34.133333 34.133333 0 0 1-22.016-43.008l42.154667-129.877333a34.133333 34.133333 0 0 1 43.008-22.016l320.512 104.106667L412.672 51.2c0-18.773333 15.36-34.133333 34.133333-34.133333h136.533334z"})],-1),Lt=[_t],Ft=R("svg",{fill:"currentColor",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[R("path",{d:"M583.338667 17.066667c18.773333 0 34.133333 15.36 34.133333 34.133333v349.013333l313.344-101.888a34.133333 34.133333 0 0 1 43.008 22.016l42.154667 129.706667a34.133333 34.133333 0 0 1-21.845334 43.178667l-315.733333 102.4 208.896 287.744a34.133333 34.133333 0 0 1-7.509333 47.786666l-110.421334 80.213334a34.133333 34.133333 0 0 1-47.786666-7.509334L505.685333 706.218667 288.426667 1005.226667a34.133333 34.133333 0 0 1-47.786667 7.509333l-110.421333-80.213333a34.133333 34.133333 0 0 1-7.509334-47.786667l214.186667-295.253333L29.013333 489.813333a34.133333 34.133333 0 0 1-22.016-43.008l42.154667-129.877333a34.133333 34.133333 0 0 1 43.008-22.016l320.512 104.106667L412.672 51.2c0-18.773333 15.36-34.133333 34.133333-34.133333h136.533334z"})],-1),Et=[Ft];function Mt(e,t,r,a,i,l){const o=T("icon-question-circle"),n=T("Tooltip"),b=T("ResizeObserver");return $(),A(b,{onResize:e.handleResize},{default:_(()=>[($(),A(Je(e.component),ae({ref:"labelRef",class:e.prefixCls},e.attrs),{default:_(()=>[e.required&&e.asteriskPosition==="start"?($(),G("strong",{key:0,class:F(`${e.prefixCls}-required-symbol`)},Lt,2)):I("v-if",!0),P(e.$slots,"default"),e.tooltip?($(),A(n,{key:1,content:e.tooltip},{default:_(()=>[ye(o,{class:F(`${e.prefixCls}-tooltip`)},null,8,["class"])]),_:1},8,["content"])):I("v-if",!0),e.required&&e.asteriskPosition==="end"?($(),G("strong",{key:2,class:F(`${e.prefixCls}-required-symbol`)},Et,2)):I("v-if",!0),re(" "+H(e.showColon?":":""),1)]),_:3},16,["class"]))]),_:3},8,["onResize"])}var qt=oe(wt,[["render",Mt]]);const Pt=se({name:"FormItemMessage",props:{error:Array,help:String},setup(){return{prefixCls:le("form-item-message")}}});function At(e,t,r,a,i,l){return e.help||e.$slots.help?($(),A(Le,{key:0,name:"form-blink",appear:""},{default:_(()=>[R("div",{class:F([e.prefixCls,`${e.prefixCls}-help`])},[P(e.$slots,"help",{},()=>[re(H(e.help),1)])],2)]),_:3})):($(!0),G(Xe,{key:1},Qe(e.error,o=>($(),A(Le,{key:o,name:"form-blink",appear:""},{default:_(()=>[R("div",{role:"alert",class:F([e.prefixCls])},H(o),3)]),_:2},1024))),128))}var Rt=oe(Pt,[["render",At]]);const qe=["success","warning","error","validating"],zt=e=>{let t="";for(const r of Object.keys(e)){const a=e[r];a&&(!t||qe.indexOf(a)>qe.indexOf(t))&&(t=e[r])}return t},Wt=e=>{const t=[];for(const r of Object.keys(e)){const a=e[r];a&&t.push(a)}return t};var kt=Object.defineProperty,ie=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,Pe=(e,t,r)=>t in e?kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ae=(e,t)=>{for(var r in t||(t={}))Ie.call(t,r)&&Pe(e,r,t[r]);if(ie)for(var r of ie(t))Ne.call(t,r)&&Pe(e,r,t[r]);return e},xt=(e,t)=>{var r={};for(var a in e)Ie.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&ie)for(var a of ie(e))t.indexOf(a)<0&&Ne.call(e,a)&&(r[a]=e[a]);return r};const Tt=se({name:"FormItem",components:{ArcoRow:et,ArcoCol:tt,FormItemLabel:qt,FormItemMessage:Rt},props:{field:{type:String,default:""},label:String,tooltip:{type:String},showColon:{type:Boolean,default:!1},noStyle:{type:Boolean,default:!1},disabled:{type:Boolean,default:void 0},help:String,extra:String,required:{type:Boolean,default:!1},asteriskPosition:{type:String,default:"start"},rules:{type:[Object,Array]},validateStatus:{type:String},validateTrigger:{type:[String,Array],default:"change"},labelColProps:Object,wrapperColProps:Object,hideLabel:{type:Boolean,default:!1},hideAsterisk:{type:Boolean,default:!1},labelColStyle:Object,wrapperColStyle:Object,rowProps:Object,rowClass:[String,Array,Object],contentClass:[String,Array,Object],contentFlex:{type:Boolean,default:!0},mergeProps:{type:[Boolean,Function],default:!0},labelColFlex:{type:[Number,String]},feedback:{type:Boolean,default:!1},labelComponent:{type:String,default:"label"},labelAttrs:Object},setup(e){const t=le("form-item"),{field:r}=be(e),a=me(Oe,{}),{autoLabelWidth:i,layout:l}=be(a),{i18nMessage:o}=at(),n=h(()=>{var s;const g=Ae({},(s=e.labelColProps)!=null?s:a.labelColProps);return e.labelColFlex?g.flex=e.labelColFlex:a.autoLabelWidth&&(g.flex=`${a.maxLabelWidth}px`),g}),b=h(()=>{var s;const g=Ae({},(s=e.wrapperColProps)!=null?s:a.wrapperColProps);return(e.labelColFlex||a.autoLabelWidth)&&(g.flex="auto"),g}),m=h(()=>{var s;return(s=e.labelColStyle)!=null?s:a.labelColStyle}),M=h(()=>{var s;return(s=e.wrapperColStyle)!=null?s:a.wrapperColStyle}),U=Ee(a.model,e.field),j=D({}),L=D({}),N=h(()=>zt(j)),y=h(()=>Wt(L)),c=ze(!1),p=h(()=>Ee(a.model,e.field)),J=h(()=>{var s;return!!((s=e.disabled)!=null?s:a!=null&&a.disabled)}),z=h(()=>{var s;return(s=e.validateStatus)!=null?s:N.value}),B=h(()=>z.value==="error"),Q=h(()=>{var s,g,v;const Z=[].concat((v=(g=e.rules)!=null?g:(s=a==null?void 0:a.rules)==null?void 0:s[e.field])!=null?v:[]),he=Z.some(Y=>Y.required);return e.required&&!he?[{required:!0}].concat(Z):Z}),ce=h(()=>Q.value.some(s=>s.required)),X=e.noStyle?me(Fe,void 0):void 0,W=(s,{status:g,message:v})=>{j[s]=g,L[s]=v,e.noStyle&&(X==null||X.updateValidateState(s,{status:g,message:v}))},de=h(()=>e.feedback&&z.value?z.value:void 0),k=()=>{var s;if(c.value)return Promise.resolve();const g=Q.value;if(!r.value||g.length===0)return N.value&&te(),Promise.resolve();const v=r.value,Z=p.value;W(v,{status:"",message:""});const he=new Te({[v]:g.map(Y=>{var V=xt(Y,[]);return!V.type&&!V.validator&&(V.type="string"),V})},{ignoreEmptyString:!0,validateMessages:(s=o.value.form)==null?void 0:s.validateMessages});return new Promise(Y=>{he.validate({[v]:Z},V=>{var Ve;const $e=!!(V!=null&&V[v]);W(v,{status:$e?"error":"",message:(Ve=V==null?void 0:V[v].message)!=null?Ve:""});const Be=$e?{label:e.label,field:r.value,value:V[v].value,type:V[v].type,isRequiredError:!!V[v].requiredError,message:V[v].message}:void 0;Y(Be)})})},ee=h(()=>[].concat(e.validateTrigger)),fe=h(()=>ee.value.reduce((s,g)=>{switch(g){case"change":return s.onChange=()=>{k()},s;case"input":return s.onInput=()=>{pe(()=>{k()})},s;case"focus":return s.onFocus=()=>{k()},s;case"blur":return s.onBlur=()=>{k()},s;default:return s}},{}));Re(Fe,D({eventHandlers:fe,size:a&&rt(a,"size"),disabled:J,error:B,feedback:de,updateValidateState:W}));const te=()=>{r.value&&W(r.value,{status:"",message:""})},f=D({field:r,disabled:J,error:B,validate:k,clearValidate:te,resetField:()=>{te(),c.value=!0,a!=null&&a.model&&r.value&&Me(a.model,r.value,U),pe(()=>{c.value=!1})},setField:s=>{var g,v;r.value&&(c.value=!0,"value"in s&&(a!=null&&a.model)&&r.value&&Me(a.model,r.value,s.value),(s.status||s.message)&&W(r.value,{status:(g=s.status)!=null?g:"",message:(v=s.message)!=null?v:""}),pe(()=>{c.value=!1}))}});We(()=>{var s;f.field&&((s=a.addField)==null||s.call(a,f))}),ke(()=>{var s;f.field&&((s=a.removeField)==null||s.call(a,f))});const C=h(()=>[t,`${t}-layout-${a.layout}`,{[`${t}-error`]:B.value,[`${t}-status-${z.value}`]:!!z.value},e.rowClass]),O=h(()=>[`${t}-label-col`,{[`${t}-label-col-left`]:a.labelAlign==="left",[`${t}-label-col-flex`]:a.autoLabelWidth||e.labelColFlex}]),S=h(()=>[`${t}-wrapper-col`,{[`${t}-wrapper-col-flex`]:!b.value}]);return{prefixCls:t,cls:C,isRequired:ce,isError:B,finalMessage:y,mergedLabelCol:n,mergedWrapperCol:b,labelColCls:O,autoLabelWidth:i,layout:l,mergedLabelStyle:m,wrapperColCls:S,mergedWrapperStyle:M}}});function It(e,t,r,a,i,l){var o;const n=T("FormItemLabel"),b=T("ArcoCol"),m=T("FormItemMessage"),M=T("ArcoRow");return e.noStyle?P(e.$slots,"default",{key:0}):($(),A(M,ae({key:1,class:[e.cls,{[`${e.prefixCls}-has-help`]:!!((o=e.$slots.help)!=null?o:e.help)}],wrap:!(e.labelColFlex||e.autoLabelWidth),div:e.layout!=="horizontal"||e.hideLabel},e.rowProps),{default:_(()=>[e.hideLabel?I("v-if",!0):($(),A(b,ae({key:0,class:e.labelColCls,style:e.mergedLabelStyle},e.mergedLabelCol),{default:_(()=>[ye(n,{required:e.hideAsterisk?!1:e.isRequired,"show-colon":e.showColon,"asterisk-position":e.asteriskPosition,component:e.labelComponent,attrs:e.labelAttrs,tooltip:e.tooltip},{default:_(()=>[e.$slots.label||e.label?P(e.$slots,"label",{key:0},()=>[re(H(e.label),1)]):I("v-if",!0)]),_:3},8,["required","show-colon","asterisk-position","component","attrs","tooltip"])]),_:3},16,["class","style"])),ye(b,ae({class:e.wrapperColCls,style:e.mergedWrapperStyle},e.mergedWrapperCol),{default:_(()=>[R("div",{class:F(`${e.prefixCls}-content-wrapper`)},[R("div",{class:F([`${e.prefixCls}-content`,{[`${e.prefixCls}-content-flex`]:e.contentFlex},e.contentClass])},[P(e.$slots,"default")],2)],2),e.isError||e.$slots.help||e.help?($(),A(m,{key:0,error:e.finalMessage,help:e.help},it({_:2},[e.$slots.help?{name:"help",fn:_(()=>[P(e.$slots,"help")])}:void 0]),1032,["error","help"])):I("v-if",!0),e.$slots.extra||e.extra?($(),G("div",{key:1,class:F(`${e.prefixCls}-extra`)},[P(e.$slots,"extra",{},()=>[re(H(e.extra),1)])],2)):I("v-if",!0)]),_:3},16,["class","style"])]),_:3},16,["class","wrap","div"]))}var ve=oe(Tt,[["render",It]]);const Dt=Object.assign(ge,{Item:ve,install:(e,t)=>{st(e,t);const r=lt(t);e.component(r+ge.name,ge),e.component(r+ve.name,ve)}});export{ve as F,Dt as a};
