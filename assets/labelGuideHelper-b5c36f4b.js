import{bj as J,b1 as x,d4 as D,am as O,F as K,s as V,cA as _,g as W,bm as X,d5 as B,cR as z,d6 as $,d7 as E,d8 as G}from"./install-32865521.js";var R=Math.PI*2,I=J.CMD,N=["top","right","bottom","left"];function rr(e,s,o,r,v){var f=o.width,n=o.height;switch(e){case"top":r.set(o.x+f/2,o.y-s),v.set(0,-1);break;case"bottom":r.set(o.x+f/2,o.y+n+s),v.set(0,1);break;case"left":r.set(o.x-s,o.y+n/2),v.set(-1,0);break;case"right":r.set(o.x+f+s,o.y+n/2),v.set(1,0);break}}function ar(e,s,o,r,v,f,n,i,h){n-=e,i-=s;var u=Math.sqrt(n*n+i*i);n/=u,i/=u;var a=n*o+e,y=i*o+s;if(Math.abs(r-v)%R<1e-4)return h[0]=a,h[1]=y,u-o;if(f){var M=r;r=G(v),v=G(M)}else r=G(r),v=G(v);r>v&&(v+=R);var t=Math.atan2(i,n);if(t<0&&(t+=R),t>=r&&t<=v||t+R>=r&&t+R<=v)return h[0]=a,h[1]=y,u-o;var m=o*Math.cos(r)+e,b=o*Math.sin(r)+s,p=o*Math.cos(v)+e,S=o*Math.sin(v)+s,k=(m-n)*(m-n)+(b-i)*(b-i),w=(p-n)*(p-n)+(S-i)*(S-i);return k<w?(h[0]=m,h[1]=b,Math.sqrt(k)):(h[0]=p,h[1]=S,Math.sqrt(w))}function g(e,s,o,r,v,f,n,i){var h=v-e,u=f-s,a=o-e,y=r-s,M=Math.sqrt(a*a+y*y);a/=M,y/=M;var t=h*a+u*y,m=t/M;i&&(m=Math.min(Math.max(m,0),1)),m*=M;var b=n[0]=e+m*a,p=n[1]=s+m*y;return Math.sqrt((b-v)*(b-v)+(p-f)*(p-f))}function Q(e,s,o,r,v,f,n){o<0&&(e=e+o,o=-o),r<0&&(s=s+r,r=-r);var i=e+o,h=s+r,u=n[0]=Math.min(Math.max(v,e),i),a=n[1]=Math.min(Math.max(f,s),h);return Math.sqrt((u-v)*(u-v)+(a-f)*(a-f))}var C=[];function er(e,s,o){var r=Q(s.x,s.y,s.width,s.height,e.x,e.y,C);return o.set(C[0],C[1]),r}function vr(e,s,o){for(var r=0,v=0,f=0,n=0,i,h,u=1/0,a=s.data,y=e.x,M=e.y,t=0;t<a.length;){var m=a[t++];t===1&&(r=a[t],v=a[t+1],f=r,n=v);var b=u;switch(m){case I.M:f=a[t++],n=a[t++],r=f,v=n;break;case I.L:b=g(r,v,a[t],a[t+1],y,M,C,!0),r=a[t++],v=a[t++];break;case I.C:b=E(r,v,a[t++],a[t++],a[t++],a[t++],a[t],a[t+1],y,M,C),r=a[t++],v=a[t++];break;case I.Q:b=$(r,v,a[t++],a[t++],a[t],a[t+1],y,M,C),r=a[t++],v=a[t++];break;case I.A:var p=a[t++],S=a[t++],k=a[t++],w=a[t++],j=a[t++],A=a[t++];t+=1;var U=!!(1-a[t++]);i=Math.cos(j)*k+p,h=Math.sin(j)*w+S,t<=1&&(f=i,n=h);var Y=(y-p)*w/k+p;b=ar(p,S,w,j,j+A,U,Y,M,C),r=Math.cos(j+A)*k+p,v=Math.sin(j+A)*w+S;break;case I.R:f=r=a[t++],n=v=a[t++];var Z=a[t++],H=a[t++];b=Q(f,n,Z,H,y,M,C);break;case I.Z:b=g(r,v,f,n,y,M,C,!0),r=f,v=n;break}b<u&&(u=b,o.set(C[0],C[1]))}return u}var T=new x,c=new x,l=new x,P=new x,L=new x;function nr(e,s){if(e){var o=e.getTextGuideLine(),r=e.getTextContent();if(r&&o){var v=e.textGuideLineConfig||{},f=[[0,0],[0,0],[0,0]],n=v.candidates||N,i=r.getBoundingRect().clone();i.applyTransform(r.getComputedTransform());var h=1/0,u=v.anchor,a=e.getComputedTransform(),y=a&&W([],a),M=s.get("length2")||0;u&&l.copy(u);for(var t=0;t<n.length;t++){var m=n[t];rr(m,0,i,T,P),x.scaleAndAdd(c,T,P,M),c.transform(y);var b=e.getBoundingRect(),p=u?u.distance(c):e instanceof X?vr(c,e.path,l):er(c,b,l);p<h&&(h=p,c.transform(a),l.transform(a),l.toArray(f[0]),c.toArray(f[1]),T.toArray(f[2]))}or(f,s.get("minTurnAngle")),o.setShape({points:f})}}}var q=[],d=new x;function or(e,s){if(s<=180&&s>0){s=s/180*Math.PI,T.fromArray(e[0]),c.fromArray(e[1]),l.fromArray(e[2]),x.sub(P,T,c),x.sub(L,l,c);var o=P.len(),r=L.len();if(!(o<.001||r<.001)){P.scale(1/o),L.scale(1/r);var v=P.dot(L),f=Math.cos(s);if(f<v){var n=g(c.x,c.y,l.x,l.y,T.x,T.y,q,!1);d.fromArray(q),d.scaleAndAdd(L,n/Math.tan(Math.PI-s));var i=l.x!==c.x?(d.x-c.x)/(l.x-c.x):(d.y-c.y)/(l.y-c.y);if(isNaN(i))return;i<0?x.copy(d,c):i>1&&x.copy(d,l),d.toArray(e[1])}}}}function fr(e,s,o){if(o<=180&&o>0){o=o/180*Math.PI,T.fromArray(e[0]),c.fromArray(e[1]),l.fromArray(e[2]),x.sub(P,c,T),x.sub(L,l,c);var r=P.len(),v=L.len();if(!(r<.001||v<.001)){P.scale(1/r),L.scale(1/v);var f=P.dot(s),n=Math.cos(o);if(f<n){var i=g(c.x,c.y,l.x,l.y,T.x,T.y,q,!1);d.fromArray(q);var h=Math.PI/2,u=Math.acos(L.dot(s)),a=h+u-o;if(a>=h)x.copy(d,l);else{d.scaleAndAdd(L,i/Math.tan(Math.PI/2-a));var y=l.x!==c.x?(d.x-c.x)/(l.x-c.x):(d.y-c.y)/(l.y-c.y);if(isNaN(y))return;y<0?x.copy(d,c):y>1&&x.copy(d,l)}d.toArray(e[1])}}}}function F(e,s,o,r){var v=o==="normal",f=v?e:e.ensureState(o);f.ignore=s;var n=r.get("smooth");n&&n===!0&&(n=.3),f.shape=f.shape||{},n>0&&(f.shape.smooth=n);var i=r.getModel("lineStyle").getLineStyle();v?e.useStyle(i):f.style=i}function tr(e,s){var o=s.smooth,r=s.points;if(r)if(e.moveTo(r[0][0],r[0][1]),o>0&&r.length>=3){var v=B(r[0],r[1]),f=B(r[1],r[2]);if(!v||!f){e.lineTo(r[1][0],r[1][1]),e.lineTo(r[2][0],r[2][1]);return}var n=Math.min(v,f)*o,i=z([],r[1],r[0],n/v),h=z([],r[1],r[2],n/f),u=z([],i,h,.5);e.bezierCurveTo(i[0],i[1],i[0],i[1],u[0],u[1]),e.bezierCurveTo(h[0],h[1],h[0],h[1],r[2][0],r[2][1])}else for(var a=1;a<r.length;a++)e.lineTo(r[a][0],r[a][1])}function ir(e,s,o){var r=e.getTextGuideLine(),v=e.getTextContent();if(!v){r&&e.removeTextGuideLine();return}for(var f=s.normal,n=f.get("show"),i=v.ignore,h=0;h<D.length;h++){var u=D[h],a=s[u],y=u==="normal";if(a){var M=a.get("show"),t=y?i:O(v.states[u]&&v.states[u].ignore,i);if(t||!O(M,n)){var m=y?r:r&&r.states[u];m&&(m.ignore=!0);continue}r||(r=new K,e.setTextGuideLine(r),!y&&(i||!n)&&F(r,!0,"normal",s.normal),e.stateProxy&&(r.stateProxy=e.stateProxy)),F(r,!1,u,a)}}if(r){V(r.style,o),r.style.fill=null;var b=f.get("showAbove"),p=e.textGuideLineConfig=e.textGuideLineConfig||{};p.showAbove=b||!1,r.buildPath=tr}}function hr(e,s){s=s||"labelLine";for(var o={normal:e.getModel(s)},r=0;r<_.length;r++){var v=_[r];o[v]=e.getModel([v,s])}return o}export{fr as a,hr as g,or as l,ir as s,nr as u};
