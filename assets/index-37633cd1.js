import{g as w,_ as G,b as ne,e as fe,s as ye,a as be}from"./index-7598eee4.js";import{w as me}from"./runtime-dom.esm-bundler-267c7a7c.js";import{I as X}from"./use-popup-manager-4513da85.js";import{I as he}from"./index-6a3f517e.js";import{d as K,x as le,c as v,f as ee,o as R,b as D,h as ge,e as ie,n as H,g as $e,w as Ce,a as d,i as oe,m as ke,T as pe,t as q,r as g,u as se,K as L,S as xe,y as Be,z as U,j as F,p as Se,al as _e,A as ze}from"./runtime-core.esm-bundler-bda9e85e.js";import{a as Te,I as Ie,b as we,c as Ke}from"./index-23fe4ef8.js";import{R as te,d as Oe}from"./index-00b9d494.js";import{u as Re}from"./use-children-components-bc6f9f8f.js";const He=({direction:e,type:n,offset:t})=>e==="vertical"?{transform:`translateY(${-t}px)`}:{transform:`translateX(${-t}px)`},Y=Symbol("ArcoTabs"),Ae=K({name:"TabsTab",components:{IconHover:X,IconClose:he},props:{tab:{type:Object,required:!0},active:Boolean,editable:Boolean},emits:["click","delete"],setup(e,{emit:n}){const t=w("tabs-tab"),f=le(Y,{}),r=u=>{e.tab.disabled||n("click",e.tab.key,u)},m=u=>{u.key==="Enter"&&r(u)},o=v(()=>Object.assign(f.trigger==="click"?{onClick:r}:{onMouseover:r},{onKeydown:m})),i=u=>{e.tab.disabled||n("delete",e.tab.key,u)},s=v(()=>[t,{[`${t}-active`]:e.active,[`${t}-closable`]:e.editable&&e.tab.closable,[`${t}-disabled`]:e.tab.disabled}]);return{prefixCls:t,cls:s,eventHandlers:o,handleDelete:i}}});function Pe(e,n,t,f,r,m){const o=ee("icon-close"),i=ee("icon-hover");return R(),D("div",ke({tabindex:"0",class:e.cls},e.eventHandlers),[ge("span",{class:H(`${e.prefixCls}-title`)},[ie(e.$slots,"default")],2),e.editable&&e.tab.closable?(R(),$e(i,{key:0,class:H(`${e.prefixCls}-close-btn`),onClick:me(e.handleDelete,["stop"])},{default:Ce(()=>[d(o)]),_:1},8,["class","onClick"])):oe("v-if",!0)],16)}var je=G(Ae,[["render",Pe]]);function Ne(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!pe(e)}var ae=K({name:"TabsButton",props:{type:{type:String,default:"next"},direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1},onClick:{type:Function}},emits:["click"],setup(e,{emit:n}){const t=w("tabs-nav-button"),f=o=>{e.disabled||n("click",e.type,o)},r=()=>e.direction==="horizontal"?e.type==="next"?d(Te,null,null):d(Ie,null,null):e.type==="next"?d(we,null,null):d(Ke,null,null),m=v(()=>[t,{[`${t}-disabled`]:e.disabled,[`${t}-left`]:e.direction==="horizontal"&&e.type==="previous",[`${t}-right`]:e.direction==="horizontal"&&e.type==="next",[`${t}-up`]:e.direction==="vertical"&&e.type==="previous",[`${t}-down`]:e.direction==="vertical"&&e.type==="next"}]);return()=>{let o;return d("div",{class:m.value,onClick:f},[d(X,{disabled:e.disabled},Ne(o=r())?o:{default:()=>[o]})])}}});const De=K({name:"TabsNavInk",props:{activeTabRef:{type:Object},direction:{type:String},disabled:Boolean,animation:Boolean},setup(e){const{activeTabRef:n}=q(e),t=w("tabs-nav-ink"),f=g(0),r=g(0),m=v(()=>e.direction==="vertical"?{top:`${f.value}px`,height:`${r.value}px`}:{left:`${f.value}px`,width:`${r.value}px`}),o=()=>{if(n.value){const s=e.direction==="vertical"?n.value.offsetTop:n.value.offsetLeft,u=e.direction==="vertical"?n.value.offsetHeight:n.value.offsetWidth;(s!==f.value||u!==r.value)&&(f.value=s,r.value=u)}};se(()=>{L(()=>o())}),xe(()=>{o()});const i=v(()=>[t,{[`${t}-animation`]:e.animation,[`${t}-disabled`]:e.disabled}]);return{prefixCls:t,cls:i,style:m}}});function Le(e,n,t,f,r,m){return R(),D("div",{class:H(e.cls),style:Be(e.style)},null,6)}var qe=G(De,[["render",Le]]),We=K({name:"TabsNav",props:{tabs:{type:Array,required:!0},direction:{type:String,required:!0},type:{type:String,required:!0},activeKey:{type:[String,Number]},activeIndex:{type:Number,required:!0},position:{type:String,required:!0},size:{type:String,required:!0},showAddButton:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},animation:{type:Boolean,required:!0},headerPadding:{type:Boolean,default:!0}},emits:["click","add","delete"],setup(e,{emit:n,slots:t}){const{tabs:f,activeKey:r,activeIndex:m,direction:o}=q(e),i=w("tabs-nav"),s=g(),u=g(),p=g({}),x=v(()=>{if(!ne(r.value))return p.value[r.value]}),C=g(),_=v(()=>e.editable&&["line","card","card-gutter"].includes(e.type)),y=g(!1),k=g(0),B=g(0),S=g([]),b=g(0),z=()=>{var a,c,I;return(I=o.value==="vertical"?(a=s.value)==null?void 0:a.offsetHeight:(c=s.value)==null?void 0:c.offsetWidth)!=null?I:0},A=()=>!u.value||!s.value?0:o.value==="vertical"?u.value.offsetHeight-s.value.offsetHeight:u.value.offsetWidth-s.value.offsetWidth,P=()=>f.value.map(a=>{const c=p.value[a.key];return o.value==="vertical"?c.offsetTop+c.offsetHeight:c.offsetLeft+c.offsetWidth}),T=()=>{y.value=W(),y.value?(k.value=z(),B.value=A(),S.value=P(),b.value>B.value&&(b.value=B.value)):b.value=0},W=()=>s.value&&u.value?e.direction==="vertical"?u.value.offsetHeight>s.value.offsetHeight:u.value.offsetWidth>s.value.offsetWidth:!1,j=a=>{var c;return((c=S.value[a-1])!=null?c:0)>=b.value&&S.value[a]<=b.value+k.value},N=a=>s.value?a==="previous"?b.value-k.value:b.value+k.value:0,E=a=>!s.value||!u.value||a<0?0:a>B.value?B.value:a,l=(a,c)=>{n("click",a,c)},h=(a,c)=>{n("delete",a,c)},O=a=>{b.value=E(N(a))},ue=()=>{T(),C.value&&C.value.$forceUpdate()};U(f,()=>{L(()=>{T()})}),U(m,(a,c)=>{L(()=>{var I;if(y.value)if(a>=c){const $=a<S.value.length-1?a+1:a;j($)||(b.value=S.value[$]-k.value)}else{const $=a>0?a-1:a;j($)||(b.value=(I=S.value[$-1])!=null?I:0)}})}),se(()=>{T()});const J=()=>!_.value||!e.showAddButton?null:d("div",{class:`${i}-add-btn`,onClick:a=>n("add",a)},[d(X,null,{default:()=>[d(Oe,null,null)]})]),de=v(()=>[i,`${i}-${e.direction}`,`${i}-${e.position}`,`${i}-size-${e.size}`,`${i}-type-${e.type}`]),ce=v(()=>[`${i}-tab-list`,{[`${i}-tab-list-no-padding`]:!e.headerPadding&&["line","text"].includes(e.type)&&e.direction==="horizontal"}]),re=v(()=>He({direction:e.direction,type:e.type,offset:b.value})),ve=v(()=>[`${i}-tab`,{[`${i}-tab-scroll`]:y.value}]);return()=>{var a;return d("div",{class:de.value},[y.value&&d(ae,{type:"previous",direction:e.direction,disabled:b.value<=0,onClick:O},null),d(te,{onResize:()=>T()},{default:()=>[d("div",{class:ve.value,ref:s},[d(te,{onResize:ue},{default:()=>[d("div",{ref:u,class:ce.value,style:re.value},[e.tabs.map((c,I)=>d(je,{key:c.key,ref:$=>{$!=null&&$.$el&&(p.value[c.key]=$.$el)},active:c.key===r.value,tab:c,editable:e.editable,onClick:l,onDelete:h},{default:()=>{var $,Q,Z;return[(Z=(Q=($=c.slots).title)==null?void 0:Q.call($))!=null?Z:c.title]}})),e.type==="line"&&d(qe,{ref:C,activeTabRef:x.value,direction:e.direction,disabled:!1,animation:e.animation},null)])]}),!y.value&&J()])]}),y.value&&d(ae,{type:"next",direction:e.direction,disabled:b.value>=B.value,onClick:O},null),d("div",{class:`${i}-extra`},[y.value&&J(),(a=t.extra)==null?void 0:a.call(t)])])}}}),M=K({name:"Tabs",props:{activeKey:{type:[String,Number],default:void 0},defaultActiveKey:{type:[String,Number],default:void 0},position:{type:String,default:"top"},size:{type:String},type:{type:String,default:"line"},direction:{type:String,default:"horizontal"},editable:{type:Boolean,default:!1},showAddButton:{type:Boolean,default:!1},destroyOnHide:{type:Boolean,default:!1},lazyLoad:{type:Boolean,default:!1},justify:{type:Boolean,default:!1},animation:{type:Boolean,default:!1},headerPadding:{type:Boolean,default:!0},autoSwitch:{type:Boolean,default:!1},hideContent:{type:Boolean,default:!1},trigger:{type:String,default:"click"}},emits:{"update:activeKey":e=>!0,change:e=>!0,tabClick:(e,n)=>!0,add:e=>!0,delete:(e,n)=>!0},setup(e,{emit:n,slots:t}){const{size:f,lazyLoad:r,destroyOnHide:m,trigger:o}=q(e),i=w("tabs"),{mergedSize:s}=fe(f),u=v(()=>e.direction==="vertical"?"left":e.position),p=v(()=>["left","right"].includes(u.value)?"vertical":"horizontal"),{children:x,components:C}=Re("TabPane"),_=F(new Map),y=v(()=>{const l=[];return C.value.forEach(h=>{const O=_.get(h);O&&l.push(O)}),l}),k=v(()=>y.value.map(l=>l.key)),B=(l,h)=>{_.set(l,h)},S=l=>{_.delete(l)},b=g(e.defaultActiveKey),z=v(()=>{var l;const h=(l=e.activeKey)!=null?l:b.value;return ne(h)?k.value[0]:h}),A=v(()=>{const l=k.value.indexOf(z.value);return l===-1?0:l});Se(Y,F({lazyLoad:r,destroyOnHide:m,activeKey:z,addItem:B,removeItem:S,trigger:o}));const P=l=>{l!==z.value&&(b.value=l,n("update:activeKey",l),n("change",l))},T=(l,h)=>{P(l),n("tabClick",l,h)},W=l=>{n("add",l),e.autoSwitch&&L(()=>{const h=k.value[k.value.length-1];P(h)})},j=(l,h)=>{n("delete",l,h)},N=()=>d("div",{class:[`${i}-content`,{[`${i}-content-hide`]:e.hideContent}]},[d("div",{class:[`${i}-content-list`,{[`${i}-content-animation`]:e.animation}],style:{marginLeft:`-${A.value*100}%`}},[x.value])]),E=v(()=>[i,`${i}-${p.value}`,`${i}-${u.value}`,`${i}-type-${e.type}`,`${i}-size-${s.value}`,{[`${i}-justify`]:e.justify}]);return()=>{var l;return x.value=(l=t.default)==null?void 0:l.call(t),d("div",{class:E.value},[u.value==="bottom"&&N(),d(We,{tabs:y.value,activeKey:z.value,activeIndex:A.value,direction:p.value,position:u.value,editable:e.editable,animation:e.animation,showAddButton:e.showAddButton,headerPadding:e.headerPadding,size:s.value,type:e.type,onClick:T,onAdd:W,onDelete:j},{extra:t.extra}),u.value!=="bottom"&&N()])}}});const Ee=K({name:"TabPane",props:{title:String,disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},destroyOnHide:{type:Boolean,default:!1}},setup(e,{slots:n}){var t;const{title:f,disabled:r,closable:m}=q(e),o=ze(),i=w("tabs"),s=le(Y,{}),u=g(),p=v(()=>o==null?void 0:o.vnode.key),x=v(()=>p.value===s.activeKey),C=g(s.lazyLoad?x.value:!0),_=F({key:p,title:f,disabled:r,closable:m,slots:n});return o!=null&&o.uid&&((t=s.addItem)==null||t.call(s,o.uid,_)),_e(()=>{var y;o!=null&&o.uid&&((y=s.removeItem)==null||y.call(s,o.uid))}),U(x,y=>{y?C.value||(C.value=!0):(e.destroyOnHide||s.destroyOnHide)&&(C.value=!1)}),{prefixCls:i,active:x,itemRef:u,mounted:C}}});function Me(e,n,t,f,r,m){return R(),D("div",{ref:"itemRef",class:H([`${e.prefixCls}-content-item`,{[`${e.prefixCls}-content-item-active`]:e.active}])},[e.mounted?(R(),D("div",{key:0,class:H(`${e.prefixCls}-pane`)},[ie(e.$slots,"default")],2)):oe("v-if",!0)],2)}var V=G(Ee,[["render",Me]]);const Ze=Object.assign(M,{TabPane:V,install:(e,n)=>{ye(e,n);const t=be(n);e.component(t+M.name,M),e.component(t+V.name,V)}});export{Ze as T,V as a};
