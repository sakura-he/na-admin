import{ac as Te,aY as Ne,fz as _t,U as b,r as k,$ as le,d as J,Z as Fa,o as je,c as De,F as ze,q as Zl,h as ka,a0 as Jl,a as d,X as me,ae as ne,f as St,al as Ea,au as Z,ft as Aa,am as Ql,fA as tl,a4 as xl,aO as Ka,ap as he,aR as Ba,aH as ja,cs as Da,aN as La,bA as Ta,aU as za,y as We,K as bl,B as et,aP as q,ao as Wa,dO as wt,dj as pt,aZ as Na,m as ve,fB as cl,fC as fl,fD as Cl,as as $t,fE as Va,az as Rt,fF as Ma,fG as Ze,aA as Ha,ab as se,O as Ot,aC as Ga,fH as lt,aW as qa,fI as tt,a_ as Ua,fJ as Ya,fx as Xa,aB as Za,af as Ja,a9 as Qa,aa as en}from"./index-30c7a380.js";import{P as ln}from"./index-55a812ef.js";import{g as tn}from"./get-value-by-path-bf636ec3.js";var an=Object.defineProperty,nn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,on=Object.prototype.hasOwnProperty,un=Object.prototype.propertyIsEnumerable,nt=(e,t,l)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,dn=(e,t)=>{for(var l in t||(t={}))on.call(t,l)&&nt(e,l,t[l]);if(at)for(var l of at(t))un.call(t,l)&&nt(e,l,t[l]);return e},sn=(e,t)=>nn(e,rn(t));const cn=e=>{let t=0;const l=n=>{if(Ne(n)&&n.length>0)for(const m of n)m.children?l(m.children):t+=1};return l(e),t},Pt=e=>{let t=0;if(Ne(e)&&e.length>0){t=1;for(const l of e)if(l.children){const n=Pt(l.children);n>0&&(t=Math.max(t,n+1))}}return t},rt=(e,t)=>{let{parent:l}=e;for(;l;)l.fixed===t&&(t==="left"?l.isLastLeftFixed=!0:l.isFirstRightFixed=!0),l=l.parent},fn=(e,t)=>{const l=Pt(e);t.clear();const n=[],m=[...Array(l)].map(()=>[]);let o,s;const c=(f,{level:y=0,parent:u,fixed:_}={})=>{var S;for(const x of f){const w=sn(dn({},x),{parent:u});if(Ne(w.children)){const E=cn(w.children);E>1&&(w.colSpan=E),m[y].push(w),c(w.children,{level:y+1,parent:w,fixed:w.fixed})}else{const E=l-y;E>1&&(w.rowSpan=E),(_||w.fixed)&&(w.fixed=(S=w.fixed)!=null?S:_,w.fixed==="left"?o=n.length:Te(s)&&(s=n.length)),(Te(w.dataIndex)||_t(w.dataIndex))&&(w.dataIndex=`__arco_data_index_${n.length}`),t.set(w.dataIndex,w),n.push(w),m[y].push(w)}}};return c(e),Te(o)||(n[o].isLastLeftFixed=!0,rt(n[o],"left")),Te(s)||(n[s].isFirstRightFixed=!0,rt(n[s],"right")),{dataColumns:n,groupColumns:m}},vn=(e,t)=>{for(let l=0;l<e.length;l++)if(e[l].name===t)return l;return-1},hn=(e,t)=>{var l;const n=vn(t,e.name);if(n<=0)return 0;let m=0;const o=t.slice(0,n);for(const s of o)m+=(l=s.width)!=null?l:0;return m},_l=e=>e.children&&e.children.length>0?_l(e.children[0]):e,mn=e=>e.children&&e.children.length>0?_l(e.children[e.children.length-1]):e,yn=(e,{dataColumns:t,operations:l})=>{var n,m;let o=0;if(e.fixed==="left"){for(const f of l)o+=(n=f.width)!=null?n:40;const c=_l(e);for(const f of t){if(c.dataIndex===f.dataIndex)break;o+=(m=f.width)!=null?m:0}return o}const s=mn(e);for(let c=t.length-1;c>0;c--){const f=t[c];if(s.dataIndex===f.dataIndex)break;f.fixed==="right"&&(o+=f.width)}return o},It=(e,t)=>t.fixed?[`${e}-col-fixed-left`,{[`${e}-col-fixed-left-last`]:t.isLastLeftFixed}]:[],Ft=(e,t)=>t.fixed==="left"?[`${e}-col-fixed-left`,{[`${e}-col-fixed-left-last`]:t.isLastLeftFixed}]:t.fixed==="right"?[`${e}-col-fixed-right`,{[`${e}-col-fixed-right-first`]:t.isFirstRightFixed}]:[],kt=(e,{dataColumns:t,operations:l})=>{if(e.fixed){const n=`${yn(e,{dataColumns:t,operations:l})}px`;return e.fixed==="left"?{left:n}:{right:n}}return{}},Et=(e,t)=>e.fixed?{left:`${hn(e,t)}px`}:{},ot=(e,t,l)=>{var n;let m=e;for(let o=0;o<t.length;o++){const s=t[o];if(o>=t.length-1)if(l)m.splice(s,0,l);else return m.splice(s,1)[0];m=(n=m[s].children)!=null?n:[]}},Sl=e=>{const t=[];if(e.children)for(const l of e.children)l.isLeaf?t.push(l.key):t.push(...Sl(l));return t},gn=(e,t)=>{let l=!1,n=!1;const m=t.filter(o=>e.includes(o));return m.length>0&&(m.length>=t.length?l=!0:n=!0),{checked:l,indeterminate:n}},Le=(e,t,l=!1)=>l?e.filter(n=>!t.includes(n)):Array.from(new Set(e.concat(t))),bn=({selectedKeys:e,defaultSelectedKeys:t,rowSelection:l,currentAllRowKeys:n,currentAllEnabledRowKeys:m,emit:o})=>{var s,c,f;const y=b(()=>{var p;return((p=l.value)==null?void 0:p.type)==="radio"}),u=k((f=(c=t.value)!=null?c:(s=l.value)==null?void 0:s.defaultSelectedRowKeys)!=null?f:[]),_=b(()=>{var p,O,I;return(I=(O=e.value)!=null?O:(p=l.value)==null?void 0:p.selectedRowKeys)!=null?I:u.value}),S=b(()=>_.value.filter(p=>n.value.includes(p)));return{isRadio:y,selectedRowKeys:_,currentSelectedRowKeys:S,handleSelectAll:p=>{const O=Le(_.value,m.value,!p);u.value=O,o("selectAll",p),o("selectionChange",O),o("update:selectedKeys",O)},handleSelect:(p,O)=>{const I=y.value?[O.key]:Le(_.value,[O.key],!p);u.value=I,o("select",I,O.key,O.raw),o("selectionChange",I),o("update:selectedKeys",I)},handleSelectAllLeafs:(p,O)=>{const I=Le(_.value,Sl(p),!O);u.value=I,o("select",I,p.key,p.raw),o("selectionChange",I),o("update:selectedKeys",I)},select:(p,O=!0)=>{const I=[].concat(p),L=y.value?I:Le(_.value,I,!O);u.value=L,o("selectionChange",L),o("update:selectedKeys",L)},selectAll:(p=!0)=>{const O=Le(_.value,m.value,!p);u.value=O,o("selectionChange",O),o("update:selectedKeys",O)},clearSelected:()=>{u.value=[],o("selectionChange",[]),o("update:selectedKeys",[])}}},xn=({expandedKeys:e,defaultExpandedKeys:t,defaultExpandAllRows:l,expandable:n,allRowKeys:m,emit:o})=>{const c=k((()=>{var S,x;return t.value?t.value:(S=n.value)!=null&&S.defaultExpandedRowKeys?n.value.defaultExpandedRowKeys:l.value||(x=n.value)!=null&&x.defaultExpandAllRows?[...m.value]:[]})()),f=b(()=>{var S,x,w;return(w=(x=e.value)!=null?x:(S=n.value)==null?void 0:S.expandedRowKeys)!=null?w:c.value});return{expandedRowKeys:f,handleExpand:(S,x)=>{const E=f.value.includes(S)?f.value.filter($=>S!==$):f.value.concat(S);c.value=E,o("expand",S,x),o("expandedChange",E),o("update:expandedKeys",E)},expand:(S,x=!0)=>{const w=[].concat(S),E=x?f.value.concat(w):f.value.filter($=>!w.includes($));c.value=E,o("expandedChange",E),o("update:expandedKeys",E)},expandAll:(S=!0)=>{const x=S?[...m.value]:[];c.value=x,o("expandedChange",x),o("update:expandedKeys",x)}}},Cn=(e,t)=>{var l,n;const m=k(le(e.pagination)&&(l=e.pagination.defaultCurrent)!=null?l:1),o=k(le(e.pagination)&&(n=e.pagination.defaultPageSize)!=null?n:10),s=b(()=>{var u;return le(e.pagination)&&(u=e.pagination.pageSize)!=null?u:o.value});return{page:b(()=>{var u;return le(e.pagination)&&(u=e.pagination.current)!=null?u:m.value}),pageSize:s,handlePageChange:u=>{m.value=u,t("pageChange",u)},handlePageSizeChange:u=>{o.value=u,t("pageSizeChange",u)}}},_n=J({name:"ColGroup",props:{dataColumns:{type:Array,required:!0},operations:{type:Array,required:!0},columnWidth:{type:Object}},setup(){return{fixedWidth:t=>{if(t)return{width:`${t}px`,minWidth:`${t}px`,maxWidth:`${t}px`}}}}});function Sn(e,t,l,n,m,o){return je(),De("colgroup",null,[(je(!0),De(ze,null,Zl(e.operations,s=>(je(),De("col",{key:`arco-col-${s.name}`,class:ka(`arco-table-${s.name}-col`),style:Jl(e.fixedWidth(s.width))},null,6))),128)),(je(!0),De(ze,null,Zl(e.dataColumns,s=>(je(),De("col",{key:`arco-col-${s.dataIndex}`,style:Jl(e.fixedWidth(e.columnWidth&&s.dataIndex&&e.columnWidth[s.dataIndex]||s.width))},null,4))),128))])}var Je=Fa(_n,[["render",Sn]]),Qe=J({name:"Thead",setup(e,{slots:t}){return()=>{var l,n;return d((n=(l=t.thead)==null?void 0:l.call(t)[0])!=null?n:"thead",null,{default:t.default})}}}),el=J({name:"Tbody",setup(e,{slots:t}){return()=>{var l,n;return d((n=(l=t.tbody)==null?void 0:l.call(t)[0])!=null?n:"tbody",null,{default:t.default})}}}),ae=J({name:"Tr",props:{expand:{type:Boolean},empty:{type:Boolean},checked:{type:Boolean},rowIndex:Number,record:{type:Object,default:()=>({})}},setup(e,{slots:t}){const l=me("table"),n=b(()=>[`${l}-tr`,{[`${l}-tr-expand`]:e.expand,[`${l}-tr-empty`]:e.empty,[`${l}-tr-checked`]:e.checked}]);return()=>{var m,o,s;return d((s=(o=t.tr)==null?void 0:o.call(t,{rowIndex:e.rowIndex,record:(m=e.record)==null?void 0:m.raw})[0])!=null?s:"tr",{class:n.value},{default:t.default})}}});const wn=({column:e,tableCtx:t})=>{const l=b(()=>{var y;if(e.value.dataIndex&&e.value.dataIndex===((y=t.sorter)==null?void 0:y.field))return t.sorter.direction}),n=b(()=>{var y,u,_;return(_=(u=(y=e.value)==null?void 0:y.sortable)==null?void 0:u.sortDirections)!=null?_:[]}),m=b(()=>n.value.length>0),o=b(()=>n.value.includes("ascend")),s=b(()=>n.value.includes("descend")),c=b(()=>{var y,u;return l.value?l.value===n.value[0]&&(u=n.value[1])!=null?u:"":(y=n.value[0])!=null?y:""});return{sortOrder:l,hasSorter:m,hasAscendBtn:o,hasDescendBtn:s,nextSortOrder:c,handleClickSorter:y=>{var u;e.value.dataIndex&&((u=t.onSorterChange)==null||u.call(t,e.value.dataIndex,c.value,y))}}},pn=({column:e,tableCtx:t})=>{const l=b(()=>{var x;return e.value.dataIndex&&((x=t.filters)!=null&&x[e.value.dataIndex])?t.filters[e.value.dataIndex]:[]}),n=k(!1),m=b(()=>l.value.length>0),o=b(()=>{var x;return!!((x=e.value.filterable)!=null&&x.multiple)}),s=k(l.value);ne(l,x=>{Ne(x)&&String(x)!==String(s.value)&&(s.value=x)});const c=x=>{n.value=x},f=x=>{s.value=x};return{filterPopupVisible:n,isFilterActive:m,isMultipleFilter:o,columnFilterValue:s,handleFilterPopupVisibleChange:c,setFilterValue:f,handleCheckboxFilterChange:x=>{f(x)},handleRadioFilterChange:x=>{f([x])},handleFilterConfirm:x=>{var w;e.value.dataIndex&&((w=t.onFilterChange)==null||w.call(t,e.value.dataIndex,s.value,x)),c(!1)},handleFilterReset:x=>{var w;f([]),e.value.dataIndex&&((w=t.onFilterChange)==null||w.call(t,e.value.dataIndex,s.value,x)),c(!1)}}},Se=Symbol("ArcoTable"),ut=Symbol("ArcoTableColumn");function it(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tl(e)}var At=J({name:"AutoTooltip",inheritAttrs:!1,props:{tooltipProps:{type:Object}},setup(e,{attrs:t,slots:l}){const n=me("auto-tooltip"),m=k(),o=k(),s=k(""),c=k(!1),f=()=>{if(m.value&&o.value){const S=o.value.offsetWidth>m.value.offsetWidth;S!==c.value&&(c.value=S)}},y=()=>{var S;(S=o.value)!=null&&S.textContent&&o.value.textContent!==s.value&&(s.value=o.value.textContent)},u=()=>{y(),f()};St(()=>{y(),f()}),Ea(()=>{y(),f()});const _=()=>d("span",Z({ref:m,class:n},t),[d(Ql,{onResize:u},{default:()=>{var S;return[d("span",{ref:o,class:`${n}-content`},[(S=l.default)==null?void 0:S.call(l)])]}})]);return()=>{let S;if(c.value){let x;return d(Aa,Z({content:s.value,onResize:u},e.tooltipProps),it(x=_())?x:{default:()=>[x]})}return d(Ql,{onResize:u},it(S=_())?S:{default:()=>[S]})}}}),$n=Object.defineProperty,dt=Object.getOwnPropertySymbols,Rn=Object.prototype.hasOwnProperty,On=Object.prototype.propertyIsEnumerable,st=(e,t,l)=>t in e?$n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,vl=(e,t)=>{for(var l in t||(t={}))Rn.call(t,l)&&st(e,l,t[l]);if(dt)for(var l of dt(t))On.call(t,l)&&st(e,l,t[l]);return e};function hl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tl(e)}var ll=J({name:"Th",props:{column:{type:Object,default:()=>({})},operations:{type:Array,default:()=>[]},dataColumns:{type:Array,default:()=>[]},resizable:Boolean},setup(e,{slots:t}){const{column:l}=xl(e),n=me("table"),{t:m}=Ka(),o=he(Se,{}),s=b(()=>{var P;return((P=e.column)==null?void 0:P.dataIndex)&&o.resizingColumn===e.column.dataIndex}),c=b(()=>{var P;if(le((P=e.column)==null?void 0:P.tooltip))return e.column.tooltip}),f=b(()=>{var P;return(P=e.column)!=null&&P.filterable&&Ba(e.column.filterable.alignLeft)?e.column.filterable.alignLeft:o.filterIconAlignLeft}),{sortOrder:y,hasSorter:u,hasAscendBtn:_,hasDescendBtn:S,nextSortOrder:x,handleClickSorter:w}=wn({column:l,tableCtx:o}),{filterPopupVisible:E,isFilterActive:$,isMultipleFilter:R,columnFilterValue:v,handleFilterPopupVisibleChange:p,setFilterValue:O,handleCheckboxFilterChange:I,handleRadioFilterChange:L,handleFilterConfirm:G,handleFilterReset:M}=pn({column:l,tableCtx:o}),Q=()=>{var P,F,A,j,N;let H,oe;const{filterable:U}=e.column;return(P=e.column.slots)!=null&&P["filter-content"]?(F=e.column.slots)==null?void 0:F["filter-content"]({filterValue:v.value,setFilterValue:O,handleFilterConfirm:G,handleFilterReset:M}):U!=null&&U.slotName?(j=(A=o==null?void 0:o.slots)==null?void 0:A[U==null?void 0:U.slotName])==null?void 0:j.call(A,{filterValue:v.value,setFilterValue:O,handleFilterConfirm:G,handleFilterReset:M}):U!=null&&U.renderContent?U.renderContent({filterValue:v.value,setFilterValue:O,handleFilterConfirm:G,handleFilterReset:M}):d("div",{class:`${n}-filters-content`},[d("ul",{class:`${n}-filters-list`},[(N=U==null?void 0:U.filters)==null?void 0:N.map((B,pe)=>{var be;return d("li",{class:`${n}-filters-item`,key:pe},[R.value?d(We,{value:B.value,modelValue:v.value,uninjectGroupContext:!0,onChange:I},{default:()=>[B.text]}):d(bl,{value:B.value,modelValue:(be=v.value[0])!=null?be:"",uninjectGroupContext:!0,onChange:L},{default:()=>[B.text]})])})]),d("div",{class:`${n}-filters-bottom`},[d(et,{size:"mini",onClick:M},hl(H=m("table.resetText"))?H:{default:()=>[H]}),d(et,{type:"primary",size:"mini",onClick:G},hl(oe=m("table.okText"))?oe:{default:()=>[oe]})])])},ee=()=>{const{filterable:P}=e.column;return P?d(La,Z({popupVisible:E.value,trigger:"click",autoFitPosition:!0,popupOffset:f.value?4:0,onPopupVisibleChange:p},P.triggerProps),{default:()=>[d(ja,{class:[`${n}-filters`,{[`${n}-filters-active`]:$.value,[`${n}-filters-open`]:E.value,[`${n}-filters-align-left`]:f.value}],disabled:!f.value,onClick:F=>F.stopPropagation()},{default:()=>{var F,A,j,N,H;return[(H=(N=(A=(F=e.column.slots)==null?void 0:F["filter-icon"])==null?void 0:A.call(F))!=null?N:(j=P.icon)==null?void 0:j.call(P))!=null?H:d(Da,null,null)]}})],content:Q}):null},te=b(()=>{var P,F;const A=[`${n}-cell`,`${n}-cell-align-${(F=(P=e.column)==null?void 0:P.align)!=null?F:e.column.children?"center":"left"}`];return u.value&&A.push(`${n}-cell-with-sorter`,{[`${n}-cell-next-ascend`]:x.value==="ascend",[`${n}-cell-next-descend`]:x.value==="descend"}),f.value&&A.push(`${n}-cell-with-filter`),A}),we=()=>{var P,F,A,j,N,H;return t.default?t.default():(P=e.column)!=null&&P.titleSlotName&&((F=o.slots)!=null&&F[e.column.titleSlotName])?(j=(A=o.slots)[e.column.titleSlotName])==null?void 0:j.call(A,{column:e.column}):(H=(N=e.column)==null?void 0:N.slots)!=null&&H.title?e.column.slots.title():q(e.column.title)?e.column.title():e.column.title},re=()=>{var P,F,A;let j;return d("span",{class:te.value,onClick:u.value?w:void 0},[(P=e.column)!=null&&P.ellipsis&&((F=e.column)!=null&&F.tooltip)?d(At,{class:`${n}-th-title`,tooltipProps:c.value},hl(j=we())?j:{default:()=>[j]}):d("span",{class:[`${n}-th-title`,{[`${n}-text-ellipsis`]:(A=e.column)==null?void 0:A.ellipsis}]},[we()]),u.value&&d("span",{class:`${n}-sorter`},[_.value&&d("div",{class:[`${n}-sorter-icon`,{[`${n}-sorter-icon-active`]:y.value==="ascend"}]},[d(Ta,null,null)]),S.value&&d("div",{class:[`${n}-sorter-icon`,{[`${n}-sorter-icon-active`]:y.value==="descend"}]},[d(za,null,null)])]),f.value&&ee()])},ye=b(()=>{var P,F;return vl(vl(vl({},kt(e.column,{dataColumns:e.dataColumns,operations:e.operations})),(P=e.column)==null?void 0:P.cellStyle),(F=e.column)==null?void 0:F.headerCellStyle)}),D=b(()=>{var P,F;return[`${n}-th`,{[`${n}-col-sorted`]:!!y.value,[`${n}-th-resizing`]:s.value},...Ft(n,e.column),(P=e.column)==null?void 0:P.cellClass,(F=e.column)==null?void 0:F.headerCellClass]}),ge=P=>{var F,A,j;(F=e.column)!=null&&F.dataIndex&&((j=o.onThMouseDown)==null||j.call(o,(A=e.column)==null?void 0:A.dataIndex,P))};return()=>{var P,F,A,j;const N=(P=e.column.colSpan)!=null?P:1,H=(F=e.column.rowSpan)!=null?F:1;return d((j=(A=t.th)==null?void 0:A.call(t,{column:e.column})[0])!=null?j:"th",{class:D.value,style:ye.value,colspan:N>1?N:void 0,rowspan:H>1?H:void 0},{default:()=>[re(),!f.value&&ee(),e.resizable&&d("span",{class:`${n}-column-handle`,onMousedown:ge},null)]})}}}),Pn=Object.defineProperty,ct=Object.getOwnPropertySymbols,In=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable,ft=(e,t,l)=>t in e?Pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,ml=(e,t)=>{for(var l in t||(t={}))In.call(t,l)&&ft(e,l,t[l]);if(ct)for(var l of ct(t))Fn.call(t,l)&&ft(e,l,t[l]);return e};function kn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tl(e)}var fe=J({name:"Td",props:{rowIndex:Number,record:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})},type:{type:String,default:"normal"},operations:{type:Array,default:()=>[]},dataColumns:{type:Array,default:()=>[]},colSpan:{type:Number,default:1},rowSpan:{type:Number,default:1},isFixedExpand:{type:Boolean,default:!1},containerWidth:{type:Number},showExpandBtn:{type:Boolean,default:!1},indentSize:{type:Number,default:0},renderExpandBtn:{type:Function},summary:{type:Boolean,default:!1}},setup(e,{slots:t}){const l=me("table"),n=b(()=>{var $;if(le(($=e.column)==null?void 0:$.tooltip))return e.column.tooltip}),m=b(()=>{var $,R;return(($=e.column)==null?void 0:$.dataIndex)&&((R=_.sorter)==null?void 0:R.field)===e.column.dataIndex}),o=b(()=>{var $;return(($=e.column)==null?void 0:$.dataIndex)&&_.resizingColumn===e.column.dataIndex}),s=()=>{var $,R,v,p,O,I;return e.summary?q(($=e.column)==null?void 0:$.summaryCellClass)?e.column.summaryCellClass((R=e.record)==null?void 0:R.raw):(v=e.column)==null?void 0:v.summaryCellClass:q((p=e.column)==null?void 0:p.bodyCellClass)?e.column.bodyCellClass((O=e.record)==null?void 0:O.raw):(I=e.column)==null?void 0:I.bodyCellClass},c=b(()=>{var $;return[`${l}-td`,{[`${l}-col-sorted`]:m.value,[`${l}-td-resizing`]:o.value},...Ft(l,e.column),($=e.column)==null?void 0:$.cellClass,s()]}),f=()=>{var $,R,v,p,O,I;return e.summary?q(($=e.column)==null?void 0:$.summaryCellStyle)?e.column.summaryCellStyle((R=e.record)==null?void 0:R.raw):(v=e.column)==null?void 0:v.summaryCellStyle:q((p=e.column)==null?void 0:p.bodyCellStyle)?e.column.bodyCellStyle((O=e.record)==null?void 0:O.raw):(I=e.column)==null?void 0:I.bodyCellStyle},y=b(()=>{var $;const R=kt(e.column,{dataColumns:e.dataColumns,operations:e.operations}),v=f();return ml(ml(ml({},R),($=e.column)==null?void 0:$.cellStyle),v)}),u=b(()=>{if(e.isFixedExpand&&e.containerWidth)return{width:`${e.containerWidth}px`}}),_=he(Se,{}),S=()=>{var $,R,v,p,O,I,L,G;if(t.default)return t.default();const M={record:($=e.record)==null?void 0:$.raw,column:e.column,rowIndex:(R=e.rowIndex)!=null?R:-1};return t.cell?t.cell(M):(v=e.column.slots)!=null&&v.cell?e.column.slots.cell(M):e.column.render?e.column.render(M):e.column.slotName&&((p=_.slots)!=null&&p[e.column.slotName])?(I=(O=_.slots)[e.column.slotName])==null?void 0:I.call(O,M):String((G=tn((L=e.record)==null?void 0:L.raw,e.column.dataIndex))!=null?G:"")},x=k(!1),w=$=>{var R,v;q(_.loadMore)&&!((R=e.record)!=null&&R.isLeaf)&&!((v=e.record)!=null&&v.children)&&(x.value=!0,new Promise(p=>{var O;(O=_.loadMore)==null||O.call(_,e.record.raw,p)}).then(p=>{var O;(O=_.addLazyLoadData)==null||O.call(_,p,e.record),x.value=!1})),$.stopPropagation()},E=()=>{var $,R,v,p,O,I;let L;return d("span",{class:[`${l}-cell`,`${l}-cell-align-${(R=($=e.column)==null?void 0:$.align)!=null?R:"left"}`,{[`${l}-cell-fixed-expand`]:e.isFixedExpand,[`${l}-cell-expand-icon`]:e.showExpandBtn}],style:u.value},[e.indentSize>0&&d("span",{style:{paddingLeft:`${e.indentSize}px`}},null),e.showExpandBtn&&d("span",{class:`${l}-cell-inline-icon`,onClick:w},[x.value?d(Wa,null,null):(v=e.renderExpandBtn)==null?void 0:v.call(e,e.record,!1)]),(p=e.column)!=null&&p.ellipsis&&((O=e.column)!=null&&O.tooltip)?d(At,{class:`${l}-td-content`,tooltipProps:n.value},kn(L=S())?L:{default:()=>[L]}):d("span",{class:[`${l}-td-content`,{[`${l}-text-ellipsis`]:(I=e.column)==null?void 0:I.ellipsis}]},[S()])])};return()=>{var $,R,v,p;return d((p=(v=t.td)==null?void 0:v.call(t,{record:($=e.record)==null?void 0:$.raw,column:e.column,rowIndex:(R=e.rowIndex)!=null?R:-1})[0])!=null?p:"td",{class:c.value,style:y.value,rowspan:e.rowSpan>1?e.rowSpan:void 0,colspan:e.colSpan>1?e.colSpan:void 0},{default:()=>[E()]})}}}),En=J({name:"OperationTh",props:{operationColumn:{type:Object,required:!0},operations:{type:Array,required:!0},rowSpan:{type:Number,default:1},selectAll:{type:Boolean,default:!1}},setup(e){const t=me("table"),l=he(Se,{}),n=b(()=>{var c,f,y,u;let _=!1,S=!1;const w=((f=(c=l.currentSelectedRowKeys)==null?void 0:c.filter($=>{var R,v;return(v=(R=l.currentAllEnabledRowKeys)==null?void 0:R.includes($))!=null?v:!0}))!=null?f:[]).length,E=(u=(y=l.currentAllEnabledRowKeys)==null?void 0:y.length)!=null?u:0;return w>0&&(w>=E?_=!0:S=!0),{checked:_,indeterminate:S}}),m=()=>e.selectAll?d(We,{modelValue:n.value.checked,indeterminate:n.value.indeterminate,uninjectGroupContext:!0,onChange:c=>{var f;(f=l.onSelectAll)==null||f.call(l,c)}},{default:q(e.operationColumn.title)?e.operationColumn.title():e.operationColumn.title}):e.operationColumn.title?q(e.operationColumn.title)?e.operationColumn.title():e.operationColumn.title:null,o=b(()=>Et(e.operationColumn,e.operations)),s=b(()=>[`${t}-th`,`${t}-operation`,{[`${t}-checkbox`]:e.selectAll},...It(t,e.operationColumn)]);return()=>d("th",{class:s.value,style:o.value,rowspan:e.rowSpan>1?e.rowSpan:void 0},[d("span",{class:`${t}-cell`},[m()])])}}),vt=J({name:"OperationTd",components:{Checkbox:We,Radio:bl,IconPlus:wt,IconMinus:pt},props:{operationColumn:{type:Object,required:!0},operations:{type:Array,required:!0},record:{type:Object,required:!0},hasExpand:{type:Boolean,default:!1},selectedRowKeys:{type:Array},renderExpandBtn:{type:Function},colSpan:{type:Number,default:1},rowSpan:{type:Number,default:1},summary:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t,slots:l}){const n=me("table"),m=he(Se,{}),o=b(()=>Et(e.operationColumn,e.operations)),s=b(()=>[`${n}-td`,`${n}-operation`,{[`${n}-checkbox`]:e.operationColumn.name==="selection-checkbox",[`${n}-radio`]:e.operationColumn.name==="selection-radio",[`${n}-expand`]:e.operationColumn.name==="expand",[`${n}-drag-handle`]:e.operationColumn.name==="drag-handle"},...It(n,e.operationColumn)]),c=b(()=>Sl(e.record)),f=b(()=>{var u;return gn((u=m.currentSelectedRowKeys)!=null?u:[],c.value)}),y=()=>{var u,_,S,x,w,E;if(e.summary)return null;if(e.operationColumn.render)return e.operationColumn.render(e.record.raw);if(e.operationColumn.name==="selection-checkbox"){const $=e.record.key;return!m.checkStrictly&&!e.record.isLeaf?d(We,{modelValue:f.value.checked,indeterminate:f.value.indeterminate,disabled:!!e.record.disabled,uninjectGroupContext:!0,onChange:R=>{var v;return(v=m.onSelectAllLeafs)==null?void 0:v.call(m,e.record,R)},onClick:R=>R.stopPropagation()},null):d(We,{modelValue:(_=(u=e.selectedRowKeys)==null?void 0:u.includes($))!=null?_:!1,disabled:!!e.record.disabled,uninjectGroupContext:!0,onChange:R=>{var v;return(v=m.onSelect)==null?void 0:v.call(m,R,e.record)},onClick:R=>R.stopPropagation()},null)}if(e.operationColumn.name==="selection-radio"){const $=e.record.key;return d(bl,{modelValue:(x=(S=e.selectedRowKeys)==null?void 0:S.includes($))!=null?x:!1,disabled:!!e.record.disabled,uninjectGroupContext:!0,onChange:R=>{var v;return(v=m.onSelect)==null?void 0:v.call(m,R,e.record)},onClick:R=>R.stopPropagation()},null)}return e.operationColumn.name==="expand"?e.hasExpand&&e.renderExpandBtn?e.renderExpandBtn(e.record):null:e.operationColumn.name==="drag-handle"?(E=(w=l["drag-handle-icon"])==null?void 0:w.call(l))!=null?E:d(Na,null,null):null};return()=>d("td",{class:s.value,style:o.value,rowspan:e.rowSpan>1?e.rowSpan:void 0,colspan:e.colSpan>1?e.colSpan:void 0},[d("span",{class:`${n}-cell`},[y()])])}});const An=e=>{const t=b(()=>{if(e.value)return e.value.type==="handle"?"handle":"row"}),l=ve({dragging:!1,sourceKey:"",sourcePath:[],targetPath:[],data:{}}),n=()=>{l.dragging=!1,l.sourceKey="",l.sourcePath=[],l.targetPath=[],l.data={}};return{dragType:t,dragState:l,handleDragStart:(u,_,S,x)=>{if(u.dataTransfer&&(u.dataTransfer.effectAllowed="move",u.target&&u.target.tagName==="TD")){const{parentElement:w}=u.target;w&&w.tagName==="TR"&&u.dataTransfer.setDragImage(w,0,0)}l.dragging=!0,l.sourceKey=_,l.sourcePath=S,l.data=x},handleDragEnter:(u,_)=>{u.dataTransfer&&(u.dataTransfer.dropEffect="move"),l.targetPath=_,u.preventDefault()},handleDragLeave:u=>{},handleDragover:u=>{u.dataTransfer&&(u.dataTransfer.dropEffect="move"),u.preventDefault()},handleDragEnd:u=>{var _;((_=u.dataTransfer)==null?void 0:_.dropEffect)==="none"&&n()},handleDrop:u=>{n(),u.preventDefault()}}},Kn=(e,t)=>{const l=k(""),n=ve({}),m=(c,f)=>{f.preventDefault(),l.value=c,cl(window,"mousemove",s),cl(window,"mouseup",o),cl(window,"contextmenu",o)},o=()=>{l.value="",fl(window,"mousemove",s),fl(window,"mouseup",o),fl(window,"contextmenu",o)},s=c=>{const f=e.value[l.value];if(f){const{clientX:y}=c,{x:u}=f.getBoundingClientRect();let _=Math.ceil(y-u);_<40&&(_=40),n[l.value]=_,t("columnResize",l.value,_)}};return{resizingColumn:l,columnWidth:n,handleThMouseDown:m,handleThMouseUp:o}},Bn=({columns:e,onFilterChange:t})=>{const l=k(ht(e.value));ne(e,s=>{const c=ht(s);Cl(c,l.value)||(l.value=c)});const n=b(()=>{var s,c;const f={};for(const y of e.value)if(y.dataIndex){const u=(c=(s=y.filterable)==null?void 0:s.filteredValue)!=null?c:l.value[y.dataIndex];u&&(f[y.dataIndex]=u)}return f});return{_filters:l,computedFilters:n,resetFilters:s=>{var c;const f=s?[].concat(s):[],y={};for(const u of e.value)if(u.dataIndex&&u.filterable&&(f.length===0||f.includes(u.dataIndex))){const _=(c=u.filterable.defaultFilteredValue)!=null?c:[];y[u.dataIndex]=_,t(u.dataIndex,_)}l.value=y},clearFilters:s=>{const c=s?[].concat(s):[],f={};for(const y of e.value)if(y.dataIndex&&y.filterable&&(c.length===0||c.includes(y.dataIndex))){const u=[];f[y.dataIndex]=u,t(y.dataIndex,u)}l.value=f}}},ht=e=>{var t;const l={};for(const n of e)n.dataIndex&&((t=n.filterable)!=null&&t.defaultFilteredValue)&&(l[n.dataIndex]=n.filterable.defaultFilteredValue);return l},jn=({columns:e,onSorterChange:t})=>{const l=k(mt(e.value));ne(e,s=>{const c=mt(s);Cl(c,l.value)||(l.value=c)});const n=b(()=>{var s;for(const c of e.value)if(c.dataIndex&&c.sortable){const f=$t(c.sortable.sortOrder)?c.sortable.sortOrder:((s=l.value)==null?void 0:s.field)===c.dataIndex?l.value.direction:"";if(f)return{field:c.dataIndex,direction:f}}});return{_sorter:l,computedSorter:n,resetSorters:()=>{var s;let c;for(const f of e.value)f.dataIndex&&f.sortable&&(!c&&f.sortable.defaultSortOrder&&(c={field:f.dataIndex,direction:f.sortable.defaultSortOrder}),t(f.dataIndex,(s=f.sortable.defaultSortOrder)!=null?s:""));l.value=c},clearSorters:()=>{for(const s of e.value)s.dataIndex&&s.sortable&&t(s.dataIndex,"")}}},mt=e=>{var t;for(const l of e)if(l.dataIndex&&((t=l.sortable)!=null&&t.defaultSortOrder))return{field:l.dataIndex,direction:l.sortable.defaultSortOrder}},yt=({spanMethod:e,data:t,columns:l})=>{const n=b(()=>{const o={};return e.value&&t.value.forEach((s,c)=>{l.value.forEach((f,y)=>{var u,_;const{rowspan:S=1,colspan:x=1}=(_=(u=e.value)==null?void 0:u.call(e,{record:s.raw,column:f,rowIndex:c,columnIndex:y}))!=null?_:{};(S>1||x>1)&&(o[`${c}-${y}`]=[S,x])})}),o}),m=b(()=>{const o=[];for(const s of Object.keys(n.value)){const c=s.split("-").map(y=>Number(y)),f=n.value[s];for(let y=1;y<f[0];y++){o.push(`${c[0]+y}-${c[1]}`);for(let u=1;u<f[1];u++)o.push(`${c[0]+y}-${c[1]+u}`)}for(let y=1;y<f[1];y++)o.push(`${c[0]}-${c[1]+y}`)}return o});return{tableSpan:n,removedCells:m}};var Dn=Object.defineProperty,Ln=Object.defineProperties,Tn=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,zn=Object.prototype.hasOwnProperty,Wn=Object.prototype.propertyIsEnumerable,bt=(e,t,l)=>t in e?Dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,ce=(e,t)=>{for(var l in t||(t={}))zn.call(t,l)&&bt(e,l,t[l]);if(gt)for(var l of gt(t))Wn.call(t,l)&&bt(e,l,t[l]);return e},xt=(e,t)=>Ln(e,Tn(t));function Nn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tl(e)}const Ct={wrapper:!0,cell:!1,headerCell:!1,bodyCell:!1};var yl=J({name:"Table",props:{columns:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},bordered:{type:[Boolean,Object],default:!0},hoverable:{type:Boolean,default:!0},stripe:{type:Boolean,default:!1},size:{type:String,default:()=>{var e,t;return(t=(e=he(Va,void 0))==null?void 0:e.size)!=null?t:"large"}},tableLayoutFixed:{type:Boolean,default:!1},loading:{type:[Boolean,Object],default:!1},rowSelection:{type:Object},expandable:{type:Object},scroll:{type:Object},pagination:{type:[Boolean,Object],default:!0},pagePosition:{type:String,default:"br"},indentSize:{type:Number,default:16},rowKey:{type:String,default:"key"},showHeader:{type:Boolean,default:!0},virtualListProps:{type:Object},spanMethod:{type:Function},spanAll:{type:Boolean,default:!1},components:{type:Object},loadMore:{type:Function},filterIconAlignLeft:{type:Boolean,default:!1},hideExpandButtonOnEmpty:{type:Boolean,default:!1},rowClass:{type:[String,Array,Object,Function]},draggable:{type:Object},rowNumber:{type:[Boolean,Object]},columnResizable:{type:Boolean},summary:{type:[Boolean,Function]},summaryText:{type:String,default:"Summary"},summarySpanMethod:{type:Function},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},expandedKeys:{type:Array},defaultExpandedKeys:{type:Array},defaultExpandAllRows:{type:Boolean,default:!1},stickyHeader:{type:[Boolean,Number],default:!1},scrollbar:{type:[Object,Boolean],default:!0}},emits:{"update:selectedKeys":e=>!0,"update:expandedKeys":e=>!0,expand:(e,t)=>!0,expandedChange:e=>!0,select:(e,t,l)=>!0,selectAll:e=>!0,selectionChange:e=>!0,sorterChange:(e,t)=>!0,filterChange:(e,t)=>!0,pageChange:e=>!0,pageSizeChange:e=>!0,change:(e,t,l)=>!0,cellClick:(e,t,l)=>!0,rowClick:(e,t)=>!0,headerClick:(e,t)=>!0,columnResize:(e,t)=>!0},setup(e,{emit:t,slots:l}){const{columns:n,rowKey:m,rowSelection:o,expandable:s,loadMore:c,filterIconAlignLeft:f,selectedKeys:y,defaultSelectedKeys:u,expandedKeys:_,defaultExpandedKeys:S,defaultExpandAllRows:x,spanMethod:w,draggable:E,summarySpanMethod:$,scrollbar:R}=xl(e),v=me("table"),p=b(()=>le(e.bordered)?ce(ce({},Ct),e.bordered):xt(ce({},Ct),{wrapper:e.bordered})),{children:O,components:I}=Rt("TableColumn"),L=b(()=>{var a,r;return(r=(a=o.value)==null?void 0:a.checkStrictly)!=null?r:!0}),{displayScrollbar:G,scrollbarProps:M}=Ma(R),Q=b(()=>{var a,r,i,h;const g=!!((a=e.scroll)!=null&&a.x||(r=e.scroll)!=null&&r.minWidth),C=!!((i=e.scroll)!=null&&i.y||(h=e.scroll)!=null&&h.maxHeight);return{x:g,y:C}}),ee=k(),te=k({}),{componentRef:we,elementRef:re}=Ze("containerRef"),{componentRef:ye,elementRef:D}=Ze("containerRef"),{componentRef:ge,elementRef:P}=Ze("viewportRef"),{componentRef:F,elementRef:A}=Ze("containerRef"),j=b(()=>N.value?Ue.value?P.value:D.value:re.value),N=b(()=>Q.value.y||e.stickyHeader||Ue.value||Q.value.x&&V.value.length===0),H=ve(new Map),oe=k();ne([I,H],([a,r])=>{if(a.length>0){const i=[];a.forEach(h=>{const g=r.get(h);g&&i.push(g)}),oe.value=i}else oe.value=void 0});const U=new Map,B=k([]),pe=k([]);ne([n,oe],([a,r])=>{var i;const h=fn((i=r??a)!=null?i:[],U);B.value=h.dataColumns,pe.value=h.groupColumns},{immediate:!0,deep:!0});const be=b(()=>["tl","top","tr"].includes(e.pagePosition)),$e=k(!1),Re=k(!1),al=k(!1);Ha(()=>{var a,r,i;let h=!1,g=!1,C=!1;((a=e.rowSelection)!=null&&a.fixed||(r=e.expandable)!=null&&r.fixed||(i=e.draggable)!=null&&i.fixed)&&(h=!0);for(const K of B.value)K.fixed==="left"?(h=!0,C=!0):K.fixed==="right"&&(g=!0);h!==$e.value&&($e.value=h),g!==Re.value&&(Re.value=g),C!==al.value&&(al.value=C)});const Kt=b(()=>{for(const a of B.value)if(a.ellipsis)return!0;return!1}),Oe=a=>{const r={type:a,page:Fe.value,pageSize:ke.value,sorter:Pe.value,filters:xe.value,dragTarget:a==="drag"?ue.data:void 0};t("change",kl.value,r,Ce.value)},wl=(a,r)=>{Bt.value=xt(ce({},xe.value),{[a]:r}),t("filterChange",a,r),Oe("filter")},pl=(a,r)=>{Lt.value=r?{field:a,direction:r}:void 0,t("sorterChange",a,r),Oe("sorter")},{_filters:Bt,computedFilters:xe,resetFilters:jt,clearFilters:Dt}=Bn({columns:B,onFilterChange:wl}),{_sorter:Lt,computedSorter:Pe,resetSorters:Tt,clearSorters:zt}=jn({columns:B,onSorterChange:pl}),$l=new Set,Wt=b(()=>{const a=[];$l.clear();const r=i=>{if(Ne(i)&&i.length>0)for(const h of i)a.push(h[m.value]),h.disabled&&$l.add(h[m.value]),h.children&&r(h.children)};return r(e.data),a}),Nt=b(()=>{const a=[],r=i=>{for(const h of i)a.push(h.key),h.children&&r(h.children)};return r(V.value),a}),Rl=b(()=>{const a=[],r=i=>{for(const h of i)h.disabled||a.push(h.key),h.children&&r(h.children)};return r(V.value),a}),{isRadio:Vn,selectedRowKeys:Vt,currentSelectedRowKeys:Ol,handleSelect:Mt,handleSelectAllLeafs:Ht,handleSelectAll:Gt,select:qt,selectAll:Ut,clearSelected:Yt}=bn({selectedKeys:y,defaultSelectedKeys:u,rowSelection:o,currentAllRowKeys:Nt,currentAllEnabledRowKeys:Rl,emit:t}),{expandedRowKeys:Pl,handleExpand:Xt,expand:Zt,expandAll:Jt}=xn({expandedKeys:_,defaultExpandedKeys:S,defaultExpandAllRows:x,expandable:s,allRowKeys:Wt,emit:t}),nl=ve({}),Qt=(a,r)=>{a&&(nl[r.key]=a)},ea=a=>{var r,i;for(const h of Object.keys(xe.value)){const g=xe.value[h],C=U.get(h);if(C&&((r=C.filterable)!=null&&r.filter)&&g.length>0){const K=(i=C.filterable)==null?void 0:i.filter(g,a.raw);if(!K)return K}}return!0},{dragType:Ie,dragState:ue,handleDragStart:la,handleDragEnter:ta,handleDragLeave:Mn,handleDragover:aa,handleDragEnd:na,handleDrop:ra}=An(E),{resizingColumn:oa,columnWidth:Ve,handleThMouseDown:ua}=Kn(te,t),Il=b(()=>{var a;const r=i=>{const h=[];for(const g of i){const C={raw:g,key:g[e.rowKey],disabled:g.disabled,expand:g.expand,isLeaf:g.isLeaf};g.children?(C.isLeaf=!1,C.children=r(g.children)):e.loadMore&&!g.isLeaf?(C.isLeaf=!1,nl[C.key]&&(C.children=r(nl[C.key]))):C.isLeaf=!0,C.hasSubtree=!!(C.children?!e.hideExpandButtonOnEmpty||C.children.length>0:e.loadMore&&!C.isLeaf),h.push(C)}return h};return r((a=e.data)!=null?a:[])}),Fl=b(()=>{const a=r=>r.filter(i=>ea(i)?(i.children&&(i.children=a(i.children)),!0):!1);return Object.keys(xe.value).length>0?a(Il.value):Il.value}),Ce=b(()=>{var a,r;const i=[...Fl.value];if(i.length>0){if((a=Pe.value)!=null&&a.field){const h=U.get(Pe.value.field);if(h&&((r=h.sortable)==null?void 0:r.sorter)!==!0){const{field:g,direction:C}=Pe.value;i.sort((K,z)=>{var Y;const ie=K.raw[g],Xe=z.raw[g];if((Y=h.sortable)!=null&&Y.sorter&&q(h.sortable.sorter))return h.sortable.sorter(K.raw,z.raw,{dataIndex:g,direction:C});const Ae=ie>Xe?1:-1;return C==="descend"?-Ae:Ae})}}if(ue.dragging&&ue.targetPath.length>0){const h=ot(i,ue.sourcePath);ot(i,ue.targetPath,h)}}return i}),{page:Fe,pageSize:ke,handlePageChange:ia,handlePageSizeChange:da}=Cn(e,t),sa=b(()=>{var a,r;return(r=(a=o.value)==null?void 0:a.onlyCurrent)!=null?r:!1});ne(Fe,(a,r)=>{a!==r&&sa.value&&Yt()});const V=b(()=>e.pagination&&Ce.value.length>ke.value?Ce.value.slice((Fe.value-1)*ke.value,Fe.value*ke.value):Ce.value),kl=b(()=>V.value.map(a=>a.raw)),ca=()=>B.value.reduce((a,r,i)=>{if(r.dataIndex)if(i===0)a[r.dataIndex]=e.summaryText;else{let h=0,g=!1;V.value.forEach(C=>{r.dataIndex&&(se(C.raw[r.dataIndex])?h+=C.raw[r.dataIndex]:!Te(C.raw[r.dataIndex])&&!_t(C.raw[r.dataIndex])&&(g=!0))}),a[r.dataIndex]=g?"":h}return a},{}),El=a=>{if(a&&a.length>0)return a.map(r=>({raw:r,key:r[e.rowKey]}))},_e=b(()=>{if(e.summary)return q(e.summary)?El(e.summary({columns:B.value,data:kl.value})):El([ca()])}),Me=k(0),He=k(!0),Ge=k(!0),rl=()=>{let a=!0,r=!0;const i=j.value;i&&(a=Me.value===0,r=Math.ceil(Me.value+i.offsetWidth)>=i.scrollWidth),a!==He.value&&(He.value=a),r!==Ge.value&&(Ge.value=r)},fa=()=>He.value&&Ge.value?`${v}-scroll-position-both`:He.value?`${v}-scroll-position-left`:Ge.value?`${v}-scroll-position-right`:`${v}-scroll-position-middle`,va=()=>{const a=[];return $e.value&&a.push(`${v}-has-fixed-col-left`),Re.value&&a.push(`${v}-has-fixed-col-right`),a},Al=a=>{a.target.scrollLeft!==Me.value&&(Me.value=a.target.scrollLeft),rl()},Kl=a=>{Al(a);const{scrollLeft:r}=a.target;A.value&&(A.value.scrollLeft=r),ee.value&&(ee.value.scrollLeft=r)},Bl=(a,r)=>{t("rowClick",a.raw,r)},jl=(a,r,i)=>{t("cellClick",a.raw,r,i)},ha=(a,r)=>{t("headerClick",a,r)},T=b(()=>{var a,r;const i=[],h=$e.value||Re.value;let g,C,K;((a=e.draggable)==null?void 0:a.type)==="handle"&&(g={name:"drag-handle",title:e.draggable.title,width:e.draggable.width,fixed:e.draggable.fixed||h},i.push(g)),e.expandable&&(C={name:"expand",title:e.expandable.title,width:e.expandable.width,fixed:e.expandable.fixed||h},i.push(C)),e.rowSelection&&(K={name:e.rowSelection.type==="radio"?"selection-radio":"selection-checkbox",title:e.rowSelection.title,width:e.rowSelection.width,fixed:e.rowSelection.fixed||h},i.push(K)),!al.value&&i.length>0&&i[i.length-1].fixed&&(i[i.length-1].isLastLeftFixed=!0);const z=(r=e.components)==null?void 0:r.operations;return q(z)?z({dragHandle:g,expand:C,selection:K}):i}),ma=b(()=>{var a,r,i,h;if(Q.value.x){const g={width:se((a=e.scroll)==null?void 0:a.x)?`${(r=e.scroll)==null?void 0:r.x}px`:(i=e.scroll)==null?void 0:i.x};return(h=e.scroll)!=null&&h.minWidth&&(g.minWidth=se(e.scroll.minWidth)?`${e.scroll.minWidth}px`:e.scroll.minWidth),g}}),qe=b(()=>{var a,r,i,h;if(Q.value.x&&V.value.length>0){const g={width:se((a=e.scroll)==null?void 0:a.x)?`${(r=e.scroll)==null?void 0:r.x}px`:(i=e.scroll)==null?void 0:i.x};return(h=e.scroll)!=null&&h.minWidth&&(g.minWidth=se(e.scroll.minWidth)?`${e.scroll.minWidth}px`:e.scroll.minWidth),g}});Ot(Se,ve({loadMore:c,addLazyLoadData:Qt,slots:l,sorter:Pe,filters:xe,filterIconAlignLeft:f,resizingColumn:oa,checkStrictly:L,currentAllEnabledRowKeys:Rl,currentSelectedRowKeys:Ol,addColumn:(a,r)=>{H.set(a,r)},removeColumn:a=>{H.delete(a)},onSelectAll:Gt,onSelect:Mt,onSelectAllLeafs:Ht,onSorterChange:pl,onFilterChange:wl,onThMouseDown:ua}));const Dl=b(()=>[v,`${v}-size-${e.size}`,{[`${v}-border`]:p.value.wrapper,[`${v}-border-cell`]:p.value.cell,[`${v}-border-header-cell`]:!p.value.cell&&p.value.headerCell,[`${v}-border-body-cell`]:!p.value.cell&&p.value.bodyCell,[`${v}-stripe`]:e.stripe,[`${v}-hover`]:e.hoverable,[`${v}-dragging`]:ue.dragging,[`${v}-type-selection`]:!!e.rowSelection,[`${v}-empty`]:e.data&&V.value.length===0,[`${v}-layout-fixed`]:e.tableLayoutFixed||Q.value.x||N.value||Kt.value}]),ya=b(()=>[`${v}-pagination`,{[`${v}-pagination-left`]:e.pagePosition==="tl"||e.pagePosition==="bl",[`${v}-pagination-center`]:e.pagePosition==="top"||e.pagePosition==="bottom",[`${v}-pagination-right`]:e.pagePosition==="tr"||e.pagePosition==="br",[`${v}-pagination-top`]:be.value}]),ga=b(()=>{const a=va();return Q.value.x&&a.push(fa()),N.value&&a.push(`${v}-scroll-y`),a}),Ue=b(()=>!!e.virtualListProps),ol=k({}),Ll=()=>{const a={};for(const r of Object.keys(te.value))a[r]=te.value[r].offsetWidth;ol.value=a},Ee=k(!1),Tl=()=>D.value?D.value.offsetWidth>D.value.clientWidth:!1,ba=()=>{const a=Tl();Ee.value!==a&&(Ee.value=a),rl(),Ll()};St(()=>{Ee.value=Tl(),Ll()});const xa=b(()=>le(e.loading)?e.loading:{loading:e.loading}),Ca=()=>d(ae,{empty:!0},{default:()=>[d(fe,{colSpan:B.value.length+T.value.length},{default:()=>{var a,r;return[(r=(a=l.empty)==null?void 0:a.call(l))!=null?r:d(Ya,null,null)]}})]}),_a=a=>{var r;if(a.expand)return q(a.expand)?a.expand():a.expand;if(l["expand-row"])return l["expand-row"]({record:a.raw});if((r=e.expandable)!=null&&r.expandedRowRender)return e.expandable.expandedRowRender(a.raw)},zl=b(()=>[].concat(T.value,B.value)),Sa=b(()=>e.spanAll?zl.value:B.value),{tableSpan:Wl,removedCells:Nl}=yt({spanMethod:w,data:V,columns:Sa}),{tableSpan:Vl,removedCells:Ml}=yt({spanMethod:$,data:V,columns:zl}),Ye=a=>{if(!(!Ue.value||!a||!ol.value[a]))return{width:`${ol.value[a]}px`}},wa=(a,r)=>d(ae,{key:`table-summary-${r}`,class:[`${v}-tr-summary`,q(e.rowClass)?e.rowClass(a.raw,r):e.rowClass],onClick:i=>Bl(a,i)},{default:()=>[T.value.map((i,h)=>{var g;const C=`${r}-${h}`,[K,z]=(g=Vl.value[C])!=null?g:[1,1];if(Ml.value.includes(C))return null;const Y=Ye(i.name);return d(vt,{style:Y,operationColumn:i,operations:T.value,record:a,rowSpan:K,colSpan:z,summary:!0},null)}),B.value.map((i,h)=>{var g;const C=`${r}-${T.value.length+h}`,[K,z]=(g=Vl.value[C])!=null?g:[1,1];if(Ml.value.includes(C))return null;const Y=Ye(i.dataIndex);return d(fe,{key:`td-${C}`,style:Y,rowIndex:r,record:a,column:i,operations:T.value,dataColumns:B.value,rowSpan:K,colSpan:z,summary:!0,onClick:ie=>jl(a,i,ie)},{td:l.td,cell:l["summary-cell"]})})],tr:l.tr}),Hl=()=>_e.value?d("tfoot",null,[_e.value.map((a,r)=>wa(a,r))]):null,Gl=(a,r=!0)=>{var i,h,g,C,K;const z=a.key,Y=Pl.value.includes(z);return d("button",{type:"button",class:`${v}-expand-btn`,onClick:ie=>{Xt(z,a.raw),r&&ie.stopPropagation()}},[(K=(C=(i=l["expand-icon"])==null?void 0:i.call(l,{expanded:Y,record:a.raw}))!=null?C:(g=(h=e.expandable)==null?void 0:h.icon)==null?void 0:g.call(h,Y,a.raw))!=null?K:Y?d(pt,null,null):d(wt,null,null)])},pa=(a,{indentSize:r,indexPath:i,allowDrag:h,expandContent:g})=>{var C;if(a.hasSubtree)return(C=a.children)==null?void 0:C.map((K,z)=>ul(K,z,{indentSize:r,indexPath:i,allowDrag:h}));if(g){const K=j.value;return d(ae,{key:`${a.key}-expand`,expand:!0},{default:()=>[d(fe,{isFixedExpand:$e.value||Re.value,containerWidth:K==null?void 0:K.clientWidth,colSpan:B.value.length+T.value.length},Nn(g)?g:{default:()=>[g]})]})}return null},ul=(a,r,{indentSize:i=0,indexPath:h,allowDrag:g=!0}={})=>{var C;const K=a.key,z=(h??[]).concat(r),Y=_a(a),ie=Pl.value.includes(K),Xe=ue.sourceKey===a.key,Ae=Ie.value?{draggable:g,onDragstart:W=>{g&&la(W,a.key,z,a.raw)},onDragend:W=>{g&&na(W)}}:{},Oa=Ie.value?{onDragenter:W=>{g&&ta(W,z)},onDragover:W=>{g&&aa(W)},onDrop:W=>{g&&(Oe("drag"),ra(W))}}:{};return d(ze,null,[d(ae,Z({key:K,class:[{[`${v}-tr-draggable`]:Ie.value==="row",[`${v}-tr-drag`]:Xe},q(e.rowClass)?e.rowClass(a,r):e.rowClass],rowIndex:r,record:a,checked:(C=Vt.value)==null?void 0:C.includes(K),onClick:W=>Bl(a,W)},Ie.value==="row"?Ae:{},Oa),{default:()=>[T.value.map((W,de)=>{var Ke;const Be=`${r}-${de}`,[il,dl]=e.spanAll?(Ke=Wl.value[Be])!=null?Ke:[1,1]:[1,1];if(e.spanAll&&Nl.value.includes(Be))return null;const sl=Ye(W.name);return d(vt,Z({key:`operation-td-${de}`,style:sl,operationColumn:W,operations:T.value,record:a,hasExpand:!!Y,selectedRowKeys:Ol.value,rowSpan:il,colSpan:dl,renderExpandBtn:Gl},Ie.value==="handle"?Ae:{}),{"drag-handle-icon":l["drag-handle-icon"]})}),B.value.map((W,de)=>{var Ke;const Be=`${r}-${e.spanAll?T.value.length+de:de}`,[il,dl]=(Ke=Wl.value[Be])!=null?Ke:[1,1];if(Nl.value.includes(Be))return null;const sl=de===0?{showExpandBtn:a.hasSubtree,indentSize:a.hasSubtree?i-20:i}:{},Pa=Ye(W.dataIndex);return d(fe,Z({key:`td-${de}`,style:Pa,rowIndex:r,record:a,column:W,operations:T.value,dataColumns:B.value,rowSpan:il,renderExpandBtn:Gl,colSpan:dl},sl,{onClick:Ia=>jl(a,W,Ia)}),{td:l.td})})],tr:l.tr}),ie&&pa(a,{indentSize:i+e.indentSize,indexPath:z,allowDrag:g&&!Xe,expandContent:Y})])},ql=()=>{const a=V.value.some(r=>!!r.hasSubtree);return d(el,null,{default:()=>[V.value.length>0?V.value.map((r,i)=>ul(r,i,{indentSize:a?20:0})):Ca()],tbody:l.tbody})},Ul=()=>d(Qe,null,{default:()=>[pe.value.map((a,r)=>d(ae,{key:`header-row-${r}`},{default:()=>[r===0&&T.value.map((i,h)=>{var g;return d(En,{key:`operation-th-${h}`,ref:C=>{C!=null&&C.$el&&i.name&&(te.value[i.name]=C.$el)},operationColumn:i,operations:T.value,selectAll:!!(i.name==="selection-checkbox"&&((g=e.rowSelection)!=null&&g.showCheckedAll)),rowSpan:pe.value.length},null)}),a.map((i,h)=>{const g=e.columnResizable&&!!i.dataIndex&&h<a.length-1;return d(ll,{key:`th-${h}`,ref:C=>{C!=null&&C.$el&&i.dataIndex&&(te.value[i.dataIndex]=C.$el)},column:i,operations:T.value,dataColumns:B.value,resizable:g,onClick:C=>ha(i,C)},{th:l.th})})]}))],thead:l.thead}),$a=()=>{if(N.value){const a={};Ee.value&&(a.overflowY="scroll"),se(e.stickyHeader)&&(a.top=`${e.stickyHeader}px`);const r=G.value?lt:"div";return d(ze,null,[e.showHeader&&d(r,Z({ref:F,class:[`${v}-header`,{[`${v}-header-sticky`]:e.stickyHeader}],style:a},R.value?ce({hide:V.value.length!==0,disableVertical:!0},M.value):void 0),{default:()=>[d("table",{class:`${v}-element`,style:ma.value,cellpadding:0,cellspacing:0},[d(Je,{dataColumns:B.value,operations:T.value,columnWidth:Ve},null),Ul()])]}),d(tt,{onResize:ba},{default:()=>{var i,h;return[Ue.value?d(Ua,Z({ref:g=>{g!=null&&g.$el&&(D.value=g.$el)},class:`${v}-body`,data:V.value,itemKey:"_key",component:{list:"table",content:"tbody"},listAttrs:{class:`${v}-element`,style:qe.value},paddingPosition:"list"},e.virtualListProps,{onScroll:Kl}),{item:({item:g,index:C})=>ul(g,C)}):d(r,Z({ref:ye,class:`${v}-body`,style:{maxHeight:se((i=e.scroll)==null?void 0:i.y)?`${(h=e.scroll)==null?void 0:h.y}px`:"100%"}},R.value?ce({outerStyle:{display:"flex",minHeight:"0"}},M.value):void 0,{onScroll:Kl}),{default:()=>[d("table",{class:`${v}-element`,style:qe.value,cellpadding:0,cellspacing:0},[V.value.length!==0&&d(Je,{dataColumns:B.value,operations:T.value,columnWidth:Ve},null),ql()])]})]}}),_e.value&&_e.value.length&&d("div",{ref:ee,class:`${v}-tfoot`,style:{overflowY:Ee.value?"scroll":"hidden"}},[d("table",{class:`${v}-element`,style:qe.value,cellpadding:0,cellspacing:0},[d(Je,{dataColumns:B.value,operations:T.value,columnWidth:Ve},null),Hl()])])])}return d(tt,{onResize:()=>rl()},{default:()=>[d("table",{class:`${v}-element`,cellpadding:0,cellspacing:0,style:qe.value},[d(Je,{dataColumns:B.value,operations:T.value,columnWidth:Ve},null),e.showHeader&&Ul(),ql(),_e.value&&_e.value.length&&Hl()])]})},Yl=a=>{var r;const i=(r=e.scroll)!=null&&r.maxHeight?{maxHeight:e.scroll.maxHeight}:void 0,h=G.value?lt:"div";return d(ze,null,[d("div",{class:[`${v}-container`,ga.value]},[d(h,Z({ref:we,class:[`${v}-content`,{[`${v}-content-scroll-x`]:!N.value}],style:i},R.value?ce({outerStyle:{height:"100%"}},M.value):void 0,{onScroll:Al}),{default:()=>[a?d("table",{class:`${v}-element`,cellpadding:0,cellspacing:0},[a()]):$a()]})]),l.footer&&d("div",{class:`${v}-footer`},[l.footer()])])},Xl=()=>{var a,r;const i=le(e.pagination)?qa(e.pagination,["current","pageSize","defaultCurrent","defaultPageSize"]):{};return d("div",{class:ya.value},[(a=l["pagination-left"])==null?void 0:a.call(l),d(ln,Z({total:Fl.value.length,current:Fe.value,pageSize:ke.value,onChange:h=>{ia(h),Oe("pagination")},onPageSizeChange:h=>{da(h),Oe("pagination")}},i),null),(r=l["pagination-right"])==null?void 0:r.call(l)])},Ra=b(()=>{var a,r;if($t((a=e.scroll)==null?void 0:a.y))return{height:(r=e.scroll)==null?void 0:r.y}});return{render:()=>{var a;return l.default?d("div",{class:Dl.value},[Yl(l.default)]):(O.value=(a=l.columns)==null?void 0:a.call(l),d("div",{class:Dl.value,style:Ra.value},[O.value,d(Ga,xa.value,{default:()=>[e.pagination!==!1&&(V.value.length>0||Ce.value.length>0)&&be.value&&Xl(),Yl(),e.pagination!==!1&&(V.value.length>0||Ce.value.length>0)&&!be.value&&Xl()]})]))},selfExpand:Zt,selfExpandAll:Jt,selfSelect:qt,selfSelectAll:Ut,selfResetFilters:jt,selfClearFilters:Dt,selfResetSorters:Tt,selfClearSorters:zt}},methods:{selectAll(e){return this.selfSelectAll(e)},select(e,t){return this.selfSelect(e,t)},expandAll(e){return this.selfExpandAll(e)},expand(e,t){return this.selfExpand(e,t)},resetFilters(e){return this.selfResetFilters(e)},clearFilters(e){return this.selfClearFilters(e)},resetSorters(){return this.selfResetSorters()},clearSorters(){return this.selfClearSorters()}},render(){return this.render()}});const X=(e,t)=>{const l=Xa(e,t),n=k(l.value);return ne(l,(m,o)=>{Cl(m,o)||(n.value=m)}),n};var gl=J({name:"TableColumn",props:{dataIndex:String,title:String,width:Number,align:{type:String},fixed:{type:String},ellipsis:{type:Boolean,default:!1},sortable:{type:Object,default:void 0},filterable:{type:Object,default:void 0},cellClass:{type:[String,Array,Object]},headerCellClass:{type:[String,Array,Object]},bodyCellClass:{type:[String,Array,Object,Function]},summaryCellClass:{type:[String,Array,Object,Function]},cellStyle:{type:Object},headerCellStyle:{type:Object},bodyCellStyle:{type:[Object,Function]},summaryCellStyle:{type:[Object,Function]},index:{type:Number},tooltip:{type:[Boolean,Object],default:!1}},setup(e,{slots:t}){var l;const{dataIndex:n,title:m,width:o,align:s,fixed:c,ellipsis:f,index:y}=xl(e),u=X(e,"sortable"),_=X(e,"filterable"),S=X(e,"cellClass"),x=X(e,"headerCellClass"),w=X(e,"bodyCellClass"),E=X(e,"summaryCellClass"),$=X(e,"cellStyle"),R=X(e,"headerCellStyle"),v=X(e,"bodyCellStyle"),p=X(e,"summaryCellStyle"),O=X(e,"tooltip"),I=Za(),L=he(Se,{}),G=he(ut,void 0),{children:M,components:Q}=Rt("TableColumn"),ee=ve(new Map);Ot(ut,{addChild:(D,ge)=>{ee.set(D,ge)},removeChild:D=>{ee.delete(D)}});const re=k();ne([Q,ee],([D,ge])=>{if(D.length>0){const P=[];D.forEach(F=>{const A=ge.get(F);A&&P.push(A)}),re.value=P}else re.value=void 0});const ye=ve({dataIndex:n,title:m,width:o,align:s,fixed:c,ellipsis:f,sortable:u,filterable:_,cellClass:S,headerCellClass:x,bodyCellClass:w,summaryCellClass:E,cellStyle:$,headerCellStyle:R,bodyCellStyle:v,summaryCellStyle:p,index:y,tooltip:O,children:re,slots:t});return I&&(G?G.addChild(I.uid,ye):(l=L.addColumn)==null||l.call(L,I.uid,ye)),Ja(()=>{var D;I&&(G?G.removeChild(I.uid):(D=L.removeColumn)==null||D.call(L,I.uid))}),()=>{var D;return M.value=(D=t.default)==null?void 0:D.call(t),M.value}}});const Zn=Object.assign(yl,{Thead:Qe,Tbody:el,Tr:ae,Th:ll,Td:fe,Column:gl,install:(e,t)=>{Qa(e,t);const l=en(t);e.component(l+yl.name,yl),e.component(l+Qe.name,Qe),e.component(l+el.name,el),e.component(l+ae.name,ae),e.component(l+ll.name,ll),e.component(l+fe.name,fe),e.component(l+gl.name,gl)}});export{Zn as T};
