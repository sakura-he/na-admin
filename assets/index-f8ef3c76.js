import{e as Ke,f as Ue,a as Ye,c as Xe,s as Je,g as Qe}from"./index-89a35e88.js";import{T as Ze,v as Re}from"./runtime-dom.esm-bundler-a8993a42.js";import{k as et,b as tt,l as nt,o as le,m as rt,a as ot}from"./use-popup-manager-b0a74f9a.js";import{e as b,v as we,S as X,d as _e,A as U,am as ge,t as it,c as S,y as se,p as lt,r as st,aq as at,b as y,ap as ut,q as ft,E as ct,F as dt,K as ae}from"./runtime-core.esm-bundler-a91919e4.js";import{o as ht,u as vt,C as mt}from"./use-teleport-container-7d168d59.js";var Oe=function(){if(typeof Map<"u")return Map;function e(t,n){var r=-1;return t.some(function(o,l){return o[0]===n?(r=l,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),o=this.__entries__[r];return o&&o[1]},t.prototype.set=function(n,r){var o=e(this.__entries__,n);~o?this.__entries__[o][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,o=e(r,n);~o&&r.splice(o,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var o=0,l=this.__entries__;o<l.length;o++){var s=l[o];n.call(r,s[1],s[0])}},t}()}(),Y=typeof window<"u"&&typeof document<"u"&&window.document===document,$=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),bt=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind($):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),pt=2;function yt(e,t){var n=!1,r=!1,o=0;function l(){n&&(n=!1,e()),r&&f()}function s(){bt(l)}function f(){var a=Date.now();if(n){if(a-o<pt)return;r=!0}else n=!0,r=!1,setTimeout(s,t);o=a}return f}var wt=20,_t=["top","right","bottom","left","width","height","size","weight"],gt=typeof MutationObserver<"u",Ot=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=yt(this.refresh.bind(this),wt)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Y||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),gt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Y||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,o=_t.some(function(l){return!!~r.indexOf(l)});o&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Ee=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},C=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||$},Ce=V(0,0,0,0);function W(e){return parseFloat(e)||0}function ue(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,o){var l=e["border-"+o+"-width"];return r+W(l)},0)}function Et(e){for(var t=["top","right","bottom","left"],n={},r=0,o=t;r<o.length;r++){var l=o[r],s=e["padding-"+l];n[l]=W(s)}return n}function Ct(e){var t=e.getBBox();return V(0,0,t.width,t.height)}function Mt(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Ce;var r=C(e).getComputedStyle(e),o=Et(r),l=o.left+o.right,s=o.top+o.bottom,f=W(r.width),a=W(r.height);if(r.boxSizing==="border-box"&&(Math.round(f+l)!==t&&(f-=ue(r,"left","right")+l),Math.round(a+s)!==n&&(a-=ue(r,"top","bottom")+s)),!Pt(e)){var d=Math.round(f+l)-t,c=Math.round(a+s)-n;Math.abs(d)!==1&&(f-=d),Math.abs(c)!==1&&(a-=c)}return V(o.left,o.top,f,a)}var Tt=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof C(e).SVGGraphicsElement}:function(e){return e instanceof C(e).SVGElement&&typeof e.getBBox=="function"}}();function Pt(e){return e===C(e).document.documentElement}function St(e){return Y?Tt(e)?Ct(e):Mt(e):Ce}function xt(e){var t=e.x,n=e.y,r=e.width,o=e.height,l=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(l.prototype);return Ee(s,{x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:o+n,left:t}),s}function V(e,t,n,r){return{x:e,y:t,width:n,height:r}}var At=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=V(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=St(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),zt=function(){function e(t,n){var r=xt(n);Ee(this,{target:t,contentRect:r})}return e}(),Bt=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new Oe,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof C(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new At(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof C(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new zt(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Me=typeof WeakMap<"u"?new WeakMap:new Oe,Te=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Ot.getInstance(),r=new Bt(t,n,this);Me.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){Te.prototype[e]=function(){var t;return(t=Me.get(this))[e].apply(t,arguments)}});var Pe=function(){return typeof $.ResizeObserver<"u"?$.ResizeObserver:Te}();const Se=typeof window>"u"?global:window,Ft=Se.requestAnimationFrame,fe=Se.cancelAnimationFrame;function Lt(e){let t=0;const n=(...r)=>{t&&fe(t),t=Ft(()=>{e(...r),t=0})};return n.cancel=()=>{fe(t),t=0},n}var jt=Object.defineProperty,ce=Object.getOwnPropertySymbols,Dt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,de=(e,t,n)=>t in e?jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||(t={}))Dt.call(t,n)&&de(e,n,t[n]);if(ce)for(var n of ce(t))$t.call(t,n)&&de(e,n,t[n]);return e};const Wt=()=>({width:document.documentElement.clientWidth||window.innerWidth,height:document.documentElement.clientHeight||window.innerHeight}),he=(e,t)=>{var n,r;const o=e.getBoundingClientRect();return{top:o.top,bottom:o.bottom,left:o.left,right:o.right,scrollTop:o.top-t.top,scrollBottom:o.bottom-t.top,scrollLeft:o.left-t.left,scrollRight:o.right-t.left,width:(n=e.offsetWidth)!=null?n:e.clientWidth,height:(r=e.offsetHeight)!=null?r:e.clientHeight}},Vt=e=>{switch(e){case"top":case"tl":case"tr":return"top";case"bottom":case"bl":case"br":return"bottom";case"left":case"lt":case"lb":return"left";case"right":case"rt":case"rb":return"right";default:return"top"}},D=(e,t)=>{switch(t){case"top":switch(e){case"bottom":return"top";case"bl":return"tl";case"br":return"tr";default:return e}case"bottom":switch(e){case"top":return"bottom";case"tl":return"bl";case"tr":return"br";default:return e}case"left":switch(e){case"right":return"left";case"rt":return"lt";case"rb":return"lb";default:return e}case"right":switch(e){case"left":return"right";case"lt":return"rt";case"lb":return"rb";default:return e}default:return e}},kt=(e,t,{containerRect:n,triggerRect:r,popupRect:o,offset:l,translate:s})=>{const f=Vt(e),a=Wt(),d={top:n.top+t.top,bottom:a.height-(n.top+t.top+o.height),left:n.left+t.left,right:a.width-(n.left+t.left+o.width)};let c=e;if(f==="top"&&d.top<0)if(r.top>o.height)t.top=-n.top;else{const v=A("bottom",r,o,{offset:l,translate:s});a.height-(n.top+v.top+o.height)>0&&(c=D(e,"bottom"),t.top=v.top)}if(f==="bottom"&&d.bottom<0)if(a.height-r.bottom>o.height)t.top=-n.top+(a.height-o.height);else{const v=A("top",r,o,{offset:l,translate:s});n.top+v.top>0&&(c=D(e,"top"),t.top=v.top)}if(f==="left"&&d.left<0)if(r.left>o.width)t.left=-n.left;else{const v=A("right",r,o,{offset:l,translate:s});a.width-(n.left+v.left+o.width)>0&&(c=D(e,"right"),t.left=v.left)}if(f==="right"&&d.right<0)if(a.width-r.right>o.width)t.left=-n.left+(a.width-o.width);else{const v=A("left",r,o,{offset:l,translate:s});n.left+v.left>0&&(c=D(e,"left"),t.left=v.left)}return(f==="top"||f==="bottom")&&(d.left<0?t.left=-n.left:d.right<0&&(t.left=-n.left+(a.width-o.width))),(f==="left"||f==="right")&&(d.top<0?t.top=-n.top:d.bottom<0&&(t.top=-n.top+(a.height-o.height))),{popupPosition:t,position:c}},A=(e,t,n,{offset:r=0,translate:o=[0,0]}={})=>{var l;const s=(l=Ke(o)?o:o[e])!=null?l:[0,0];switch(e){case"top":return{left:t.scrollLeft+Math.round(t.width/2)-Math.round(n.width/2)+s[0],top:t.scrollTop-n.height-r+s[1]};case"tl":return{left:t.scrollLeft+s[0],top:t.scrollTop-n.height-r+s[1]};case"tr":return{left:t.scrollRight-n.width+s[0],top:t.scrollTop-n.height-r+s[1]};case"bottom":return{left:t.scrollLeft+Math.round(t.width/2)-Math.round(n.width/2)+s[0],top:t.scrollBottom+r+s[1]};case"bl":return{left:t.scrollLeft+s[0],top:t.scrollBottom+r+s[1]};case"br":return{left:t.scrollRight-n.width+s[0],top:t.scrollBottom+r+s[1]};case"left":return{left:t.scrollLeft-n.width-r+s[0],top:t.scrollTop+Math.round(t.height/2)-Math.round(n.height/2)+s[1]};case"lt":return{left:t.scrollLeft-n.width-r+s[0],top:t.scrollTop+s[1]};case"lb":return{left:t.scrollLeft-n.width-r+s[0],top:t.scrollBottom-n.height+s[1]};case"right":return{left:t.scrollRight+r+s[0],top:t.scrollTop+Math.round(t.height/2)-Math.round(n.height/2)+s[1]};case"rt":return{left:t.scrollRight+r+s[0],top:t.scrollTop+s[1]};case"rb":return{left:t.scrollRight+r+s[0],top:t.scrollBottom-n.height+s[1]};default:return{left:0,top:0}}},Ht=e=>{let t="0";["top","bottom"].includes(e)?t="50%":["left","lt","lb","tr","br"].includes(e)&&(t="100%");let n="0";return["left","right"].includes(e)?n="50%":["top","tl","tr","lt","rt"].includes(e)&&(n="100%"),`${t} ${n}`},It=(e,t,n,r,{offset:o=0,translate:l=[0,0],customStyle:s={},autoFitPosition:f=!1}={})=>{let a=e,d=A(e,n,r,{offset:o,translate:l});if(f){const v=kt(e,d,{containerRect:t,popupRect:r,triggerRect:n,offset:o,translate:l});d=v.popupPosition,a=v.position}return{style:x({left:`${d.left}px`,top:`${d.top}px`},s),position:a}},Gt=(e,t,n,{customStyle:r={}})=>{if(["top","tl","tr","bottom","bl","br"].includes(e)){let l=Math.abs(t.scrollLeft+t.width/2-n.scrollLeft);return l>n.width-8&&(t.width>n.width?l=n.width/2:l=n.width-8),["top","tl","tr"].includes(e)?x({left:`${l}px`,bottom:"0",transform:"translate(-50%,50%) rotate(45deg)"},r):x({left:`${l}px`,top:"0",transform:"translate(-50%,-50%) rotate(45deg)"},r)}let o=Math.abs(t.scrollTop+t.height/2-n.scrollTop);return o>n.height-8&&(t.height>n.height?o=n.height/2:o=n.height-8),["left","lt","lb"].includes(e)?x({top:`${o}px`,right:"0",transform:"translate(50%,-50%) rotate(45deg)"},r):x({top:`${o}px`,left:"0",transform:"translate(-50%,-50%) rotate(45deg)"},r)},Nt=e=>e.scrollHeight>e.offsetHeight||e.scrollWidth>e.offsetWidth,ve=e=>{var t;const n=[];let r=e;for(;r&&r!==document.documentElement;)Nt(r)&&n.push(r),r=(t=r.parentElement)!=null?t:void 0;return n},xe=()=>{const e={},t=b(),n=()=>{const r=et(e.value);r!==t.value&&(t.value=r)};return we(()=>n()),X(()=>n()),{children:e,firstElement:t}};var me=_e({name:"ResizeObserver",props:{watchOnUpdated:Boolean},emits:["resize"],setup(e,{emit:t,slots:n}){const{children:r,firstElement:o}=xe();let l;const s=a=>{a&&(l=new Pe(d=>{const c=d[0];t("resize",c)}),l.observe(a))},f=()=>{l&&(l.disconnect(),l=null)};return U(o,a=>{l&&f(),a&&s(a)}),ge(()=>{l&&f()}),()=>{var a;return r.value=(a=n.default)==null?void 0:a.call(n),r.value}}});function qt(e,t){const n=b(e[t]);return X(()=>{const r=e[t];n.value!==r&&(n.value=r)}),n}const be=Symbol("ArcoTrigger"),Kt=({elementRef:e,onResize:t})=>{let n;return{createResizeObserver:()=>{e.value&&(n=new Pe(l=>{const s=l[0];Ue(t)&&t(s)}),n.observe(e.value))},destroyResizeObserver:()=>{n&&(n.disconnect(),n=null)}}};var Ut=Object.defineProperty,Yt=Object.defineProperties,Xt=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable,ye=(e,t,n)=>t in e?Ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zt=(e,t)=>{for(var n in t||(t={}))Jt.call(t,n)&&ye(e,n,t[n]);if(pe)for(var n of pe(t))Qt.call(t,n)&&ye(e,n,t[n]);return e},Rt=(e,t)=>Yt(e,Xt(t));const en=["onClick","onMouseenter","onMouseleave","onFocusin","onFocusout","onContextmenu"];var K=_e({name:"Trigger",inheritAttrs:!1,props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{type:Number,default:0},popupTranslate:{type:[Array,Object]},showArrow:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},popupHoverStay:{type:Boolean,default:!0},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupStyle:{type:Object},animationName:{type:String,default:"fade-in"},duration:{type:[Number,Object]},mouseEnterDelay:{type:Number,default:100},mouseLeaveDelay:{type:Number,default:100},focusDelay:{type:Number,default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},autoFixPosition:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},updateAtScroll:{type:Boolean,default:!1},autoFitTransformOrigin:{type:Boolean,default:!1},hideEmpty:{type:Boolean,default:!1},openedClass:{type:[String,Array,Object]},autoFitPosition:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},preventFocus:{type:Boolean,default:!1}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,show:()=>!0,hide:()=>!0,resize:()=>!0},setup(e,{emit:t,slots:n,attrs:r}){const{popupContainer:o}=it(e),l=Ye("trigger"),s=S(()=>ht(r,en)),f=se(Xe,void 0),a=S(()=>[].concat(e.trigger)),d=new Set,c=se(be,void 0),{children:v,firstElement:M}=xe(),O=b(),J=b(e.defaultPopupVisible),z=b(e.position),Q=b({}),Z=b({}),R=b({}),Ae=b(),w=b({top:0,left:0}),h=S(()=>{var i;return(i=e.popupVisible)!=null?i:J.value}),{teleportContainer:ze,containerRef:k}=vt({popupContainer:o,visible:h,documentContainer:!0}),{zIndex:Be}=tt("popup",{visible:h});let T=0,g=!1;const Fe=()=>{T&&(window.clearTimeout(T),T=0)},H=i=>{if(e.alignPoint){const{pageX:u,pageY:m}=i;w.value={top:m,left:u}}},E=()=>{if(!M.value||!O.value||!k.value)return;const i=k.value.getBoundingClientRect(),u=e.alignPoint?{top:w.value.top,bottom:w.value.top,left:w.value.left,right:w.value.left,scrollTop:w.value.top,scrollBottom:w.value.top,scrollLeft:w.value.left,scrollRight:w.value.left,width:0,height:0}:he(M.value,i),m=()=>he(O.value,i),L=m(),{style:P,position:j}=It(e.position,i,u,L,{offset:e.popupOffset,translate:e.popupTranslate,customStyle:e.popupStyle,autoFitPosition:e.autoFitPosition});e.autoFitTransformOrigin&&(Z.value={transformOrigin:Ht(j)}),e.autoFitPopupMinWidth?P.minWidth=`${u.width}px`:e.autoFitPopupWidth&&(P.width=`${u.width}px`),z.value!==j&&(z.value=j),Q.value=P,e.showArrow&&ae(()=>{R.value=Gt(j,u,m(),{customStyle:e.arrowStyle})})},_=(i,u)=>{if(i===h.value&&T===0)return;const m=()=>{J.value=i,t("update:popupVisible",i),t("popupVisibleChange",i),i&&ae(()=>{E()})};u?(Fe(),i!==h.value&&(T=window.setTimeout(m,u))):m()},Le=i=>{var u;(u=r.onClick)==null||u.call(r,i),!(e.disabled||h.value&&!e.clickToClose)&&(a.value.includes("click")?(H(i),_(!h.value)):a.value.includes("contextMenu")&&h.value&&_(!1))},ee=i=>{var u;(u=r.onMouseenter)==null||u.call(r,i),!(e.disabled||!a.value.includes("hover"))&&(H(i),_(!0,e.mouseEnterDelay))},te=i=>{c==null||c.onMouseenter(i),ee(i)},ne=i=>{var u;(u=r.onMouseleave)==null||u.call(r,i),!(e.disabled||!a.value.includes("hover"))&&_(!1,e.mouseLeaveDelay)},re=i=>{c==null||c.onMouseleave(i),ne(i)},je=i=>{var u;(u=r.onFocusin)==null||u.call(r,i),!(e.disabled||!a.value.includes("focus"))&&_(!0,e.focusDelay)},De=i=>{var u;(u=r.onFocusout)==null||u.call(r,i),!(e.disabled||!a.value.includes("focus"))&&e.blurToClose&&_(!1)},$e=i=>{var u;(u=r.onContextmenu)==null||u.call(r,i),!(e.disabled||!a.value.includes("contextMenu")||h.value&&!e.clickToClose)&&(H(i),_(!h.value),i.preventDefault())};lt(be,st({onMouseenter:te,onMouseleave:re,addChildRef:i=>{d.add(i),c==null||c.addChildRef(i)},removeChildRef:i=>{d.delete(i),c==null||c.removeChildRef(i)}}));const I=()=>{ot(document.documentElement,"mousedown",G),g=!1},oe=qt(n,"content"),We=S(()=>{var i;return e.hideEmpty&&nt((i=oe.value)==null?void 0:i.call(oe))}),G=i=>{var u,m,L;if(!((u=M.value)!=null&&u.contains(i.target)||(m=O.value)!=null&&m.contains(i.target))){for(const P of d)if((L=P.value)!=null&&L.contains(i.target))return;I(),_(!1)}},B=Lt(()=>{h.value&&E()}),N=()=>{h.value&&E()},Ve=()=>{N(),t("resize")},ke=i=>{e.preventFocus&&i.preventDefault()};c==null||c.addChildRef(O);const He=S(()=>h.value?e.openedClass:void 0);let p;U(h,i=>{if(e.clickOutsideToClose&&(!i&&g?I():i&&!g&&(le(document.documentElement,"mousedown",G),g=!0)),e.updateAtScroll||f!=null&&f.updateAtScroll){if(i){p=ve(M.value);for(const u of p)u.addEventListener("scroll",B)}else if(p){for(const u of p)u.removeEventListener("scroll",B);p=void 0}}i&&(q.value=!0)}),U(()=>[e.autoFitPopupWidth,e.autoFitPopupMinWidth],()=>{h.value&&E()});const{createResizeObserver:Ie,destroyResizeObserver:Ge}=Kt({elementRef:k,onResize:N});we(()=>{if(Ie(),h.value&&(E(),e.clickOutsideToClose&&!g&&(le(document.documentElement,"mousedown",G),g=!0),e.updateAtScroll||f!=null&&f.updateAtScroll)){p=ve(M.value);for(const i of p)i.addEventListener("scroll",B)}}),X(()=>{h.value&&E()}),at(()=>{_(!1)}),ge(()=>{if(c==null||c.removeChildRef(O),Ge(),g&&I(),p){for(const i of p)i.removeEventListener("scroll",B);p=void 0}});const q=b(h.value),F=b(!1),ie=()=>{F.value=!0},Ne=()=>{F.value=!1,h.value&&t("show")},qe=()=>{F.value=!1,h.value||(q.value=!1,t("hide"))};return()=>{var i,u;return v.value=(u=(i=n.default)==null?void 0:i.call(n))!=null?u:[],rt(v.value,{class:He.value,onClick:Le,onMouseenter:ee,onMouseleave:ne,onFocusin:je,onFocusout:De,onContextmenu:$e}),y(dt,null,[e.autoFixPosition?y(me,{onResize:Ve},{default:()=>[v.value]}):v.value,y(mt,null,{default:()=>[y(ut,{to:ze.value,disabled:!e.renderToBody},{default:()=>[(!e.unmountOnClose||h.value||q.value)&&!We.value&&y(me,{onResize:N},{default:()=>[y("div",ft({ref:O,class:[`${l}-popup`,`${l}-position-${z.value}`],style:Rt(Zt({},Q.value),{zIndex:Be.value,pointerEvents:F.value?"none":"auto"}),"trigger-placement":z.value,onMouseenter:te,onMouseleave:re,onMousedown:ke},s.value),[y(Ze,{name:e.animationName,duration:e.duration,appear:!0,onBeforeEnter:ie,onAfterEnter:Ne,onBeforeLeave:ie,onAfterLeave:qe},{default:()=>{var m;return[ct(y("div",{class:`${l}-popup-wrapper`,style:Z.value},[y("div",{class:[`${l}-content`,e.contentClass],style:e.contentStyle},[(m=n.content)==null?void 0:m.call(n)]),e.showArrow&&y("div",{ref:Ae,class:[`${l}-arrow`,e.arrowClass],style:R.value},null)]),[[Re,h.value]])]}})])]})]})]})])}}});const un=Object.assign(K,{install:(e,t)=>{Je(e,t);const n=Qe(t);e.component(n+K.name,K)}});export{me as R,un as T,Pe as i,Lt as t,qt as u};
