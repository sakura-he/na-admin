import{bQ as vt,a4 as I,j as g,ae as Y,bR as li,bS as Qe,ad as Sr,af as fe,bT as Mr,bU as wr,m as k,t as ui,bV as ci,a3 as br,bv as w,at as xr,I as z,bW as dt,bX as q,bY as hi,l as U,k as at,au as C,as as Z,bZ as ve,T as pi,b_ as Tr,az as fi,b$ as vi,bI as Ge,c0 as nt,Z as Ar,c1 as di,bf as Rr,c2 as gi,c3 as yi,c4 as mi,c5 as _i,c6 as Si,c7 as Ir,ar as A,G as Dr,aq as Vr,c8 as Mi,aS as wi,bO as gt,c9 as Cr,q as de,bs as bi,aX as Lr,aV as Pr,aZ as Re,bq as xi,aY as Ti,ca as Ai,C as Ri,cb as Ii,bb as Di,ba as Vi,aF as et,cc as Ci,cd as yt,aN as ne,aO as Li,bD as Se,bw as j,ce as Pi,cf as Oi,A as Gi,a7 as Ei,a6 as Ie,cg as zi,ch as Or,ag as ot,ci as Fi,cj as ki,bl as mt,J as st,a5 as lt,ck as Gr,aB as ut,u as ge,cl as Hi,a0 as Q,$ as H,cm as Fe,bn as ke,cn as R,co as He,cp as Zi,bm as Ni,ai as Er,a8 as De,cr as Bi,cs as Wi,ct as Yi,cu as Ui,cv as K,cw as Xi,cx as $i,bt as Ee,cy as zr,cz as Ji,aa as Ki,cA as ji,bo as qi,bc as ae,bp as he,cB as xe,cC as Fr,cD as pe,bG as Qi,bL as ea,bj as ta,cE as ra,cF as _t,cG as ia,cH as aa,cI as na,cJ as St,br as oa}from"./install-94e97f7b.js";import{c as sa}from"./createSeriesDataSimply-f9c24591.js";var la=1e-8;function Mt(n,r){return Math.abs(n-r)<la}function wt(n,r,e){var t=0,i=n[0];if(!i)return!1;for(var a=1;a<n.length;a++){var o=n[a];t+=vt(i[0],i[1],o[0],o[1],r,e),i=o}var s=n[0];return(!Mt(i[0],s[0])||!Mt(i[1],s[1]))&&(t+=vt(i[0],i[1],s[0],s[1],r,e)),t!==0}var ua=[];function Ze(n,r){for(var e=0;e<n.length;e++)fe(n[e],n[e],r)}function bt(n,r,e,t){for(var i=0;i<n.length;i++){var a=n[i];t&&(a=t.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(Mr(r,r,a),wr(e,e,a))}}function ca(n){for(var r=0,e=0,t=0,i=n.length,a=n[i-1][0],o=n[i-1][1],s=0;s<i;s++){var l=n[s][0],u=n[s][1],c=a*u-l*o;r+=c,e+=(a+l)*c,t+=(o+u)*c,a=l,o=u}return r?[e/r/3,t/r/3,r]:[n[0][0]||0,n[0][1]||0]}var kr=function(){function n(r){this.name=r}return n.prototype.setCenter=function(r){this._center=r},n.prototype.getCenter=function(){var r=this._center;return r||(r=this._center=this.calcCenter()),r},n}(),xt=function(){function n(r,e){this.type="polygon",this.exterior=r,this.interiors=e}return n}(),Tt=function(){function n(r){this.type="linestring",this.points=r}return n}(),Hr=function(n){I(r,n);function r(e,t,i){var a=n.call(this,e)||this;return a.type="geoJSON",a.geometries=t,a._center=i&&[i[0],i[1]],a}return r.prototype.calcCenter=function(){for(var e=this.geometries,t,i=0,a=0;a<e.length;a++){var o=e[a],s=o.exterior,l=s&&s.length;l>i&&(t=o,i=l)}if(t)return ca(t.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},r.prototype.getBoundingRect=function(e){var t=this._rect;if(t&&!e)return t;var i=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return g(o,function(s){s.type==="polygon"?bt(s.exterior,i,a,e):g(s.points,function(l){bt(l,i,a,e)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),t=new Y(i[0],i[1],a[0]-i[0],a[1]-i[1]),e||(this._rect=t),t},r.prototype.contain=function(e){var t=this.getBoundingRect(),i=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var a=0,o=i.length;a<o;a++){var s=i[a];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(wt(l,e[0],e[1])){for(var c=0;c<(u?u.length:0);c++)if(wt(u[c],e[0],e[1]))continue e;return!0}}}return!1},r.prototype.transformTo=function(e,t,i,a){var o=this.getBoundingRect(),s=o.width/o.height;i?a||(a=i/s):i=s*a;for(var l=new Y(e,t,i,a),u=o.calculateTransform(l),c=this.geometries,h=0;h<c.length;h++){var f=c[h];f.type==="polygon"?(Ze(f.exterior,u),g(f.interiors,function(p){Ze(p,u)})):g(f.points,function(p){Ze(p,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},r.prototype.cloneShallow=function(e){e==null&&(e=this.name);var t=new r(e,this.geometries,this._center);return t._rect=this._rect,t.transformTo=null,t},r}(kr),ha=function(n){I(r,n);function r(e,t){var i=n.call(this,e)||this;return i.type="geoSVG",i._elOnlyForCalculate=t,i}return r.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,t=e.getBoundingRect(),i=[t.x+t.width/2,t.y+t.height/2],a=li(ua),o=e;o&&!o.isGeoSVGGraphicRoot;)Qe(a,o.getLocalTransform(),a),o=o.parent;return Sr(a,a),fe(i,i,a),i},r}(kr);function pa(n){if(!n.UTF8Encoding)return n;var r=n,e=r.UTF8Scale;e==null&&(e=1024);var t=r.features;return g(t,function(i){var a=i.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=Zr(s,o,e);break;case"Polygon":Ne(s,o,e);break;case"MultiLineString":Ne(s,o,e);break;case"MultiPolygon":g(s,function(l,u){return Ne(l,o[u],e)})}}),r.UTF8Encoding=!1,r}function Ne(n,r,e){for(var t=0;t<n.length;t++)n[t]=Zr(n[t],r[t],e)}function Zr(n,r,e){for(var t=[],i=r[0],a=r[1],o=0;o<n.length;o+=2){var s=n.charCodeAt(o)-64,l=n.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=i,l+=a,i=s,a=l,t.push([s/e,l/e])}return t}function fa(n,r){return n=pa(n),k(ui(n.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var t=e.properties,i=e.geometry,a=[];switch(i.type){case"Polygon":var o=i.coordinates;a.push(new xt(o[0],o.slice(1)));break;case"MultiPolygon":g(i.coordinates,function(l){l[0]&&a.push(new xt(l[0],l.slice(1)))});break;case"LineString":a.push(new Tt([i.coordinates]));break;case"MultiLineString":a.push(new Tt(i.coordinates))}var s=new Hr(t[r||"name"],a,t.cp);return s.properties=t,s})}var At="\0_ec_interaction_mutex";function Rt(n,r){return!!va(n)[r]}function va(n){return n[At]||(n[At]={})}ci({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},br);var da=function(n){I(r,n);function r(e){var t=n.call(this)||this;t._zr=e;var i=w(t._mousedownHandler,t),a=w(t._mousemoveHandler,t),o=w(t._mouseupHandler,t),s=w(t._mousewheelHandler,t),l=w(t._pinchHandler,t);return t.enable=function(u,c){this.disable(),this._opt=xr(z(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(e.on("mousedown",i),e.on("mousemove",a),e.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(e.on("mousewheel",s),e.on("pinch",l))},t.disable=function(){e.off("mousedown",i),e.off("mousemove",a),e.off("mouseup",o),e.off("mousewheel",s),e.off("pinch",l)},t}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype.setPointerChecker=function(e){this.pointerChecker=e},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(e){if(!dt(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var i=e.offsetX,a=e.offsetY;this.pointerChecker&&this.pointerChecker(e,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},r.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!Te("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||Rt(this._zr,"globalPan"))){var t=e.offsetX,i=e.offsetY,a=this._x,o=this._y,s=t-a,l=i-o;this._x=t,this._y=i,this._opt.preventDefaultMouseMove&&q(e.event),Nr(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:a,oldY:o,newX:t,newY:i,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(e){dt(e)||(this._dragging=!1)},r.prototype._mousewheelHandler=function(e){var t=Te("zoomOnMouseWheel",e,this._opt),i=Te("moveOnMouseWheel",e,this._opt),a=e.wheelDelta,o=Math.abs(a),s=e.offsetX,l=e.offsetY;if(!(a===0||!t&&!i)){if(t){var u=o>3?1.4:o>1?1.2:1.1,c=a>0?u:1/u;Be(this,"zoom","zoomOnMouseWheel",e,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var h=Math.abs(a),f=(a>0?1:-1)*(h>3?.4:h>1?.15:.05);Be(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:f,originX:s,originY:l,isAvailableBehavior:null})}}},r.prototype._pinchHandler=function(e){if(!Rt(this._zr,"globalPan")){var t=e.pinchScale>1?1.1:1/1.1;Be(this,"zoom",null,e,{scale:t,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},r}(hi);function Be(n,r,e,t,i){n.pointerChecker&&n.pointerChecker(t,i.originX,i.originY)&&(q(t.event),Nr(n,r,e,t,i))}function Nr(n,r,e,t,i){i.isAvailableBehavior=w(Te,null,e,t),n.trigger(r,i)}function Te(n,r,e){var t=e[n];return!n||t&&(!U(t)||r.event[t+"Key"])}const Br=da;function ga(n,r,e){var t=n.target;t.x+=r,t.y+=e,t.dirty()}function ya(n,r,e,t){var i=n.target,a=n.zoomLimit,o=n.zoom=n.zoom||1;if(o*=r,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/n.zoom;n.zoom=o,i.x-=(e-i.x)*(u-1),i.y-=(t-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var ma={axisPointer:1,tooltip:1,brush:1};function _a(n,r,e){var t=r.getComponentByElement(n.topTarget),i=t&&t.coordinateSystem;return t&&t!==e&&!ma.hasOwnProperty(t.mainType)&&i&&i.model!==e}function Wr(n){if(U(n)){var r=new DOMParser;n=r.parseFromString(n,"text/xml")}var e=n;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var We,Ve={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},It=at(Ve),Ce={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Dt=at(Ce),Sa=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(r,e){e=e||{};var t=Wr(r);this._defsUsePending=[];var i=new C;this._root=i;var a=[],o=t.getAttribute("viewBox")||"",s=parseFloat(t.getAttribute("width")||e.width),l=parseFloat(t.getAttribute("height")||e.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),G(t,i,null,!0,!1);for(var u=t.firstChild;u;)this._parseNode(u,i,a,null,!1,!1),u=u.nextSibling;ba(this._defs,this._defsUsePending),this._defsUsePending=[];var c,h;if(o){var f=ze(o);f.length>=4&&(c={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(c&&s!=null&&l!=null&&(h=Ur(c,{x:0,y:0,width:s,height:l}),!e.ignoreViewBox)){var p=i;i=new C,i.add(p),p.scaleX=p.scaleY=h.scale,p.x=h.x,p.y=h.y}return!e.ignoreRootClip&&s!=null&&l!=null&&i.setClipPath(new Z({shape:{x:0,y:0,width:s,height:l}})),{root:i,width:s,height:l,viewBoxRect:c,viewBoxTransform:h,named:a}},n.prototype._parseNode=function(r,e,t,i,a,o){var s=r.nodeName.toLowerCase(),l,u=i;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=e;else{if(!a){var c=We[s];if(c&&ve(We,s)){l=c.call(this,r,e);var h=r.getAttribute("name");if(h){var f={name:h,namedFrom:null,svgNodeTagLower:s,el:l};t.push(f),s==="g"&&(u=f)}else i&&t.push({name:i.name,namedFrom:i,svgNodeTagLower:s,el:l});e.add(l)}}var p=Vt[s];if(p&&ve(Vt,s)){var v=p.call(this,r),d=r.getAttribute("id");d&&(this._defs[d]=v)}}if(l&&l.isGroup)for(var y=r.firstChild;y;)y.nodeType===1?this._parseNode(y,l,t,u,a,o):y.nodeType===3&&o&&this._parseText(y,l),y=y.nextSibling},n.prototype._parseText=function(r,e){var t=new pi({style:{text:r.textContent},silent:!0,x:this._textX||0,y:this._textY||0});E(e,t),G(r,t,this._defsUsePending,!1,!1),Ma(t,e);var i=t.style,a=i.fontSize;a&&a<9&&(i.fontSize=9,t.scaleX*=a/9,t.scaleY*=a/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var s=t.getBoundingRect();return this._textX+=s.width,e.add(t),t},n.internalField=function(){We={g:function(r,e){var t=new C;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t},rect:function(r,e){var t=new Z;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t.setShape({x:parseFloat(r.getAttribute("x")||"0"),y:parseFloat(r.getAttribute("y")||"0"),width:parseFloat(r.getAttribute("width")||"0"),height:parseFloat(r.getAttribute("height")||"0")}),t.silent=!0,t},circle:function(r,e){var t=new Tr;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),r:parseFloat(r.getAttribute("r")||"0")}),t.silent=!0,t},line:function(r,e){var t=new fi;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t.setShape({x1:parseFloat(r.getAttribute("x1")||"0"),y1:parseFloat(r.getAttribute("y1")||"0"),x2:parseFloat(r.getAttribute("x2")||"0"),y2:parseFloat(r.getAttribute("y2")||"0")}),t.silent=!0,t},ellipse:function(r,e){var t=new vi;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),rx:parseFloat(r.getAttribute("rx")||"0"),ry:parseFloat(r.getAttribute("ry")||"0")}),t.silent=!0,t},polygon:function(r,e){var t=r.getAttribute("points"),i;t&&(i=Pt(t));var a=new Ge({shape:{points:i||[]},silent:!0});return E(e,a),G(r,a,this._defsUsePending,!1,!1),a},polyline:function(r,e){var t=r.getAttribute("points"),i;t&&(i=Pt(t));var a=new nt({shape:{points:i||[]},silent:!0});return E(e,a),G(r,a,this._defsUsePending,!1,!1),a},image:function(r,e){var t=new Ar;return E(e,t),G(r,t,this._defsUsePending,!1,!1),t.setStyle({image:r.getAttribute("xlink:href")||r.getAttribute("href"),x:+r.getAttribute("x"),y:+r.getAttribute("y"),width:+r.getAttribute("width"),height:+r.getAttribute("height")}),t.silent=!0,t},text:function(r,e){var t=r.getAttribute("x")||"0",i=r.getAttribute("y")||"0",a=r.getAttribute("dx")||"0",o=r.getAttribute("dy")||"0";this._textX=parseFloat(t)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(o);var s=new C;return E(e,s),G(r,s,this._defsUsePending,!1,!0),s},tspan:function(r,e){var t=r.getAttribute("x"),i=r.getAttribute("y");t!=null&&(this._textX=parseFloat(t)),i!=null&&(this._textY=parseFloat(i));var a=r.getAttribute("dx")||"0",o=r.getAttribute("dy")||"0",s=new C;return E(e,s),G(r,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(r,e){var t=r.getAttribute("d")||"",i=di(t);return E(e,i),G(r,i,this._defsUsePending,!1,!1),i.silent=!0,i}}}(),n}(),Vt={lineargradient:function(n){var r=parseInt(n.getAttribute("x1")||"0",10),e=parseInt(n.getAttribute("y1")||"0",10),t=parseInt(n.getAttribute("x2")||"10",10),i=parseInt(n.getAttribute("y2")||"0",10),a=new Rr(r,e,t,i);return Ct(n,a),Lt(n,a),a},radialgradient:function(n){var r=parseInt(n.getAttribute("cx")||"0",10),e=parseInt(n.getAttribute("cy")||"0",10),t=parseInt(n.getAttribute("r")||"0",10),i=new gi(r,e,t);return Ct(n,i),Lt(n,i),i}};function Ct(n,r){var e=n.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(r.global=!0)}function Lt(n,r){for(var e=n.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var t=e.getAttribute("offset"),i=void 0;t&&t.indexOf("%")>0?i=parseInt(t,10)/100:t?i=parseFloat(t):i=0;var a={};Yr(e,a,a);var o=a.stopColor||e.getAttribute("stop-color")||"#000000";r.colorStops.push({offset:i,color:o})}e=e.nextSibling}}function E(n,r){n&&n.__inheritedStyle&&(r.__inheritedStyle||(r.__inheritedStyle={}),xr(r.__inheritedStyle,n.__inheritedStyle))}function Pt(n){for(var r=ze(n),e=[],t=0;t<r.length;t+=2){var i=parseFloat(r[t]),a=parseFloat(r[t+1]);e.push([i,a])}return e}function G(n,r,e,t,i){var a=r,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};n.nodeType===1&&(Aa(n,r),Yr(n,o,s),t||Ra(n,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=Ot(a,"fill",o.fill,e)),o.stroke!=null&&(a.style.stroke=Ot(a,"stroke",o.stroke,e)),g(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),g(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),i&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=k(ze(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function Ma(n,r){var e=r.__selfStyle;if(e){var t=e.textBaseline,i=t;!t||t==="auto"||t==="baseline"?i="alphabetic":t==="before-edge"||t==="text-before-edge"?i="top":t==="after-edge"||t==="text-after-edge"?i="bottom":(t==="central"||t==="mathematical")&&(i="middle"),n.style.textBaseline=i}var a=r.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),n.style.textAlign=s)}}var wa=/^url\(\s*#(.*?)\)/;function Ot(n,r,e,t){var i=e&&e.match(wa);if(i){var a=yi(i[1]);t.push([n,r,a]);return}return e==="none"&&(e=null),e}function ba(n,r){for(var e=0;e<r.length;e++){var t=r[e];t[0].style[t[1]]=n[t[2]]}}var xa=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function ze(n){return n.match(xa)||[]}var Ta=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Ye=Math.PI/180;function Aa(n,r){var e=n.getAttribute("transform");if(e){e=e.replace(/,/g," ");var t=[],i=null;e.replace(Ta,function(h,f,p){return t.push(f,p),""});for(var a=t.length-1;a>0;a-=2){var o=t[a],s=t[a-1],l=ze(o);switch(i=i||Ir(),s){case"translate":Si(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":_i(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":mi(i,i,-parseFloat(l[0])*Ye);break;case"skewX":var u=Math.tan(parseFloat(l[0])*Ye);Qe(i,[1,0,u,1,0,0],i);break;case"skewY":var c=Math.tan(parseFloat(l[0])*Ye);Qe(i,[1,c,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5]);break}}r.setLocalTransform(i)}}var Gt=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Yr(n,r,e){var t=n.getAttribute("style");if(t){Gt.lastIndex=0;for(var i;(i=Gt.exec(t))!=null;){var a=i[1],o=ve(Ve,a)?Ve[a]:null;o&&(r[o]=i[2]);var s=ve(Ce,a)?Ce[a]:null;s&&(e[s]=i[2])}}}function Ra(n,r,e){for(var t=0;t<It.length;t++){var i=It[t],a=n.getAttribute(i);a!=null&&(r[Ve[i]]=a)}for(var t=0;t<Dt.length;t++){var i=Dt[t],a=n.getAttribute(i);a!=null&&(e[Ce[i]]=a)}}function Ur(n,r){var e=r.width/n.width,t=r.height/n.height,i=Math.min(e,t);return{scale:i,x:-(n.x+n.width/2)*i+(r.x+r.width/2),y:-(n.y+n.height/2)*i+(r.y+r.height/2)}}function Ia(n,r){var e=new Sa;return e.parse(n,r)}var Da=A(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Va=function(){function n(r,e){this.type="geoSVG",this._usedGraphicMap=A(),this._freedGraphics=[],this._mapName=r,this._parsedXML=Wr(e)}return n.prototype.load=function(){var r=this._firstGraphic;if(!r){r=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(r),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=La(r.named),t=e.regions,i=e.regionsMap;this._regions=t,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(r){var e,t;try{e=r&&Ia(r,{ignoreViewBox:!0,ignoreRootClip:!0})||{},t=e.root,Dr(t!=null)}catch(y){throw new Error(`Invalid svg format
`+y.message)}var i=new C;i.add(t),i.isGeoSVGGraphicRoot=!0;var a=e.width,o=e.height,s=e.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,h=void 0,f=void 0;if(a!=null?(u=0,h=a):s&&(u=s.x,h=s.width),o!=null?(c=0,f=o):s&&(c=s.y,f=s.height),u==null||c==null){var p=t.getBoundingRect();u==null&&(u=p.x,h=p.width),c==null&&(c=p.y,f=p.height)}l=this._boundingRect=new Y(u,c,h,f)}if(s){var v=Ur(s,l);t.scaleX=t.scaleY=v.scale,t.x=v.x,t.y=v.y}i.setClipPath(new Z({shape:l.plain()}));var d=[];return g(e.named,function(y){Da.get(y.svgNodeTagLower)!=null&&(d.push(y),Ca(y.el))}),{root:i,boundingRect:l,named:d}},n.prototype.useGraphic=function(r){var e=this._usedGraphicMap,t=e.get(r);return t||(t=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(r,t),t)},n.prototype.freeGraphic=function(r){var e=this._usedGraphicMap,t=e.get(r);t&&(e.removeKey(r),this._freedGraphics.push(t))},n}();function Ca(n){n.silent=!1,n.isGroup&&n.traverse(function(r){r.silent=!1})}function La(n){var r=[],e=A();return g(n,function(t){if(t.namedFrom==null){var i=new ha(t.name,t.el);r.push(i),e.set(t.name,i)}}),{regions:r,regionsMap:e}}var tt=[126,25],Et="南海诸岛",$=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var X=0;X<$.length;X++)for(var ee=0;ee<$[X].length;ee++)$[X][ee][0]/=10.5,$[X][ee][1]/=-10.5/.75,$[X][ee][0]+=tt[0],$[X][ee][1]+=tt[1];function Pa(n,r){if(n==="china"){for(var e=0;e<r.length;e++)if(r[e].name===Et)return;r.push(new Hr(Et,k($,function(t){return{type:"polygon",exterior:t}}),tt))}}var Oa={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function Ga(n,r){if(n==="china"){var e=Oa[r.name];if(e){var t=r.getCenter();t[0]+=e[0]/10.5,t[1]+=-e[1]/(10.5/.75),r.setCenter(t)}}}var Ea=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function za(n,r){n==="china"&&r.name==="台湾"&&r.geometries.push({type:"polygon",exterior:Ea[0]})}var Fa="name",ka=function(){function n(r,e,t){this.type="geoJSON",this._parsedMap=A(),this._mapName=r,this._specialAreas=t,this._geoJSON=Za(e)}return n.prototype.load=function(r,e){e=e||Fa;var t=this._parsedMap.get(e);if(!t){var i=this._parseToRegions(e);t=this._parsedMap.set(e,{regions:i,boundingRect:Ha(i)})}var a=A(),o=[];return g(t.regions,function(s){var l=s.name;r&&ve(r,l)&&(s=s.cloneShallow(l=r[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:t.boundingRect||new Y(0,0,0,0),regionsMap:a}},n.prototype._parseToRegions=function(r){var e=this._mapName,t=this._geoJSON,i;try{i=t?fa(t,r):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return Pa(e,i),g(i,function(a){var o=a.name;Ga(e,a),za(e,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),i},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function Ha(n){for(var r,e=0;e<n.length;e++){var t=n[e].getBoundingRect();r=r||t.clone(),r.union(t)}return r}function Za(n){return U(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var oe=A();const N={registerMap:function(n,r,e){if(r.svg){var t=new Va(n,r.svg);oe.set(n,t)}else{var i=r.geoJson||r.geoJSON;i&&!r.features?e=r.specialAreas:i=r;var t=new ka(n,i,e);oe.set(n,t)}},getGeoResource:function(n){return oe.get(n)},getMapForUser:function(n){var r=oe.get(n);return r&&r.type==="geoJSON"&&r.getMapForUser()},load:function(n,r,e){var t=oe.get(n);if(t)return t.load(r,e)}};var ct=["rect","circle","line","ellipse","polygon","polyline","path"],Na=A(ct),Ba=A(ct.concat(["g"])),Wa=A(ct.concat(["g"])),Xr=Vr();function Me(n){var r=n.getItemStyle(),e=n.get("areaColor");return e!=null&&(r.fill=e),r}function zt(n){var r=n.style;r&&(r.stroke=r.stroke||r.fill,r.fill=null)}var Ya=function(){function n(r){var e=new C;this.uid=Mi("ec_map_draw"),this._controller=new Br(r.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new C),e.add(this._svgGroup=new C)}return n.prototype.draw=function(r,e,t,i,a){var o=r.mainType==="geo",s=r.getData&&r.getData();o&&e.eachComponent({mainType:"series",subType:"map"},function(m){!s&&m.getHostGeoModel()===r&&(s=m.getData())});var l=r.coordinateSystem,u=this._regionsGroup,c=this.group,h=l.getTransformInfo(),f=h.raw,p=h.roam,v=!u.childAt(0)||a;v?(c.x=p.x,c.y=p.y,c.scaleX=p.scaleX,c.scaleY=p.scaleY,c.dirty()):wi(c,p,r);var d=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,y={api:t,geo:l,mapOrGeoModel:r,data:s,isVisualEncodedByVisualMap:d,isGeo:o,transformInfoRaw:f};l.resourceType==="geoJSON"?this._buildGeoJSON(y):l.resourceType==="geoSVG"&&this._buildSVG(y),this._updateController(r,e,t),this._updateMapSelectHandler(r,u,t,i)},n.prototype._buildGeoJSON=function(r){var e=this._regionsGroupByName=A(),t=A(),i=this._regionsGroup,a=r.transformInfoRaw,o=r.mapOrGeoModel,s=r.data,l=r.geo.projection,u=l&&l.stream;function c(p,v){return v&&(p=v(p)),p&&[p[0]*a.scaleX+a.x,p[1]*a.scaleY+a.y]}function h(p){for(var v=[],d=!u&&l&&l.project,y=0;y<p.length;++y){var m=c(p[y],d);m&&v.push(m)}return v}function f(p){return{shape:{points:h(p)}}}i.removeAll(),g(r.geo.regions,function(p){var v=p.name,d=e.get(v),y=t.get(v)||{},m=y.dataIdx,_=y.regionModel;d||(d=e.set(v,new C),i.add(d),m=s?s.indexOfName(v):null,_=r.isGeo?o.getRegionModel(v):s?s.getItemModel(m):null,t.set(v,{dataIdx:m,regionModel:_}));var M=[],S=[];g(p.geometries,function(D){if(D.type==="polygon"){var V=[D.exterior].concat(D.interiors||[]);u&&(V=Bt(V,u)),g(V,function(L){M.push(new Ge(f(L)))})}else{var x=D.points;u&&(x=Bt(x,u,!0)),g(x,function(L){S.push(new nt(f(L)))})}});var b=c(p.getCenter(),l&&l.project);function T(D,V){if(D.length){var x=new Ri({culling:!0,segmentIgnoreThreshold:1,shape:{paths:D}});d.add(x),Ft(r,x,m,_),kt(r,x,v,_,o,m,b),V&&(zt(x),g(x.states,zt))}}T(M),T(S,!0)}),e.each(function(p,v){var d=t.get(v),y=d.dataIdx,m=d.regionModel;Ht(r,p,v,m,o,y),Zt(r,p,v,m,o),Nt(r,p,v,m,o)},this)},n.prototype._buildSVG=function(r){var e=r.geo.map,t=r.transformInfoRaw;this._svgGroup.x=t.x,this._svgGroup.y=t.y,this._svgGroup.scaleX=t.scaleX,this._svgGroup.scaleY=t.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var i=this._svgDispatcherMap=A(),a=!1;g(this._svgGraphicRecord.named,function(o){var s=o.name,l=r.mapOrGeoModel,u=r.data,c=o.svgNodeTagLower,h=o.el,f=u?u.indexOfName(s):null,p=l.getRegionModel(s);if(Na.get(c)!=null&&h instanceof gt&&Ft(r,h,f,p),h instanceof gt&&(h.culling=!0),h.z2EmphasisLift=0,!o.namedFrom&&(Wa.get(c)!=null&&kt(r,h,s,p,l,f,null),Ht(r,h,s,p,l,f),Zt(r,h,s,p,l),Ba.get(c)!=null)){var v=Nt(r,h,s,p,l);v==="self"&&(a=!0);var d=i.get(s)||i.set(s,[]);d.push(h)}},this),this._enableBlurEntireSVG(a,r)},n.prototype._enableBlurEntireSVG=function(r,e){if(r&&e.isGeo){var t=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=t.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){Cr(a);var o=a.ensureState("blur").style||{};o.opacity==null&&i!=null&&(o.opacity=i),a.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(r,e){if(r==null)return[];var t=e.coordinateSystem;if(t.resourceType==="geoJSON"){var i=this._regionsGroupByName;if(i){var a=i.get(r);return a?[a]:[]}}else if(t.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(r)||[]},n.prototype._svgResourceChanged=function(r){return this._svgMapName!==r},n.prototype._useSVG=function(r){var e=N.getGeoResource(r);if(e&&e.type==="geoSVG"){var t=e.useGraphic(this.uid);this._svgGroup.add(t.root),this._svgGraphicRecord=t,this._svgMapName=r}},n.prototype._freeSVG=function(){var r=this._svgMapName;if(r!=null){var e=N.getGeoResource(r);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(r,e,t){var i=r.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=r.get("scaleLimit"),o.zoom=i.getZoom(),a.enable(r.get("roam")||!1);var s=r.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=r.id,u}a.off("pan").on("pan",function(u){this._mouseDownFlag=!1,ga(o,u.dx,u.dy),t.dispatchAction(de(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,ya(o,u.scale,u.originX,u.originY),t.dispatchAction(de(l(),{zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(u,c,h){return i.containPoint([c,h])&&!_a(u,t,r)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(r){var e=r.getTextContent();e&&(e.ignore=Xr(e).ignore)})},n.prototype._updateMapSelectHandler=function(r,e,t,i){var a=this;e.off("mousedown"),e.off("click"),r.get("selectedMode")&&(e.on("mousedown",function(){a._mouseDownFlag=!0}),e.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},n}();function Ft(n,r,e,t){var i=t.getModel("itemStyle"),a=t.getModel(["emphasis","itemStyle"]),o=t.getModel(["blur","itemStyle"]),s=t.getModel(["select","itemStyle"]),l=Me(i),u=Me(a),c=Me(s),h=Me(o),f=n.data;if(f){var p=f.getItemVisual(e,"style"),v=f.getItemVisual(e,"decal");n.isVisualEncodedByVisualMap&&p.fill&&(l.fill=p.fill),v&&(l.decal=bi(v,n.api))}r.setStyle(l),r.style.strokeNoScale=!0,r.ensureState("emphasis").style=u,r.ensureState("select").style=c,r.ensureState("blur").style=h,Cr(r)}function kt(n,r,e,t,i,a,o){var s=n.data,l=n.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),a)),c=s&&s.getItemLayout(a);if(l||u||c&&c.showLabel){var h=l?e:a,f=void 0;(!s||a>=0)&&(f=i);var p=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Lr(r,Pr(t),{labelFetcher:f,labelDataIndex:h,defaultText:e},p);var v=r.getTextContent();if(v&&(Xr(v).ignore=v.ignore,r.textConfig&&o)){var d=r.getBoundingRect().clone();r.textConfig.layoutRect=d,r.textConfig.position=[(o[0]-d.x)/d.width*100+"%",(o[1]-d.y)/d.height*100+"%"]}r.disableLabelAnimation=!0}else r.removeTextContent(),r.removeTextConfig(),r.disableLabelAnimation=null}function Ht(n,r,e,t,i,a){n.data?n.data.setItemGraphicEl(a,r):Re(r).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:e,region:t&&t.option||{}}}function Zt(n,r,e,t,i){n.data||xi({el:r,componentModel:i,itemName:e,itemTooltipOption:t.get("tooltip")})}function Nt(n,r,e,t,i){r.highDownSilentOnTouch=!!i.get("selectedMode");var a=t.getModel("emphasis"),o=a.get("focus");return Ti(r,o,a.get("blurScope"),a.get("disabled")),n.isGeo&&Ai(r,i,e),o}function Bt(n,r,e){var t=[],i;function a(){i=[]}function o(){i.length&&(t.push(i),i=[])}var s=r({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&i.push([l,u])},sphere:function(){}});return!e&&s.polygonStart(),g(n,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!e&&s.polygonEnd(),t}const $r=Ya;var Ua=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,t,i,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===e.id){var s=this._mapDraw;s&&o.add(s.group)}else if(e.needsDrawMap){var s=this._mapDraw||new $r(i);o.add(s.group),s.draw(e,t,i,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,i)}}},r.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},r.prototype._renderSymbols=function(e,t,i){var a=e.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=a.getItemLayout(l);if(!(!u||!u.point)){var c=u.point,h=u.offset,f=new Tr({style:{fill:e.getData().getVisual("style").fill},shape:{cx:c[0]+h*9,cy:c[1],r:3},silent:!0,z2:8+(h?0:Ii+1)});if(!h){var p=e.mainSeries.getData(),v=a.getName(l),d=p.indexOfName(v),y=a.getItemModel(l),m=y.getModel("label"),_=p.getItemGraphicEl(d);Lr(f,Pr(y),{labelFetcher:{getFormattedLabel:function(M,S){return e.getFormattedLabel(d,S)}},defaultText:v}),f.disableLabelAnimation=!0,m.get("position")||f.setTextConfig({position:"bottom"}),_.onHoverStateChange=function(M){Di(f,M)}}o.add(f)}}})},r.type="map",r}(Vi);const Xa=Ua;var $a=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(t){if(t!=null){var i=this.getData().getName(t),a=this.coordinateSystem,o=a.getRegion(i);return o&&a.dataToPoint(o.getCenter())}},e}return r.prototype.getInitialData=function(e){for(var t=sa(this,{coordDimensions:["value"],encodeDefaulter:et(Ci,this)}),i=A(),a=[],o=0,s=t.count();o<s;o++){var l=t.getName(o);i.set(l,!0)}var u=N.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return g(u.regions,function(c){var h=c.name;i.get(h)||a.push(h)}),t.appendValues([],a),t},r.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},r.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},r.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},r.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},r.prototype.formatTooltip=function(e,t,i){for(var a=this.getData(),o=this.getRawValue(e),s=a.getName(e),l=this.seriesGroup,u=[],c=0;c<l.length;c++){var h=l[c].originalData.indexOfName(s),f=a.mapDimension("value");isNaN(l[c].originalData.get(f,h))||u.push(l[c].name)}return yt("section",{header:u.join(", "),noHeader:!u.length,blocks:[yt("nameValue",{name:s,value:o})]})},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.getLegendIcon=function(e){var t=e.icon||"roundRect",i=ne(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return i.setStyle(e.itemStyle),i.style.stroke="none",t.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},r.type="series.map",r.dependencies=["geo"],r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},r}(Li);const Ja=$a;function Ka(n,r){var e={};return g(n,function(t){t.each(t.mapDimension("value"),function(i,a){var o="ec-"+t.getName(a);e[o]=e[o]||[],isNaN(i)||e[o].push(i)})}),n[0].map(n[0].mapDimension("value"),function(t,i){for(var a="ec-"+n[0].getName(i),o=0,s=1/0,l=-1/0,u=e[a].length,c=0;c<u;c++)s=Math.min(s,e[a][c]),l=Math.max(l,e[a][c]),o+=e[a][c];var h;return r==="min"?h=s:r==="max"?h=l:r==="average"?h=o/u:h=o,u===0?NaN:h})}function ja(n){var r={};n.eachSeriesByType("map",function(e){var t=e.getHostGeoModel(),i=t?"o"+t.id:"i"+e.getMapType();(r[i]=r[i]||[]).push(e)}),g(r,function(e,t){for(var i=Ka(k(e,function(o){return o.getData()}),e[0].get("mapValueCalculation")),a=0;a<e.length;a++)e[a].originalData=e[a].getData();for(var a=0;a<e.length;a++)e[a].seriesGroup=e,e[a].needsDrawMap=a===0&&!e[a].getHostGeoModel(),e[a].setData(i.cloneShallow()),e[a].mainSeries=e[0]})}function qa(n){var r={};n.eachSeriesByType("map",function(e){var t=e.getMapType();if(!(e.getHostGeoModel()||r[t])){var i={};g(e.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&n.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var h=l.getName(c),f=s.getRegion(h);if(!(!f||isNaN(u))){var p=i[h]||0,v=s.dataToPoint(f.getCenter());i[h]=p+1,l.setItemLayout(c,{point:v,offset:p})}})});var a=e.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!i[s],a.setItemLayout(o,l)}),r[t]=!0}})}var Wt=fe,Qa=function(n){I(r,n);function r(e){var t=n.call(this)||this;return t.type="view",t.dimensions=["x","y"],t._roamTransformable=new Se,t._rawTransformable=new Se,t.name=e,t}return r.prototype.setBoundingRect=function(e,t,i,a){return this._rect=new Y(e,t,i,a),this._rect},r.prototype.getBoundingRect=function(){return this._rect},r.prototype.setViewRect=function(e,t,i,a){this._transformTo(e,t,i,a),this._viewRect=new Y(e,t,i,a)},r.prototype._transformTo=function(e,t,i,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new Y(e,t,i,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},r.prototype.setCenter=function(e,t){e&&(this._center=[j(e[0],t.getWidth()),j(e[1],t.getHeight())],this._updateCenterAndZoom())},r.prototype.setZoom=function(e){e=e||1;var t=this.zoomLimit;t&&(t.max!=null&&(e=Math.min(t.max,e)),t.min!=null&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},r.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),t=e.x+e.width/2,i=e.y+e.height/2;return[t,i]},r.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},r.prototype.getZoom=function(){return this._zoom||1},r.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},r.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,i=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=fe([],a,e),i=fe([],i,e),t.originX=a[0],t.originY=a[1],t.x=i[0]-a[0],t.y=i[1]-a[1],t.scaleX=t.scaleY=o,this._updateTransform()},r.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),Pi(this.transform||(this.transform=[]),t.transform||Ir()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],Sr(this.invTransform,this.transform),this.decomposeTransform()},r.prototype.getTransformInfo=function(){var e=this._rawTransformable,t=this._roamTransformable,i=new Se;return i.transform=t.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},r.prototype.getViewRect=function(){return this._viewRect},r.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},r.prototype.dataToPoint=function(e,t,i){var a=t?this._rawTransform:this.transform;return i=i||[],a?Wt(i,e,a):Oi(i,e)},r.prototype.pointToData=function(e){var t=this.invTransform;return t?Wt([],e,t):[e[0],e[1]]},r.prototype.convertToPixel=function(e,t,i){var a=Yt(t);return a===this?a.dataToPoint(i):null},r.prototype.convertFromPixel=function(e,t,i){var a=Yt(t);return a===this?a.pointToData(i):null},r.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},r.dimensions=["x","y"],r}(Se);function Yt(n){var r=n.seriesModel;return r?r.coordinateSystem:null}const Jr=Qa;var en={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Kr=["lng","lat"],jr=function(n){I(r,n);function r(e,t,i){var a=n.call(this,e)||this;a.dimensions=Kr,a.type="geo",a._nameCoordMap=A(),a.map=t;var o=i.projection,s=N.load(t,i.nameMap,i.nameProperty),l=N.getGeoResource(t);a.resourceType=l?l.type:null;var u=a.regions=s.regions,c=en[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var h;if(o)for(var f=0;f<u.length;f++){var p=u[f].getBoundingRect(o);h=h||p.clone(),h.union(p)}else h=s.boundingRect;return a.setBoundingRect(h.x,h.y,h.width,h.height),a.aspectScale=o?1:Gi(i.aspectScale,c.aspectScale),a._invertLongitute=o?!1:c.invertLongitute,a}return r.prototype._transformTo=function(e,t,i,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new Y(e,t,i,a));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},r.prototype.getRegion=function(e){return this._regionsMap.get(e)},r.prototype.getRegionByCoord=function(e){for(var t=this.regions,i=0;i<t.length;i++){var a=t[i];if(a.type==="geoJSON"&&a.contain(e))return t[i]}},r.prototype.addGeoCoord=function(e,t){this._nameCoordMap.set(e,t)},r.prototype.getGeoCoord=function(e){var t=this._regionsMap.get(e);return this._nameCoordMap.get(e)||t&&t.getCenter()},r.prototype.dataToPoint=function(e,t,i){if(U(e)&&(e=this.getGeoCoord(e)),e){var a=this.projection;return a&&(e=a.project(e)),e&&this.projectedToPoint(e,t,i)}},r.prototype.pointToData=function(e){var t=this.projection;return t&&(e=t.unproject(e)),e&&this.pointToProjected(e)},r.prototype.pointToProjected=function(e){return n.prototype.pointToData.call(this,e)},r.prototype.projectedToPoint=function(e,t,i){return n.prototype.dataToPoint.call(this,e,t,i)},r.prototype.convertToPixel=function(e,t,i){var a=Ut(t);return a===this?a.dataToPoint(i):null},r.prototype.convertFromPixel=function(e,t,i){var a=Ut(t);return a===this?a.pointToData(i):null},r}(Jr);Ei(jr,Jr);function Ut(n){var r=n.geoModel,e=n.seriesModel;return r?r.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",Ie).models[0]||{}).coordinateSystem:null}const Xt=jr;function $t(n,r){var e=n.get("boundingCoords");if(e!=null){var t=e[0],i=e[1];if(isFinite(t[0])&&isFinite(t[1])&&isFinite(i[0])&&isFinite(i[1])){var a=this.projection;if(a){var o=t[0],s=t[1],l=i[0],u=i[1];t=[1/0,1/0],i=[-1/0,-1/0];var c=function(T,D,V,x){for(var L=V-T,P=x-D,B=0;B<=100;B++){var _e=B/100,ft=a.project([T+L*_e,D+P*_e]);Mr(t,t,ft),wr(i,i,ft)}};c(o,s,l,s),c(l,s,l,u),c(l,u,o,u),c(o,u,l,s)}this.setBoundingRect(t[0],t[1],i[0]-t[0],i[1]-t[1])}}var h=this.getBoundingRect(),f=n.get("layoutCenter"),p=n.get("layoutSize"),v=r.getWidth(),d=r.getHeight(),y=h.width/h.height*this.aspectScale,m=!1,_,M;f&&p&&(_=[j(f[0],v),j(f[1],d)],M=j(p,Math.min(v,d)),!isNaN(_[0])&&!isNaN(_[1])&&!isNaN(M)&&(m=!0));var S;if(m)S={},y>1?(S.width=M,S.height=M/y):(S.height=M,S.width=M*y),S.y=_[1]-S.height/2,S.x=_[0]-S.width/2;else{var b=n.getBoxLayoutParams();b.aspect=y,S=ot(b,{width:v,height:d})}this.setViewRect(S.x,S.y,S.width,S.height),this.setCenter(n.get("center"),r),this.setZoom(n.get("zoom"))}function tn(n,r){g(r.get("geoCoord"),function(e,t){n.addGeoCoord(t,e)})}var rn=function(){function n(){this.dimensions=Kr}return n.prototype.create=function(r,e){var t=[];function i(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}r.eachComponent("geo",function(o,s){var l=o.get("map"),u=new Xt(l+s,l,de({nameMap:o.get("nameMap")},i(o)));u.zoomLimit=o.get("scaleLimit"),t.push(u),o.coordinateSystem=u,u.model=o,u.resize=$t,u.resize(o,e)}),r.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=t[l]}});var a={};return r.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),g(a,function(o,s){var l=k(o,function(c){return c.get("nameMap")}),u=new Xt(s,s,de({nameMap:zi(l)},i(o[0])));u.zoomLimit=Or.apply(null,k(o,function(c){return c.get("scaleLimit")})),t.push(u),u.resize=$t,u.resize(o[0],e),g(o,function(c){c.coordinateSystem=u,tn(u,c)})}),t},n.prototype.getFilledRegions=function(r,e,t,i){for(var a=(r||[]).slice(),o=A(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=N.load(e,t,i);return g(l.regions,function(u){var c=u.name;!o.get(c)&&a.push({name:c})}),a},n}(),an=new rn;const qr=an;var nn=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,t,i){var a=N.getGeoResource(e.map);if(a&&a.type==="geoJSON"){var o=e.itemStyle=e.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(e,i),Fi(e,"label",["show"])},r.prototype.optionUpdated=function(){var e=this,t=this.option;t.regions=qr.getFilledRegions(t.regions,t.map,t.nameMap,t.nameProperty);var i={};this._optionModelMap=ki(t.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new mt(o,e,e.ecModel)),o.selected&&(i[s]=!0)),a},A()),t.selectedMap||(t.selectedMap=i)},r.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new mt(null,this,this.ecModel)},r.prototype.getFormattedLabel=function(e,t){var i=this.getRegionModel(e),a=t==="normal"?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),o={name:e};if(st(a))return o.status=t,a(o);if(U(a))return a.replace("{a}",e??"")},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.select=function(e){var t=this.option,i=t.selectedMode;if(i){i!=="multiple"&&(t.selectedMap=null);var a=t.selectedMap||(t.selectedMap={});a[e]=!0}},r.prototype.unSelect=function(e){var t=this.option.selectedMap;t&&(t[e]=!1)},r.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},r.prototype.isSelected=function(e){var t=this.option.selectedMap;return!!(t&&t[e])},r.type="geo",r.layoutMode="box",r.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},r}(lt);const on=nn;function Jt(n,r){return n.pointToProjected?n.pointToProjected(r):n.pointToData(r)}function sn(n,r,e,t){var i=n.getZoom(),a=n.getCenter(),o=r.zoom,s=n.projectedToPoint?n.projectedToPoint(a):n.dataToPoint(a);if(r.dx!=null&&r.dy!=null&&(s[0]-=r.dx,s[1]-=r.dy,n.setCenter(Jt(n,s),t)),o!=null){if(e){var l=e.min||0,u=e.max||1/0;o=Math.max(Math.min(i*o,u),l)/i}n.scaleX*=o,n.scaleY*=o;var c=(r.originX-n.x)*(o-1),h=(r.originY-n.y)*(o-1);n.x-=c,n.y-=h,n.updateTransform(),n.setCenter(Jt(n,s),t),n.setZoom(o*i)}return{center:n.getCenter(),zoom:n.getZoom()}}var ln=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e.focusBlurEnabled=!0,e}return r.prototype.init=function(e,t){this._api=t},r.prototype.render=function(e,t,i,a){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new $r(i));var o=this._mapDraw;o.draw(e,t,i,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=e.get("silent"),this.group.add(o.group),this.updateSelectStatus(e,t,i)},r.prototype._handleRegionClick=function(e){var t;Gr(e.target,function(i){return(t=Re(i).eventData)!=null},!0),t&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:t.name})},r.prototype.updateSelectStatus=function(e,t,i){var a=this;this._mapDraw.group.traverse(function(o){var s=Re(o).eventData;if(s)return a._model.isSelected(s.name)?i.enterSelect(o):i.leaveSelect(o),!0})},r.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},r.type="geo",r}(ut);const un=ln;function cn(n,r,e){N.registerMap(n,r,e)}function hn(n){n.registerCoordinateSystem("geo",qr),n.registerComponentModel(on),n.registerComponentView(un),n.registerImpl("registerMap",cn),n.registerImpl("getMap",function(e){return N.getMapForUser(e)});function r(e,t){t.update="geo:updateSelectStatus",n.registerAction(t,function(i,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:i},function(l){l[e](i.name);var u=l.coordinateSystem;g(u.regions,function(h){o[h.name]=l.isSelected(h.name)||!1});var c=[];g(o,function(h,f){o[f]&&c.push(f)}),s.push({geoIndex:l.componentIndex,name:c})}),{selected:o,allSelected:s,name:i.name}})}r("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),r("select",{type:"geoSelect",event:"geoselected"}),r("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,t,i){var a=e.componentType||"series";t.eachComponent({mainType:a,query:e},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=sn(s,e,o.get("scaleLimit"),i);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&g(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function Vo(n){ge(hn),n.registerChartView(Xa),n.registerSeriesModel(Ja),n.registerLayout(qa),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,ja),Hi("map",n.registerAction)}var ye=g,pn=Q,Le=-1,ht=function(){function n(r){var e=r.mappingMethod,t=r.type,i=this.option=z(r);this.type=t,this.mappingMethod=e,this._normalizeData=dn[e];var a=n.visualHandlers[t];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[e],e==="piecewise"?(Ue(i),fn(i)):e==="category"?i.categories?vn(i):Ue(i,!0):(Dr(e!=="linear"||i.dataExtent),Ue(i))}return n.prototype.mapValueToVisual=function(r){var e=this._normalizeData(r);return this._normalizedToVisual(e,r)},n.prototype.getNormalizer=function(){return w(this._normalizeData,this)},n.listVisualTypes=function(){return at(n.visualHandlers)},n.isValidType=function(r){return n.visualHandlers.hasOwnProperty(r)},n.eachVisual=function(r,e,t){Q(r)?g(r,e,t):e.call(t,r)},n.mapVisual=function(r,e,t){var i,a=H(r)?[]:Q(r)?{}:(i=!0,null);return n.eachVisual(r,function(o,s){var l=e.call(t,o,s);i?a=l:a[s]=l}),a},n.retrieveVisuals=function(r){var e={},t;return r&&ye(n.visualHandlers,function(i,a){r.hasOwnProperty(a)&&(e[a]=r[a],t=!0)}),t?e:null},n.prepareVisualTypes=function(r){if(H(r))r=r.slice();else if(pn(r)){var e=[];ye(r,function(t,i){e.push(i)}),r=e}else return[];return r.sort(function(t,i){return i==="color"&&t!=="color"&&t.indexOf("color")===0?1:-1}),r},n.dependsOn=function(r,e){return e==="color"?!!(r&&r.indexOf(e)===0):r===e},n.findPieceIndex=function(r,e,t){for(var i,a=1/0,o=0,s=e.length;o<s;o++){var l=e[o].value;if(l!=null){if(l===r||U(l)&&l===r+"")return o;t&&f(l,o)}}for(var o=0,s=e.length;o<s;o++){var u=e[o],c=u.interval,h=u.close;if(c){if(c[0]===-1/0){if(be(h[1],r,c[1]))return o}else if(c[1]===1/0){if(be(h[0],c[0],r))return o}else if(be(h[0],c[0],r)&&be(h[1],r,c[1]))return o;t&&f(c[0],o),t&&f(c[1],o)}}if(t)return r===1/0?e.length-1:r===-1/0?0:i;function f(p,v){var d=Math.abs(p-r);d<a&&(a=d,i=v)}},n.visualHandlers={color:{applyVisual:se("color"),getColorMapper:function(){var r=this.option;return w(r.mappingMethod==="category"?function(e,t){return!t&&(e=this._normalizeData(e)),ce.call(this,e)}:function(e,t,i){var a=!!i;return!t&&(e=this._normalizeData(e)),i=Fe(e,r.parsedVisual,i),a?i:ke(i,"rgba")},this)},_normalizedToVisual:{linear:function(r){return ke(Fe(r,this.option.parsedVisual),"rgba")},category:ce,piecewise:function(r,e){var t=it.call(this,e);return t==null&&(t=ke(Fe(r,this.option.parsedVisual),"rgba")),t},fixed:J}},colorHue:we(function(r,e){return He(r,e)}),colorSaturation:we(function(r,e){return He(r,null,e)}),colorLightness:we(function(r,e){return He(r,null,null,e)}),colorAlpha:we(function(r,e){return Zi(r,e)}),decal:{applyVisual:se("decal"),_normalizedToVisual:{linear:null,category:ce,piecewise:null,fixed:null}},opacity:{applyVisual:se("opacity"),_normalizedToVisual:rt([0,1])},liftZ:{applyVisual:se("liftZ"),_normalizedToVisual:{linear:J,category:J,piecewise:J,fixed:J}},symbol:{applyVisual:function(r,e,t){var i=this.mapValueToVisual(r);t("symbol",i)},_normalizedToVisual:{linear:Kt,category:ce,piecewise:function(r,e){var t=it.call(this,e);return t==null&&(t=Kt.call(this,r)),t},fixed:J}},symbolSize:{applyVisual:se("symbolSize"),_normalizedToVisual:rt([0,1])}},n}();function fn(n){var r=n.pieceList;n.hasSpecialVisual=!1,g(r,function(e,t){e.originIndex=t,e.visual!=null&&(n.hasSpecialVisual=!0)})}function vn(n){var r=n.categories,e=n.categoryMap={},t=n.visual;if(ye(r,function(o,s){e[o]=s}),!H(t)){var i=[];Q(t)?ye(t,function(o,s){var l=e[s];i[l??Le]=o}):i[Le]=t,t=Qr(n,i)}for(var a=r.length-1;a>=0;a--)t[a]==null&&(delete e[r[a]],r.pop())}function Ue(n,r){var e=n.visual,t=[];Q(e)?ye(e,function(a){t.push(a)}):e!=null&&t.push(e);var i={color:1,symbol:1};!r&&t.length===1&&!i.hasOwnProperty(n.type)&&(t[1]=t[0]),Qr(n,t)}function we(n){return{applyVisual:function(r,e,t){var i=this.mapValueToVisual(r);t("color",n(e("color"),i))},_normalizedToVisual:rt([0,1])}}function Kt(n){var r=this.option.visual;return r[Math.round(R(n,[0,1],[0,r.length-1],!0))]||{}}function se(n){return function(r,e,t){t(n,this.mapValueToVisual(r))}}function ce(n){var r=this.option.visual;return r[this.option.loop&&n!==Le?n%r.length:n]}function J(){return this.option.visual[0]}function rt(n){return{linear:function(r){return R(r,n,this.option.visual,!0)},category:ce,piecewise:function(r,e){var t=it.call(this,e);return t==null&&(t=R(r,n,this.option.visual,!0)),t},fixed:J}}function it(n){var r=this.option,e=r.pieceList;if(r.hasSpecialVisual){var t=ht.findPieceIndex(n,e),i=e[t];if(i&&i.visual)return i.visual[this.type]}}function Qr(n,r){return n.visual=r,n.type==="color"&&(n.parsedVisual=k(r,function(e){var t=Ni(e);return t||[0,0,0,1]})),r}var dn={linear:function(n){return R(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var r=this.option.pieceList,e=ht.findPieceIndex(n,r,!0);if(e!=null)return R(e,[0,r.length-1],[0,1],!0)},category:function(n){var r=this.option.categories?this.option.categoryMap[n]:n;return r??Le},fixed:br};function be(n,r,e){return n?r<=e:r<e}const O=ht;function me(n,r,e,t,i,a){n=n||0;var o=e[1]-e[0];if(i!=null&&(i=te(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),t==="all"){var s=Math.abs(r[1]-r[0]);s=te(s,[0,o]),i=a=te(s,[i,a]),t=0}r[0]=te(r[0],e),r[1]=te(r[1],e);var l=Xe(r,t);r[t]+=n;var u=i||0,c=e.slice();l.sign<0?c[0]+=u:c[1]-=u,r[t]=te(r[t],c);var h;return h=Xe(r,t),i!=null&&(h.sign!==l.sign||h.span<i)&&(r[1-t]=r[t]+l.sign*i),h=Xe(r,t),a!=null&&h.span>a&&(r[1-t]=r[t]+h.sign*a),r}function Xe(n,r){var e=n[r]-n[1-r];return{span:Math.abs(e),sign:e>0?-1:e<0?1:r?-1:1}}function te(n,r){return Math.min(r[1]!=null?r[1]:1/0,Math.max(r[0]!=null?r[0]:-1/0,n))}var jt=["x","y","radius","angle","single"],gn=["cartesian2d","polar","singleAxis"];function yn(n){var r=n.get("coordinateSystem");return Er(gn,r)>=0}function W(n){return n+"Axis"}function mn(n,r){var e=A(),t=[],i=A();n.eachComponent({mainType:"dataZoom",query:r},function(c){i.get(c.uid)||s(c)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(c){!i.get(c.uid)&&l(c)&&(s(c),a=!0)}function s(c){i.set(c.uid,!0),t.push(c),u(c)}function l(c){var h=!1;return c.eachTargetAxis(function(f,p){var v=e.get(f);v&&v[p]&&(h=!0)}),h}function u(c){c.eachTargetAxis(function(h,f){(e.get(h)||e.set(h,[]))[f]=!0})}return t}function ei(n){var r=n.ecModel,e={infoList:[],infoMap:A()};return n.eachTargetAxis(function(t,i){var a=r.getComponent(W(t),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=e.infoMap.get(s);l||(l={model:o,axisModels:[]},e.infoList.push(l),e.infoMap.set(s,l)),l.axisModels.push(a)}}}),e}var $e=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},n}(),_n=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return r.prototype.init=function(e,t,i){var a=qt(e);this.settledOption=a,this.mergeDefaultAndTheme(e,i),this._doInit(a)},r.prototype.mergeOption=function(e){var t=qt(e);De(this.option,e,!0),De(this.settledOption,t,!0),this._doInit(t)},r.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var i=this.settledOption;g([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(t[a[0]]=i[a[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=A(),i=this._fillSpecifiedTargetAxis(t);i?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return g(jt,function(i){var a=this.getReferringComponents(W(i),Bi);if(a.specified){t=!0;var o=new $e;g(a.models,function(s){o.add(s.componentIndex)}),e.set(i,o)}},this),t},r.prototype._fillAutoTargetAxisByOrient=function(e,t){var i=this.ecModel,a=!0;if(a){var o=t==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===t}});l(s,"single")}function l(u,c){var h=u[0];if(h){var f=new $e;if(f.add(h.componentIndex),e.set(c,f),a=!1,c==="x"||c==="y"){var p=h.getReferringComponents("grid",Ie).models[0];p&&g(u,function(v){h.componentIndex!==v.componentIndex&&p===v.getReferringComponents("grid",Ie).models[0]&&f.add(v.componentIndex)})}}}a&&g(jt,function(u){if(a){var c=i.findComponents({mainType:W(u),filter:function(f){return f.get("type",!0)==="category"}});if(c[0]){var h=new $e;h.add(c[0].componentIndex),e.set(u,h),a=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(t){!e&&(e=t)},this),e==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(e){var t=this._rangePropMode,i=this.get("rangeMode");g([["start","startValue"],["end","endValue"]],function(a,o){var s=e[a[0]]!=null,l=e[a[1]]!=null;s&&!l?t[o]="percent":!s&&l?t[o]="value":i?t[o]=i[o]:s&&(t[o]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(t,i){e==null&&(e=this.ecModel.getComponent(W(t),i))},this),e},r.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each(function(i,a){g(i.indexList,function(o){e.call(t,a,o)})})},r.prototype.getAxisProxy=function(e,t){var i=this.getAxisModel(e,t);if(i)return i.__dzAxisProxy},r.prototype.getAxisModel=function(e,t){var i=this._targetAxisInfoMap.get(e);if(i&&i.indexMap[t])return this.ecModel.getComponent(W(e),t)},r.prototype.setRawRange=function(e){var t=this.option,i=this.settledOption;g([["start","startValue"],["end","endValue"]],function(a){(e[a[0]]!=null||e[a[1]]!=null)&&(t[a[0]]=i[a[0]]=e[a[0]],t[a[1]]=i[a[1]]=e[a[1]])},this),this._updateRangeUse(e)},r.prototype.setCalculatedRange=function(e){var t=this.option;g(["start","startValue","end","endValue"],function(i){t[i]=e[i]})},r.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},r.prototype.getValueRange=function(e,t){if(e==null&&t==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(e,t).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;t||(t=u)}return t},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(lt);function qt(n){var r={};return g(["start","end","startValue","endValue","throttle"],function(e){n.hasOwnProperty(e)&&(r[e]=n[e])}),r}const Pe=_n;var Sn=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,t,i,a){this.dataZoomModel=e,this.ecModel=t,this.api=i},r.type="dataZoom",r}(ut);const ti=Sn;var ie=g,Qt=K,Mn=function(){function n(r,e,t,i){this._dimName=r,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=t}return n.prototype.hostedBy=function(r){return this._dataZoomModel===r},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(e){if(yn(e)){var t=W(this._dimName),i=e.getReferringComponents(t,Ie).models[0];i&&this._axisIndex===i.componentIndex&&r.push(e)}},this),r},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return z(this._minMaxSpan)},n.prototype.calculateDataWindow=function(r){var e=this._dataExtent,t=this.getAxisModel(),i=t.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;ie(["start","end"],function(f,p){var v=r[f],d=r[f+"Value"];a[p]==="percent"?(v==null&&(v=o[p]),d=i.parse(R(v,o,e))):(u=!0,d=d==null?e[p]:i.parse(d),v=R(d,e,o)),l[p]=d==null||isNaN(d)?e[p]:d,s[p]=v==null||isNaN(v)?o[p]:v}),Qt(l),Qt(s);var c=this._minMaxSpan;u?h(l,s,e,o,!1):h(s,l,o,e,!0);function h(f,p,v,d,y){var m=y?"Span":"ValueSpan";me(0,f,v,"all",c["min"+m],c["max"+m]);for(var _=0;_<2;_++)p[_]=R(f[_],v,d,!0),y&&(p[_]=i.parse(p[_]))}return{valueWindow:l,percentWindow:s}},n.prototype.reset=function(r){if(r===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=wn(this,this._dimName,e),this._updateMinMaxSpan();var t=this.calculateDataWindow(r.settledOption);this._valueWindow=t.valueWindow,this._percentWindow=t.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(r,e){if(r!==this._dataZoomModel)return;var t=this._dimName,i=this.getTargetSeriesModels(),a=r.get("filterMode"),o=this._valueWindow;if(a==="none")return;ie(i,function(l){var u=l.getData(),c=u.mapDimensionsAll(t);if(c.length){if(a==="weakFilter"){var h=u.getStore(),f=k(c,function(p){return u.getDimensionIndex(p)},u);u.filterSelf(function(p){for(var v,d,y,m=0;m<c.length;m++){var _=h.get(f[m],p),M=!isNaN(_),S=_<o[0],b=_>o[1];if(M&&!S&&!b)return!0;M&&(y=!0),S&&(v=!0),b&&(d=!0)}return y&&v&&d})}else ie(c,function(p){if(a==="empty")l.setData(u=u.map(p,function(d){return s(d)?d:NaN}));else{var v={};v[p]=o,u.selectRange(v)}});ie(c,function(p){u.setApproximateExtent(o,p)})}});function s(l){return l>=o[0]&&l<=o[1]}},n.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},e=this._dataZoomModel,t=this._dataExtent;ie(["min","max"],function(i){var a=e.get(i+"Span"),o=e.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=R(t[0]+o,t,[0,100],!0):a!=null&&(o=R(a,[0,100],t,!0)-t[0]),r[i+"Span"]=a,r[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var r=this.getAxisModel(),e=this._percentWindow,t=this._valueWindow;if(e){var i=Wi(t,[0,500]);i=Math.min(i,20);var a=r.axis.scale.rawExtentInfo;e[0]!==0&&a.setDeterminedMinMax("min",+t[0].toFixed(i)),e[1]!==100&&a.setDeterminedMinMax("max",+t[1].toFixed(i)),a.freeze()}},n}();function wn(n,r,e){var t=[1/0,-1/0];ie(e,function(o){Yi(t,o.getData(),r)});var i=n.getAxisModel(),a=Ui(i.axis.scale,i,t).calculate();return[a.min,a.max]}const bn=Mn;var xn={getTargetSeries:function(n){function r(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=n.getComponent(W(o),s);i(o,s,l,a)})})}r(function(i,a,o,s){o.__dzAxisProxy=null});var e=[];r(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new bn(i,a,s,n),e.push(o.__dzAxisProxy))});var t=A();return g(e,function(i){g(i.getTargetSeriesModels(),function(a){t.set(a.uid,a)})}),t},overallReset:function(n,r){n.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(t,i){e.getAxisProxy(t,i).reset(e)}),e.eachTargetAxis(function(t,i){e.getAxisProxy(t,i).filterData(e,r)})}),n.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy();if(t){var i=t.getDataPercentWindow(),a=t.getDataValueWindow();e.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};const Tn=xn;function An(n){n.registerAction("dataZoom",function(r,e){var t=mn(e,r);g(t,function(i){i.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var er=!1;function ri(n){er||(er=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,Tn),An(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}var tr=g;function rr(n){if(n){for(var r in n)if(n.hasOwnProperty(r))return!0}}function ir(n,r,e){var t={};return tr(r,function(a){var o=t[a]=i();tr(n[a],function(s,l){if(O.isValidType(l)){var u={type:l,visual:s};e&&e(u,a),o[l]=new O(u),l==="opacity"&&(u=z(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new O(u))}})}),t;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function Rn(n,r,e){var t;g(e,function(i){r.hasOwnProperty(i)&&rr(r[i])&&(t=!0)}),t&&g(e,function(i){r.hasOwnProperty(i)&&rr(r[i])?n[i]=z(r[i]):delete n[i]})}function In(n,r,e,t){var i={};return g(n,function(a){var o=O.prepareVisualTypes(r[a]);i[a]=o}),{progress:function(o,s){var l;t!=null&&(l=s.getDimensionIndex(t));function u(b){return Xi(s,h,b)}function c(b,T){$i(s,h,b,T)}for(var h,f=s.getStore();(h=o.next())!=null;){var p=s.getRawDataItem(h);if(!(p&&p.visualMap===!1))for(var v=t!=null?f.get(l,h):h,d=e(v),y=r[d],m=i[d],_=0,M=m.length;_<M;_++){var S=m[_];y[S]&&y[S].applyVisual(v,u,c)}}}}}var Dn=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.inside",r.defaultOption=Ee(Pe.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(Pe);const Vn=Dn;var pt=Vr();function Cn(n,r,e){pt(n).coordSysRecordMap.each(function(t){var i=t.dataZoomInfoMap.get(r.uid);i&&(i.getRange=e)})}function Ln(n,r){for(var e=pt(n).coordSysRecordMap,t=e.keys(),i=0;i<t.length;i++){var a=t[i],o=e.get(a),s=o.dataZoomInfoMap;if(s){var l=r.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||ii(e,o))}}}function ii(n,r){if(r){n.removeKey(r.model.uid);var e=r.controller;e&&e.dispose()}}function Pn(n,r){var e={model:r,containsPoint:et(Gn,r),dispatchAction:et(On,n),dataZoomInfoMap:null,controller:null},t=e.controller=new Br(n.getZr());return g(["pan","zoom","scrollMove"],function(i){t.on(i,function(a){var o=[];e.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],u=l&&l(s.dzReferCoordSysInfo,e.model.mainType,e.controller,a);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&e.dispatchAction(o)})}),e}function On(n,r){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function Gn(n,r,e,t){return n.coordinateSystem.containPoint([e,t])}function En(n){var r,e="type_",t={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return n.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;t[e+s]>t[e+r]&&(r=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function zn(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(r,e){var t=pt(e),i=t.coordSysRecordMap||(t.coordSysRecordMap=A());i.each(function(a){a.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=ei(a);g(o.infoList,function(s){var l=s.model.uid,u=i.get(l)||i.set(l,Pn(e,s.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=A());c.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){ii(i,a);return}var c=En(l);o.enable(c.controlType,c.opt),o.setPointerChecker(a.containsPoint),zr(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var Fn=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return r.prototype.render=function(e,t,i){if(n.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),Cn(i,e,{pan:w(Je.pan,this),zoom:w(Je.zoom,this),scrollMove:w(Je.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Ln(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(ti),Je={zoom:function(n,r,e,t){var i=this.range,a=i.slice(),o=n.axisModels[0];if(o){var s=Ke[r](null,[t.originX,t.originY],o,e,n),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/t.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(me(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:ar(function(n,r,e,t,i,a){var o=Ke[t]([a.oldX,a.oldY],[a.newX,a.newY],r,i,e);return o.signal*(n[1]-n[0])*o.pixel/o.pixelLength}),scrollMove:ar(function(n,r,e,t,i,a){var o=Ke[t]([0,0],[a.scrollDelta,a.scrollDelta],r,i,e);return o.signal*(n[1]-n[0])*a.scrollDelta})};function ar(n){return function(r,e,t,i){var a=this.range,o=a.slice(),s=r.axisModels[0];if(s){var l=n(o,s,r,e,t,i);if(me(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var Ke={grid:function(n,r,e,t,i){var a=e.axis,o={},s=i.model.coordinateSystem.getRect();return n=n||[0,0],a.dim==="x"?(o.pixel=r[0]-n[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=r[1]-n[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(n,r,e,t,i){var a=e.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return n=n?s.pointToCoord(n):[0,0],r=s.pointToCoord(r),e.mainType==="radiusAxis"?(o.pixel=r[0]-n[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=r[1]-n[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(n,r,e,t,i){var a=e.axis,o=i.model.coordinateSystem.getRect(),s={};return n=n||[0,0],a.orient==="horizontal"?(s.pixel=r[0]-n[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=r[1]-n[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};const kn=Fn;function Hn(n){ri(n),n.registerComponentModel(Vn),n.registerComponentView(kn),zn(n)}var Zn=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=Ee(Pe.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),r}(Pe);const Nn=Zn;var le=Z,nr=7,Bn=1,je=30,Wn=7,ue="horizontal",or="vertical",Yn=5,Un=["line","bar","candlestick","scatter"],Xn={easing:"cubicOut",duration:100,delay:0},$n=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e._displayables={},e}return r.prototype.init=function(e,t){this.api=t,this._onBrush=w(this._onBrush,this),this._onBrushEnd=w(this._onBrushEnd,this)},r.prototype.render=function(e,t,i,a){if(n.prototype.render.apply(this,arguments),zr(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Ji(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new C;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},r.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,i=e.get("brushSelect"),a=i?Wn:0,o=this._findCoordRect(),s={width:t.getWidth(),height:t.getHeight()},l=this._orient===ue?{right:s.width-o.x-o.width,top:s.height-je-nr-a,width:o.width,height:je}:{right:nr,top:o.y,width:je,height:o.height},u=Ki(e.option);g(["right","top","width","height"],function(h){u[h]==="ph"&&(u[h]=l[h])});var c=ot(u,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===or&&this._size.reverse()},r.prototype._positionGroup=function(){var e=this.group,t=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===ue&&!o?{scaleY:l?1:-1,scaleX:1}:i===ue&&o?{scaleY:l?1:-1,scaleX:-1}:i===or&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=e.getBoundingRect([s]);e.x=t.x-u.x,e.y=t.y-u.y,e.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,i=this._displayables.sliderGroup,a=e.get("brushSelect");i.add(new le({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var o=new le({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:w(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},r.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var t=this._size,i=this._shadowSize||[],a=e.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():e.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||t[0]!==i[0]||t[1]!==i[1]){var h=o.getDataExtent(l),f=(h[1]-h[0])*.3;h=[h[0]-f,h[1]+f];var p=[0,t[1]],v=[0,t[0]],d=[[t[0],0],[0,0]],y=[],m=v[1]/(o.count()-1),_=0,M=Math.round(o.count()/t[0]),S;o.each([l],function(x,L){if(M>0&&L%M){_+=m;return}var P=x==null||isNaN(x)||x==="",B=P?0:R(x,h,p,!0);P&&!S&&L?(d.push([d[d.length-1][0],0]),y.push([y[y.length-1][0],0])):!P&&S&&(d.push([_,0]),y.push([_,0])),d.push([_,B]),y.push([_,B]),_+=m,S=P}),u=this._shadowPolygonPts=d,c=this._shadowPolylinePts=y}this._shadowData=o,this._shadowDim=l,this._shadowSize=[t[0],t[1]];var b=this.dataZoomModel;function T(x){var L=b.getModel(x?"selectedDataBackground":"dataBackground"),P=new C,B=new Ge({shape:{points:u},segmentIgnoreThreshold:1,style:L.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),_e=new nt({shape:{points:c},segmentIgnoreThreshold:1,style:L.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return P.add(B),P.add(_e),P}for(var D=0;D<3;D++){var V=T(D===1);this._displayables.sliderGroup.add(V),this._displayables.dataShadowSegs.push(V)}},r.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(t!==!1){var i,a=this.ecModel;return e.eachTargetAxis(function(o,s){var l=e.getAxisProxy(o,s).getTargetSeriesModels();g(l,function(u){if(!i&&!(t!==!0&&Er(Un,u.get("type"))<0)){var c=a.getComponent(W(o),s).axis,h=Jn(o),f,p=u.coordinateSystem;h!=null&&p.getOtherAxis&&(f=p.getOtherAxis(c).inverse),h=u.getData().mapDimension(h),i={thisAxis:c,series:u,thisDim:o,otherDim:h,otherAxisInverse:f}}},this)},this),i}},r.prototype._renderHandle=function(){var e=this.group,t=this._displayables,i=t.handles=[null,null],a=t.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,h=l.get("brushSelect"),f=t.filler=new le({silent:h,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(f),o.add(new le({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Bn,fill:"rgba(0,0,0,0)"}})),g([0,1],function(M){var S=l.get("handleIcon");!ji[S]&&S.indexOf("path://")<0&&S.indexOf("image://")<0&&(S="path://"+S);var b=ne(S,-1,0,2,2,null,!0);b.attr({cursor:sr(this._orient),draggable:!0,drift:w(this._onDragMove,this,M),ondragend:w(this._onDragEnd,this),onmouseover:w(this._showDataInfo,this,!0),onmouseout:w(this._showDataInfo,this,!1),z2:5});var T=b.getBoundingRect(),D=l.get("handleSize");this._handleHeight=j(D,this._size[1]),this._handleWidth=T.width/T.height*this._handleHeight,b.setStyle(l.getModel("handleStyle").getItemStyle()),b.style.strokeNoScale=!0,b.rectHover=!0,b.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),qi(b);var V=l.get("handleColor");V!=null&&(b.style.fill=V),o.add(i[M]=b);var x=l.getModel("textStyle");e.add(a[M]=new ae({silent:!0,invisible:!0,style:he(x,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:x.getTextColor(),font:x.getFont()}),z2:10}))},this);var p=f;if(h){var v=j(l.get("moveHandleSize"),s[1]),d=t.moveHandle=new Z({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:v}}),y=v*.8,m=t.moveHandleIcon=ne(l.get("moveHandleIcon"),-y/2,-y/2,y,y,"#fff",!0);m.silent=!0,m.y=s[1]+v/2-.5,d.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var _=Math.min(s[1]/2,Math.max(v,10));p=t.moveZone=new Z({invisible:!0,shape:{y:s[1]-_,height:v+_}}),p.on("mouseover",function(){u.enterEmphasis(d)}).on("mouseout",function(){u.leaveEmphasis(d)}),o.add(d),o.add(m),o.add(p)}p.attr({draggable:!0,cursor:sr(this._orient),drift:w(this._onDragMove,this,"all"),ondragstart:w(this._showDataInfo,this,!0),ondragend:w(this._onDragEnd,this),onmouseover:w(this._showDataInfo,this,!0),onmouseout:w(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[R(e[0],[0,100],t,!0),R(e[1],[0,100],t,!0)]},r.prototype._updateInterval=function(e,t){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];me(t,a,o,i.get("zoomLock")?"all":e,s.minSpan!=null?R(s.minSpan,l,o,!0):null,s.maxSpan!=null?R(s.maxSpan,l,o,!0):null);var u=this._range,c=this._range=K([R(a[0],o,l,!0),R(a[1],o,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},r.prototype._updateView=function(e){var t=this._displayables,i=this._handleEnds,a=K(i.slice()),o=this._size;g([0,1],function(p){var v=t.handles[p],d=this._handleHeight;v.attr({scaleX:d/2,scaleY:d/2,x:i[p]+(p?-1:1),y:o[1]/2-d/2})},this),t.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};t.moveHandle&&(t.moveHandle.setShape(s),t.moveZone.setShape(s),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=t.dataShadowSegs,u=[0,a[0],a[1],o[0]],c=0;c<l.length;c++){var h=l[c],f=h.getClipPath();f||(f=new Z,h.setClipPath(f)),f.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:o[1]})}this._updateDataInfo(e)},r.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(t.get("showDetail")){var l=t.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,h=e?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(h[0],u),this._formatLabel(h[1],u)]}}var f=K(this._handleEnds.slice());p.call(this,0),p.call(this,1);function p(v){var d=xe(i.handles[v].parent,this.group),y=Fr(v===0?"right":"left",d),m=this._handleWidth/2+Yn,_=pe([f[v]+(v===0?-m:m),this._size[1]/2],d);a[v].setStyle({x:_[0],y:_[1],verticalAlign:o===ue?"middle":y,align:o===ue?y:"center",text:s[v]})}},r.prototype._formatLabel=function(e,t){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=t.getPixelPrecision());var s=e==null||isNaN(e)?"":t.type==="category"||t.type==="time"?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(o,20));return st(a)?a(e,s):U(a)?a.replace("{value}",s):s},r.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,i=t.handleLabels;i[0].attr("invisible",!e),i[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},r.prototype._onDragMove=function(e,t,i,a){this._dragging=!0,q(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=pe([t,i],o,!0),l=this._updateInterval(e,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(e){var t=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(i[0]<0||i[0]>t[0]||i[1]<0||i[1]>t[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(e){var t=e.offsetX,i=e.offsetY;this._brushStart=new Qi(t,i),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,!!t){t.attr("ignore",!0);var i=t.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=K([R(i.x,o,s,!0),R(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(e){this._brushing&&(q(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},r.prototype._updateBrushRect=function(e,t){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new le({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(e,t),c=l.transformCoordToLocal(s.x,s.y),h=this._size;u[0]=Math.max(Math.min(h[0],u[0]),0),o.setShape({x:c[0],y:0,width:u[0]-c[0],height:h[1]})},r.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?Xn:null,start:t[0],end:t[1]})},r.prototype._findCoordRect=function(){var e,t=ei(this.dataZoomModel).infoList;if(!e&&t.length){var i=t[0].model.coordinateSystem;e=i.getRect&&i.getRect()}if(!e){var a=this.api.getWidth(),o=this.api.getHeight();e={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return e},r.type="dataZoom.slider",r}(ti);function Jn(n){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[n]}function sr(n){return n==="vertical"?"ns-resize":"ew-resize"}const Kn=$n;function jn(n){n.registerComponentModel(Nn),n.registerComponentView(Kn),ri(n)}function Co(n){ge(Hn),ge(jn)}var qn={get:function(n,r,e){var t=z((Qn[n]||{})[r]);return e&&H(t)?t[t.length-1]:t}},Qn={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const ai=qn;var lr=O.mapVisual,eo=O.eachVisual,to=H,ur=g,ro=K,io=R,ao=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return r.prototype.init=function(e,t,i){this.mergeDefaultAndTheme(e,i)},r.prototype.optionUpdated=function(e,t){var i=this.option;!t&&Rn(i,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(e){var t=this.stateList;e=w(e,this),this.controllerVisuals=ir(this.option.controller,t,e),this.targetVisuals=ir(this.option.target,t,e)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,t=[];return e==null||e==="all"?this.ecModel.eachSeries(function(i,a){t.push(a)}):t=ea(e),t},r.prototype.eachTargetSeries=function(e,t){g(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&e.call(t,a)},this)},r.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries(function(i){i===e&&(t=!0)}),t},r.prototype.formatValueText=function(e,t,i){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,u;i=i||["<",">"],H(e)&&(e=e.slice(),u=!0);var c=t?e:u?[h(e[0]),h(e[1])]:h(e);if(U(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(st(l))return u?l(e[0],e[1]):l(e);if(u)return e[0]===s[0]?i[0]+" "+c[1]:e[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function h(f){return f===s[0]?"min":f===s[1]?"max":(+f).toFixed(Math.min(o,20))}},r.prototype.resetExtent=function(){var e=this.option,t=ro([e.min,e.max]);this._dataExtent=t},r.prototype.getDataDimensionIndex=function(e){var t=this.option.dimension;if(t!=null)return e.getDimensionIndex(t);for(var i=e.dimensions,a=i.length-1;a>=0;a--){var o=i[a],s=e.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,i={inRange:t.inRange,outOfRange:t.outOfRange},a=t.target||(t.target={}),o=t.controller||(t.controller={});De(a,i),De(o,i);var s=this.isCategory();l.call(this,a),l.call(this,o),u.call(this,a,"inRange","outOfRange"),c.call(this,o);function l(h){to(t.color)&&!h.inRange&&(h.inRange={color:t.color.slice().reverse()}),h.inRange=h.inRange||{color:e.get("gradientColor")}}function u(h,f,p){var v=h[f],d=h[p];v&&!d&&(d=h[p]={},ur(v,function(y,m){if(O.isValidType(m)){var _=ai.get(m,"inactive",s);_!=null&&(d[m]=_,m==="color"&&!d.hasOwnProperty("opacity")&&!d.hasOwnProperty("colorAlpha")&&(d.opacity=[0,0]))}}))}function c(h){var f=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,p=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,v=this.get("inactiveColor"),d=this.getItemSymbol(),y=d||"roundRect";ur(this.stateList,function(m){var _=this.itemSize,M=h[m];M||(M=h[m]={color:s?v:[v]}),M.symbol==null&&(M.symbol=f&&z(f)||(s?y:[y])),M.symbolSize==null&&(M.symbolSize=p&&z(p)||(s?_[0]:[_[0],_[0]])),M.symbol=lr(M.symbol,function(T){return T==="none"?y:T});var S=M.symbolSize;if(S!=null){var b=-1/0;eo(S,function(T){T>b&&(b=T)}),M.symbolSize=lr(S,function(T){return io(T,[0,b],[0,_[0]],!0)})}},this)}},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(e){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(e){return null},r.prototype.getVisualMeta=function(e){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},r}(lt);const Oe=ao;var cr=[20,140],no=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(e,t){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=cr[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=cr[1])},r.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):H(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},r.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),g(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)},this)},r.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},r.prototype.getSelected=function(){var e=this.getExtent(),t=K((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},r.prototype.getValueState=function(e){var t=this.option.range,i=this.getExtent();return(t[0]<=i[0]||t[0]<=e)&&(t[1]>=i[1]||e<=t[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(s,l){e[0]<=s&&s<=e[1]&&a.push(l)},this),t.push({seriesId:i.id,dataIndex:a})},this),t},r.prototype.getVisualMeta=function(e){var t=hr(this,"outOfRange",this.getExtent()),i=hr(this,"inRange",this.option.range.slice()),a=[];function o(p,v){a.push({value:p,color:e(p,v)})}for(var s=0,l=0,u=i.length,c=t.length;l<c&&(!i.length||t[l]<=i[0]);l++)t[l]<i[s]&&o(t[l],"outOfRange");for(var h=1;s<u;s++,h=0)h&&a.length&&o(i[s],"outOfRange"),o(i[s],"inRange");for(var h=1;l<c;l++)(!i.length||i[i.length-1]<t[l])&&(h&&(a.length&&o(a[a.length-1].value,"outOfRange"),h=0),o(t[l],"outOfRange"));var f=a.length;return{stops:a,outerColors:[f?a[0].color:"transparent",f?a[f-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=Ee(Oe.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),r}(Oe);function hr(n,r,e){if(e[0]===e[1])return e.slice();for(var t=200,i=(e[1]-e[0])/t,a=e[0],o=[],s=0;s<=t&&a<e[1];s++)o.push(a),a+=i;return o.push(e[1]),o}const oo=no;var so=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return r.prototype.init=function(e,t){this.ecModel=e,this.api=t},r.prototype.render=function(e,t,i,a){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,t,i,a)},r.prototype.renderBackground=function(e){var t=this.visualMapModel,i=ta(t.get("padding")||0),a=e.getBoundingRect();e.add(new Z({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},r.prototype.getControllerVisual=function(e,t,i){i=i||{};var a=i.forceState,o=this.visualMapModel,s={};if(t==="color"){var l=o.get("contentColor");s.color=l}function u(p){return s[p]}function c(p,v){s[p]=v}var h=o.controllerVisuals[a||o.getValueState(e)],f=O.prepareVisualTypes(h);return g(f,function(p){var v=h[p];i.convertOpacityToAlpha&&p==="opacity"&&(p="colorAlpha",v=h.__alphaForOpacity),O.dependsOn(p,t)&&v&&v.applyVisual(e,u,c)}),s[t]},r.prototype.positionGroup=function(e){var t=this.visualMapModel,i=this.api;ra(e,t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},r.prototype.doRender=function(e,t,i,a){},r.type="visualMap",r}(ut);const ni=so;var pr=[["left","right","width"],["top","bottom","height"]];function oi(n,r,e){var t=n.option,i=t.align;if(i!=null&&i!=="auto")return i;for(var a={width:r.getWidth(),height:r.getHeight()},o=t.orient==="horizontal"?1:0,s=pr[o],l=[0,null,10],u={},c=0;c<3;c++)u[pr[1-o][c]]=l[c],u[s[c]]=c===2?e[0]:t[s[c]];var h=[["x","width",3],["y","height",0]][o],f=ot(u,a,t.padding);return s[(f.margin[h[2]]||0)+f[h[0]]+f[h[1]]*.5<a[h[1]]*.5?0:1]}function Ae(n,r){return g(n||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(r?r.componentIndex:"")}),n}var F=R,lo=g,fr=Math.min,qe=Math.max,uo=12,co=6,ho=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return r.prototype.doRender=function(e,t,i,a){this._api=i,(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var i=e.get("text");this._renderEndsText(t,i,0),this._renderEndsText(t,i,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},r.prototype._renderEndsText=function(e,t,i){if(t){var a=t[1-i];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),h=this._applyTransform(i===0?"bottom":"top",u),f=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new ae({style:he(p,{x:c[0],y:c[1],verticalAlign:f==="horizontal"?"middle":h,align:f==="horizontal"?h:"center",text:a})}))}},r.prototype._renderBar=function(e){var t=this.visualMapModel,i=this._shapes,a=t.itemSize,o=this._orient,s=this._useHandle,l=oi(t,this.api,a),u=i.mainGroup=this._createBarGroup(l),c=new C;u.add(c),c.add(i.outOfRange=vr()),c.add(i.inRange=vr(null,s?gr(this._orient):null,w(this._dragHandle,this,"all",!1),w(this._dragHandle,this,"all",!0))),c.setClipPath(new Z({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var h=t.textStyleModel.getTextRect("国"),f=qe(h.width,h.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(t,u,0,a,f,o),this._createHandle(t,u,1,a,f,o)),this._createIndicator(t,u,a,f,o),e.add(u)},r.prototype._createHandle=function(e,t,i,a,o,s){var l=w(this._dragHandle,this,i,!1),u=w(this._dragHandle,this,i,!0),c=_t(e.get("handleSize"),a[0]),h=ne(e.get("handleIcon"),-c/2,-c/2,c,c,null,!0),f=gr(this._orient);h.attr({cursor:f,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){q(m.event)}}),h.x=a[0]/2,h.useStyle(e.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),ia(h,!0),t.add(h);var p=this.visualMapModel.textStyleModel,v=new ae({cursor:f,draggable:!0,drift:l,onmousemove:function(m){q(m.event)},ondragend:u,style:he(p,{x:0,y:0,text:""})});v.ensureState("blur").style={opacity:.1},v.stateTransition={duration:200},this.group.add(v);var d=[c,0],y=this._shapes;y.handleThumbs[i]=h,y.handleLabelPoints[i]=d,y.handleLabels[i]=v},r.prototype._createIndicator=function(e,t,i,a,o){var s=_t(e.get("indicatorSize"),i[0]),l=ne(e.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=e.getModel("indicatorStyle").getItemStyle();if(l instanceof Ar){var c=l.style;l.useStyle(de({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);t.add(l);var h=this.visualMapModel.textStyleModel,f=new ae({silent:!0,invisible:!0,style:he(h,{x:0,y:0,text:""})});this.group.add(f);var p=[(o==="horizontal"?a/2:co)+i[0]/2,0],v=this._shapes;v.indicator=l,v.indicatorLabel=f,v.indicatorLabelPoint=p,this._firstShowIndicator=!0},r.prototype._dragHandle=function(e,t,i,a){if(this._useHandle){if(this._dragging=!t,!t){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(e,o[1]),this._hideIndicator(),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():dr(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},r.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),i=e.getExtent(),a=[0,e.itemSize[1]];this._handleEnds=[F(t[0],i,a,!0),F(t[1],i,a,!0)]},r.prototype._updateInterval=function(e,t){t=t||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];me(t,a,o,e,0);var s=i.getExtent();this._dataInterval=[F(a[0],o,s,!0),F(a[1],o,s,!0)]},r.prototype._updateView=function(e){var t=this.visualMapModel,i=t.getExtent(),a=this._shapes,o=[0,t.itemSize[1]],s=e?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},r.prototype._createBarVisual=function(e,t,i,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(e,o),l=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],u=this._createBarPoints(i,l);return{barColor:new Rr(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},r.prototype._makeColorGradient=function(e,t){var i=100,a=[],o=(e[1]-e[0])/i;a.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var s=1;s<i;s++){var l=e[0]+o*s;if(l>e[1])break;a.push({color:this.getControllerVisual(l,"color",t),offset:s/i})}return a.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),a},r.prototype._createBarPoints=function(e,t){var i=this.visualMapModel.itemSize;return[[i[0]-t[0],e[0]],[i[0],e[0]],[i[0],e[1]],[i[0]-t[1],e[1]]]},r.prototype._createBarGroup=function(e){var t=this._orient,i=this.visualMapModel.get("inverse");return new C(t==="horizontal"&&!i?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:t==="horizontal"&&i?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:t==="vertical"&&!i?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},r.prototype._updateHandle=function(e,t){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,s=i.handleLabels,l=a.itemSize,u=a.getExtent();lo([0,1],function(c){var h=o[c];h.setStyle("fill",t.handlesColor[c]),h.y=e[c];var f=F(e[c],[0,l[1]],u,!0),p=this.getControllerVisual(f,"symbolSize");h.scaleX=h.scaleY=p/l[0],h.x=l[0]-p/2;var v=pe(i.handleLabelPoints[c],xe(h,this.group));s[c].setStyle({x:v[0],y:v[1],text:a.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(e,t,i,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],c=this._shapes,h=c.indicator;if(h){h.attr("invisible",!1);var f={convertOpacityToAlpha:!0},p=this.getControllerVisual(e,"color",f),v=this.getControllerVisual(e,"symbolSize"),d=F(e,s,u,!0),y=l[0]-v/2,m={x:h.x,y:h.y};h.y=d,h.x=y;var _=pe(c.indicatorLabelPoint,xe(h,this.group)),M=c.indicatorLabel;M.attr("invisible",!1);var S=this._applyTransform("left",c.mainGroup),b=this._orient,T=b==="horizontal";M.setStyle({text:(i||"")+o.formatValueText(t),verticalAlign:T?S:"middle",align:T?"center":S});var D={x:y,y:d,style:{fill:p}},V={style:{x:_[0],y:_[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var x={duration:100,easing:"cubicInOut",additive:!0};h.x=m.x,h.y=m.y,h.animateTo(D,x),M.animateTo(V,x)}else h.attr(D),M.attr(V);this._firstShowIndicator=!1;var L=this._shapes.handleLabels;if(L)for(var P=0;P<L.length;P++)this._api.enterBlur(L[P])}},r.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var i=e.visualMapModel.itemSize,a=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);a[1]=fr(qe(0,a[1]),i[1]),e._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(e,t){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],s=i.getExtent();e=fr(qe(o[0],e),o[1]);var l=po(i,s,o),u=[e-l,e+l],c=F(e,o,s,!0),h=[F(u[0],o,s,!0),F(u[1],o,s,!0)];u[0]<o[0]&&(h[0]=-1/0),u[1]>o[1]&&(h[1]=1/0),t&&(h[0]===-1/0?this._showIndicator(c,h[1],"< ",l):h[1]===1/0?this._showIndicator(c,h[0],"> ",l):this._showIndicator(c,c,"≈ ",l));var f=this._hoverLinkDataIndices,p=[];(t||dr(i))&&(p=this._hoverLinkDataIndices=i.findTargetDataIndices(h));var v=aa(f,p);this._dispatchHighDown("downplay",Ae(v[0],i)),this._dispatchHighDown("highlight",Ae(v[1],i))}},r.prototype._hoverLinkFromSeriesMouseOver=function(e){var t;if(Gr(e.target,function(l){var u=Re(l);if(u.dataIndex!=null)return t=u,!0},!0),!!t){var i=this.ecModel.getSeriesByIndex(t.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(t.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),t.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},r.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var i=0;i<t.length;i++)this._api.leaveBlur(t[i])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Ae(e,this.visualMapModel)),e.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(e,t,i,a){var o=xe(t,a?null:this.group);return H(e)?pe(e,o,i):Fr(e,o,i)},r.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(ni);function vr(n,r,e,t){return new Ge({shape:{points:n},draggable:!!e,cursor:r,drift:e,onmousemove:function(i){q(i.event)},ondragend:t})}function po(n,r,e){var t=uo/2,i=n.get("hoverLinkDataSize");return i&&(t=F(i,r,e,!0)/2),t}function dr(n){var r=n.get("hoverLinkOnHandle");return!!(r??n.get("realtime"))}function gr(n){return n==="vertical"?"ns-resize":"ew-resize"}const fo=ho;var vo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},go=function(n,r){r.eachComponent({mainType:"visualMap",query:n},function(e){e.setSelected(n.selected)})},yo=[{createOnAllSeries:!0,reset:function(n,r){var e=[];return r.eachComponent("visualMap",function(t){var i=n.pipelineContext;!t.isTargetSeries(n)||i&&i.large||e.push(In(t.stateList,t.targetVisuals,w(t.getValueState,t),t.getDataDimensionIndex(n.getData())))}),e}},{createOnAllSeries:!0,reset:function(n,r){var e=n.getData(),t=[];r.eachComponent("visualMap",function(i){if(i.isTargetSeries(n)){var a=i.getVisualMeta(w(mo,null,n,i))||{stops:[],outerColors:[]},o=i.getDataDimensionIndex(e);o>=0&&(a.dimension=o,t.push(a))}}),n.getData().setVisual("visualMeta",t)}}];function mo(n,r,e,t){for(var i=r.targetVisuals[t],a=O.prepareVisualTypes(i),o={color:na(n.getData(),"color")},s=0,l=a.length;s<l;s++){var u=a[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(e,h,f)}return o.color;function h(p){return o[p]}function f(p,v){o[p]=v}}var yr=g;function _o(n){var r=n&&n.visualMap;H(r)||(r=r?[r]:[]),yr(r,function(e){if(e){re(e,"splitList")&&!re(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&H(t)&&yr(t,function(i){Q(i)&&(re(i,"start")&&!re(i,"min")&&(i.min=i.start),re(i,"end")&&!re(i,"max")&&(i.max=i.end))})}})}function re(n,r){return n&&n.hasOwnProperty&&n.hasOwnProperty(r)}var mr=!1;function si(n){mr||(mr=!0,n.registerSubTypeDefaulter("visualMap",function(r){return!r.categories&&(!(r.pieces?r.pieces.length>0:r.splitNumber>0)||r.calculable)?"continuous":"piecewise"}),n.registerAction(vo,go),g(yo,function(r){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,r)}),n.registerPreprocessor(_o))}function So(n){n.registerComponentModel(oo),n.registerComponentView(fo),si(n)}var Mo=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e._pieceList=[],e}return r.prototype.optionUpdated=function(e,t){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],wo[this._mode].call(this,this._pieceList),this._resetSelected(e,t);var a=this.option.categories;this.resetVisual(function(o,s){i==="categories"?(o.mappingMethod="category",o.categories=z(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=k(this._pieceList,function(l){return l=z(l),s!=="inRange"&&(l.visual=null),l}))})},r.prototype.completeVisualOption=function(){var e=this.option,t={},i=O.listVisualTypes(),a=this.isCategory();g(e.pieces,function(s){g(i,function(l){s.hasOwnProperty(l)&&(t[l]=1)})}),g(t,function(s,l){var u=!1;g(this.stateList,function(c){u=u||o(e,c,l)||o(e.target,c,l)},this),!u&&g(this.stateList,function(c){(e[c]||(e[c]={}))[l]=ai.get(l,c==="inRange"?"active":"inactive",a)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}n.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(e,t){var i=this.option,a=this._pieceList,o=(t?i:e).selected||{};if(i.selected=o,g(a,function(l,u){var c=this.getSelectedMapKey(l);o.hasOwnProperty(c)||(o[c]=!0)},this),i.selectedMode==="single"){var s=!1;g(a,function(l,u){var c=this.getSelectedMapKey(l);o[c]&&(s?o[c]=!1:s=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(e){this.option.selected=z(e)},r.prototype.getValueState=function(e){var t=O.findPieceIndex(e,this._pieceList);return t!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var t=[],i=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=O.findPieceIndex(l,i);c===e&&o.push(u)},this),t.push({seriesId:a.id,dataIndex:o})},this),t},r.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(e.value!=null)t=e.value;else{var i=e.interval||[];t=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return t},r.prototype.getVisualMeta=function(e){if(this.isCategory())return;var t=[],i=["",""],a=this;function o(c,h){var f=a.getRepresentValue({interval:c});h||(h=a.getValueState(f));var p=e(f,h);c[0]===-1/0?i[0]=p:c[1]===1/0?i[1]=p:t.push({value:c[0],color:p},{value:c[1],color:p})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return g(s,function(c){var h=c.interval;h&&(h[0]>u&&o([u,h[0]],"outOfRange"),o(h.slice()),u=h[1])},this),{stops:t,outerColors:i}},r.type="visualMap.piecewise",r.defaultOption=Ee(Oe.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(Oe),wo={splitNumber:function(n){var r=this.option,e=Math.min(r.precision,20),t=this.getExtent(),i=r.splitNumber;i=Math.max(parseInt(i,10),1),r.splitNumber=i;for(var a=(t[1]-t[0])/i;+a.toFixed(e)!==a&&e<5;)e++;r.precision=e,a=+a.toFixed(e),r.minOpen&&n.push({interval:[-1/0,t[0]],close:[0,0]});for(var o=0,s=t[0];o<i;s+=a,o++){var l=o===i-1?t[1]:s+a;n.push({interval:[s,l],close:[1,1]})}r.maxOpen&&n.push({interval:[t[1],1/0],close:[0,0]}),St(n),g(n,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(n){var r=this.option;g(r.categories,function(e){n.push({text:this.formatValueText(e,!0),value:e})},this),_r(r,n)},pieces:function(n){var r=this.option;g(r.pieces,function(e,t){Q(e)||(e={value:e});var i={text:"",index:t};if(e.label!=null&&(i.text=e.label),e.hasOwnProperty("value")){var a=i.value=e.value;i.interval=[a,a],i.close=[1,1]}else{for(var o=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],h=0;h<2;h++){for(var f=[["gte","gt","min"],["lte","lt","max"]][h],p=0;p<3&&o[h]==null;p++)o[h]=e[f[p]],s[h]=l[p],c[h]=p===2;o[h]==null&&(o[h]=u[h])}c[0]&&o[1]===1/0&&(s[0]=0),c[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(i.value=o[0])}i.visual=O.retrieveVisuals(e),n.push(i)},this),_r(r,n),St(n),g(n,function(e){var t=e.close,i=[["<","≤"][t[1]],[">","≥"][t[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,i)},this)}};function _r(n,r){var e=n.inverse;(n.orient==="vertical"?!e:e)&&r.reverse()}const bo=Mo;var xo=function(n){I(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,i=t.get("textGap"),a=t.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),u=t.itemSize,c=this._getViewData(),h=c.endsText,f=Or(t.get("showLabel",!0),!h);h&&this._renderEndsText(e,h[0],u,f,l),g(c.viewPieceList,function(p){var v=p.piece,d=new C;d.onclick=w(this._onItemClick,this,v),this._enableHoverLink(d,p.indexInModelPieceList);var y=t.getRepresentValue(v);if(this._createItemSymbol(d,y,[0,0,u[0],u[1]]),f){var m=this.visualMapModel.getValueState(y);d.add(new ae({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:v.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:m==="outOfRange"?.5:1}}))}e.add(d)},this),h&&this._renderEndsText(e,h[1],u,f,l),oa(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},r.prototype._enableHoverLink=function(e,t){var i=this;e.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:o,batch:Ae(s.findTargetDataIndices(t),s)})}},r.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if(t.orient==="vertical")return oi(e,this.api,e.itemSize);var i=t.align;return(!i||i==="auto")&&(i="left"),i},r.prototype._renderEndsText=function(e,t,i,a,o){if(t){var s=new C,l=this.visualMapModel.textStyleModel;s.add(new ae({style:he(l,{x:a?o==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?o:"center",text:t})})),e.add(s)}},r.prototype._getViewData=function(){var e=this.visualMapModel,t=k(e.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=e.get("text"),a=e.get("orient"),o=e.get("inverse");return(a==="horizontal"?o:!o)?t.reverse():i&&(i=i.slice().reverse()),{viewPieceList:t,endsText:i}},r.prototype._createItemSymbol=function(e,t,i){e.add(ne(this.getControllerVisual(t,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(t,"color")))},r.prototype._onItemClick=function(e){var t=this.visualMapModel,i=t.option,a=i.selectedMode;if(a){var o=z(i.selected),s=t.getSelectedMapKey(e);a==="single"||a===!0?(o[s]=!0,g(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},r.type="visualMap.piecewise",r}(ni);const To=xo;function Ao(n){n.registerComponentModel(bo),n.registerComponentView(To),si(n)}function Lo(n){ge(So),ge(Ao)}export{Lo as a,hn as b,Vo as c,Co as i};
