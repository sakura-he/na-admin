import{a6 as K,j as at,ar as gt,aD as $t,aE as Tt,J as j,aF as jt,aG as qt,aH as Jt,aI as Qt,aJ as Kt,$ as Mt,aK as Yt,aL as xt,m as rt,aM as te,a4 as q,au as it,aN as ut,aO as ee,aP as mt,aQ as ae,aR as re,aS as tt,aT as ie,aU as nt,aV as ft,aW as ne,Z as oe,q as pt,aX as Rt,aY as vt,aZ as x,a_ as yt,a$ as se,b0 as le,a0 as ue,b1 as et,w as Gt,b2 as $,P as ve,b3 as dt,x as Vt,b4 as bt,as as he,b5 as Y,b6 as fe,b7 as St,at as Dt,b8 as _t,b9 as At,ba as ot,bb as It,bc as ce,bd as ge,be as me,bf as pe,bg as Pt,bh as ye,bi as de,l as be}from"./install-94e97f7b.js";var Se=function(){function r(e){this.coordSysDims=[],this.axisMap=gt(),this.categoryAxisMap=gt(),this.coordSysName=e}return r}();function De(r){var e=r.get("coordinateSystem"),t=new Se(e),a=_e[e];if(a)return a(r,t,t.axisMap,t.categoryAxisMap),t}var _e={cartesian2d:function(r,e,t,a){var o=r.getReferringComponents("xAxis",K).models[0],i=r.getReferringComponents("yAxis",K).models[0];e.coordSysDims=["x","y"],t.set("x",o),t.set("y",i),Z(o)&&(a.set("x",o),e.firstCategoryDimIndex=0),Z(i)&&(a.set("y",i),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(r,e,t,a){var o=r.getReferringComponents("singleAxis",K).models[0];e.coordSysDims=["single"],t.set("single",o),Z(o)&&(a.set("single",o),e.firstCategoryDimIndex=0)},polar:function(r,e,t,a){var o=r.getReferringComponents("polar",K).models[0],i=o.findAxisModel("radiusAxis"),n=o.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",i),t.set("angle",n),Z(i)&&(a.set("radius",i),e.firstCategoryDimIndex=0),Z(n)&&(a.set("angle",n),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(r,e,t,a){e.coordSysDims=["lng","lat"]},parallel:function(r,e,t,a){var o=r.ecModel,i=o.getComponent("parallel",r.get("parallelIndex")),n=e.coordSysDims=i.dimensions.slice();at(i.parallelAxisIndex,function(s,l){var u=o.getComponent("parallelAxis",s),f=n[l];t.set(f,u),Z(u)&&(a.set(f,u),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function Z(r){return r.get("type")==="category"}function Ae(r,e){var t=r.get("coordinateSystem"),a=xt.get(t),o;return e&&e.coordSysDims&&(o=rt(e.coordSysDims,function(i){var n={name:i},s=e.axisMap.get(i);if(s){var l=s.get("type");n.type=te(l)}return n})),o||(o=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),o}function Ie(r,e,t){var a,o;return t&&at(r,function(i,n){var s=i.coordDim,l=t.categoryAxisMap.get(s);l&&(a==null&&(a=n),i.ordinalMeta=l.getOrdinalMeta(),e&&(i.createInvertedIndices=!0)),i.otherDims.itemName!=null&&(o=!0)}),!o&&a!=null&&(r[a].otherDims.itemName=0),a}function Pe(r,e,t){t=t||{};var a=e.getSourceManager(),o,i=!1;r?(i=!0,o=$t(r)):(o=a.getSource(),i=o.sourceFormat===Tt);var n=De(e),s=Ae(e,n),l=t.useEncodeDefaulter,u=j(l)?l:l?jt(qt,s,e):null,f={coordDimensions:s,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!i},v=Jt(o,f),c=Ie(v.dimensions,t.createInvertedIndices,n),h=i?null:a.getSharedDataStore(v),m=Qt(e,{schema:v,store:h}),y=new Kt(v,e);y.setCalculationInfo(m);var d=c!=null&&Ce(o)?function(g,p,b,_){return _===c?b:this.defaultDimValueGetter(g,p,b,_)}:null;return y.hasItemOption=!1,y.initData(i?o:h,null,d),y}function Ce(r){if(r.sourceFormat===Tt){var e=Ne(r.data||[]);return!Mt(Yt(e))}}function Ne(r){for(var e=0;e<r.length&&r[e]==null;)e++;return r[e]}var we=function(r){q(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return Pe(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var a=new it,o=ut("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);a.add(o),o.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),n=this.getData().getVisual("symbolRotate"),s=i==="none"?"circle":i,l=t.itemHeight*.8,u=ut(s,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);a.add(u),u.setStyle(t.itemStyle);var f=t.iconRotate==="inherit"?n:t.iconRotate||0;return u.rotation=f*Math.PI/180,u.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),a},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(ee);const Le=we;function zt(r,e){var t=r.mapDimensionsAll("defaultedLabel"),a=t.length;if(a===1){var o=mt(r,e,t[0]);return o!=null?o+"":null}else if(a){for(var i=[],n=0;n<t.length;n++)i.push(mt(r,e,t[n]));return i.join(" ")}}function ke(r,e){var t=r.mapDimensionsAll("defaultedLabel");if(!Mt(e))return e+"";for(var a=[],o=0;o<t.length;o++){var i=r.getDimensionIndex(t[o]);i>=0&&a.push(e[i])}return a.join(" ")}var Ee=function(r){q(e,r);function e(t,a,o,i){var n=r.call(this)||this;return n.updateData(t,a,o,i),n}return e.prototype._createSymbol=function(t,a,o,i,n){this.removeAll();var s=ut(t,-1,-1,2,2,null,n);s.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),s.drift=Oe,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){ae(this.childAt(0))},e.prototype.downplay=function(){re(this.childAt(0))},e.prototype.setZ=function(t,a){var o=this.childAt(0);o.zlevel=t,o.z=a},e.prototype.setDraggable=function(t,a){var o=this.childAt(0);o.draggable=t,o.cursor=!a&&t?"move":o.cursor},e.prototype.updateData=function(t,a,o,i){this.silent=!1;var n=t.getItemVisual(a,"symbol")||"circle",s=t.hostModel,l=e.getSymbolSize(t,a),u=n!==this._symbolType,f=i&&i.disableAnimation;if(u){var v=t.getItemVisual(a,"symbolKeepAspect");this._createSymbol(n,t,a,l,v)}else{var c=this.childAt(0);c.silent=!1;var h={scaleX:l[0]/2,scaleY:l[1]/2};f?c.attr(h):tt(c,h,s,a),ie(c)}if(this._updateCommon(t,a,l,o,i),u){var c=this.childAt(0);if(!f){var h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:c.style.opacity}};c.scaleX=c.scaleY=0,c.style.opacity=0,nt(c,h,s,a)}}f&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,a,o,i,n){var s=this.childAt(0),l=t.hostModel,u,f,v,c,h,m,y,d,g;if(i&&(u=i.emphasisItemStyle,f=i.blurItemStyle,v=i.selectItemStyle,c=i.focus,h=i.blurScope,y=i.labelStatesModels,d=i.hoverScale,g=i.cursorStyle,m=i.emphasisDisabled),!i||t.hasItemOption){var p=i&&i.itemModel?i.itemModel:t.getItemModel(a),b=p.getModel("emphasis");u=b.getModel("itemStyle").getItemStyle(),v=p.getModel(["select","itemStyle"]).getItemStyle(),f=p.getModel(["blur","itemStyle"]).getItemStyle(),c=b.get("focus"),h=b.get("blurScope"),m=b.get("disabled"),y=ft(p),d=b.getShallow("scale"),g=p.getShallow("cursor")}var _=t.getItemVisual(a,"symbolRotate");s.attr("rotation",(_||0)*Math.PI/180||0);var I=ne(t.getItemVisual(a,"symbolOffset"),o);I&&(s.x=I[0],s.y=I[1]),g&&s.attr("cursor",g);var S=t.getItemVisual(a,"style"),D=S.fill;if(s instanceof oe){var P=s.style;s.useStyle(pt({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},S))}else s.__isEmptyBrush?s.useStyle(pt({},S)):s.useStyle(S),s.style.decal=null,s.setColor(D,n&&n.symbolInnerColor),s.style.strokeNoScale=!0;var C=t.getItemVisual(a,"liftZ"),N=this._z2;C!=null?N==null&&(this._z2=s.z2,s.z2+=C):N!=null&&(s.z2=N,this._z2=null);var w=n&&n.useNameLabel;Rt(s,y,{labelFetcher:l,labelDataIndex:a,defaultText:A,inheritColor:D,defaultOpacity:S.opacity});function A(M){return w?t.getName(M):zt(t,M)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var L=s.ensureState("emphasis");L.style=u,s.ensureState("select").style=v,s.ensureState("blur").style=f;var T=d==null||d===!0?Math.max(1.1,3/this._sizeY):isFinite(d)&&d>0?+d:1;L.scaleX=this._sizeX*T,L.scaleY=this._sizeY*T,this.setSymbolScale(1),vt(this,c,h,m)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,a,o){var i=this.childAt(0),n=x(this).dataIndex,s=o&&o.animation;if(this.silent=i.silent=!0,o&&o.fadeLabel){var l=i.getTextContent();l&&yt(l,{style:{opacity:0}},a,{dataIndex:n,removeOpt:s,cb:function(){i.removeTextContent()}})}else i.removeTextContent();yt(i,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:n,cb:t,removeOpt:s})},e.getSymbolSize=function(t,a){return se(t.getItemVisual(a,"symbolSize"))},e}(it);function Oe(r,e){this.parent.drift(r,e)}const ct=Ee;function st(r,e,t,a){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(a.isIgnore&&a.isIgnore(t))&&!(a.clipShape&&!a.clipShape.contain(e[0],e[1]))&&r.getItemVisual(t,"symbol")!=="none"}function Ct(r){return r!=null&&!ue(r)&&(r={isIgnore:r}),r||{}}function Nt(r){var e=r.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:ft(e),cursorStyle:e.get("cursor")}}var Te=function(){function r(e){this.group=new it,this._SymbolCtor=e||ct}return r.prototype.updateData=function(e,t){this._progressiveEls=null,t=Ct(t);var a=this.group,o=e.hostModel,i=this._data,n=this._SymbolCtor,s=t.disableAnimation,l=Nt(e),u={disableAnimation:s},f=t.getSymbolPoint||function(v){return e.getItemLayout(v)};i||a.removeAll(),e.diff(i).add(function(v){var c=f(v);if(st(e,c,v,t)){var h=new n(e,v,l,u);h.setPosition(c),e.setItemGraphicEl(v,h),a.add(h)}}).update(function(v,c){var h=i.getItemGraphicEl(c),m=f(v);if(!st(e,m,v,t)){a.remove(h);return}var y=e.getItemVisual(v,"symbol")||"circle",d=h&&h.getSymbolType&&h.getSymbolType();if(!h||d&&d!==y)a.remove(h),h=new n(e,v,l,u),h.setPosition(m);else{h.updateData(e,v,l,u);var g={x:m[0],y:m[1]};s?h.attr(g):tt(h,g,o)}a.add(h),e.setItemGraphicEl(v,h)}).remove(function(v){var c=i.getItemGraphicEl(v);c&&c.fadeOut(function(){a.remove(c)},o)}).execute(),this._getSymbolPoint=f,this._data=e},r.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(a,o){var i=e._getSymbolPoint(o);a.setPosition(i),a.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Nt(e),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t,a){this._progressiveEls=[],a=Ct(a);function o(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var n=t.getItemLayout(i);if(st(t,n,i,a)){var s=new this._SymbolCtor(t,i,this._seriesScope);s.traverse(o),s.setPosition(n),this.group.add(s),t.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},r.prototype.eachRendered=function(e){le(this._progressiveEls||this.group,e)},r.prototype.remove=function(e){var t=this.group,a=this._data;a&&e?a.eachItemGraphicEl(function(o){o.fadeOut(function(){t.remove(o)},a.hostModel)}):t.removeAll()},r}();const Me=Te;function Ft(r,e,t){var a=r.getBaseAxis(),o=r.getOtherAxis(a),i=Re(o,t),n=a.dim,s=o.dim,l=e.mapDimension(s),u=e.mapDimension(n),f=s==="x"||s==="radius"?1:0,v=rt(r.dimensions,function(m){return e.mapDimension(m)}),c=!1,h=e.getCalculationInfo("stackResultDimension");return et(e,v[0])&&(c=!0,v[0]=h),et(e,v[1])&&(c=!0,v[1]=h),{dataDimsForPoint:v,valueStart:i,valueAxisDim:s,baseAxisDim:n,stacked:!!c,valueDim:l,baseDim:u,baseDataOffset:f,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Re(r,e){var t=0,a=r.scale.getExtent();return e==="start"?t=a[0]:e==="end"?t=a[1]:Gt(e)&&!isNaN(e)?t=e:a[0]>0?t=a[0]:a[1]<0&&(t=a[1]),t}function Ht(r,e,t,a){var o=NaN;r.stacked&&(o=t.get(t.getCalculationInfo("stackedOverDimension"),a)),isNaN(o)&&(o=r.valueStart);var i=r.baseDataOffset,n=[];return n[i]=t.get(r.baseDim,a),n[1-i]=o,e.dataToPoint(n)}function Ge(r,e){var t=[];return e.diff(r).add(function(a){t.push({cmd:"+",idx:a})}).update(function(a,o){t.push({cmd:"=",idx:o,idx1:a})}).remove(function(a){t.push({cmd:"-",idx:a})}).execute(),t}function Ve(r,e,t,a,o,i,n,s){for(var l=Ge(r,e),u=[],f=[],v=[],c=[],h=[],m=[],y=[],d=Ft(o,e,n),g=r.getLayout("points")||[],p=e.getLayout("points")||[],b=0;b<l.length;b++){var _=l[b],I=!0,S=void 0,D=void 0;switch(_.cmd){case"=":S=_.idx*2,D=_.idx1*2;var P=g[S],C=g[S+1],N=p[D],w=p[D+1];(isNaN(P)||isNaN(C))&&(P=N,C=w),u.push(P,C),f.push(N,w),v.push(t[S],t[S+1]),c.push(a[D],a[D+1]),y.push(e.getRawIndex(_.idx1));break;case"+":var A=_.idx,L=d.dataDimsForPoint,T=o.dataToPoint([e.get(L[0],A),e.get(L[1],A)]);D=A*2,u.push(T[0],T[1]),f.push(p[D],p[D+1]);var M=Ht(d,o,e,A);v.push(M[0],M[1]),c.push(a[D],a[D+1]),y.push(e.getRawIndex(A));break;case"-":I=!1}I&&(h.push(_),m.push(m.length))}m.sort(function(Q,O){return y[Q]-y[O]});for(var R=u.length,z=$(R),E=$(R),k=$(R),F=$(R),H=[],b=0;b<m.length;b++){var J=m[b],G=b*2,V=J*2;z[G]=u[V],z[G+1]=u[V+1],E[G]=f[V],E[G+1]=f[V+1],k[G]=v[V],k[G+1]=v[V+1],F[G]=c[V],F[G+1]=c[V+1],H[b]=h[J]}return{current:z,next:E,stackedOnCurrent:k,stackedOnNext:F,status:H}}var B=Math.min,U=Math.max;function X(r,e){return isNaN(r)||isNaN(e)}function ht(r,e,t,a,o,i,n,s,l){for(var u,f,v,c,h,m,y=t,d=0;d<a;d++){var g=e[y*2],p=e[y*2+1];if(y>=o||y<0)break;if(X(g,p)){if(l){y+=i;continue}break}if(y===t)r[i>0?"moveTo":"lineTo"](g,p),v=g,c=p;else{var b=g-u,_=p-f;if(b*b+_*_<.5){y+=i;continue}if(n>0){for(var I=y+i,S=e[I*2],D=e[I*2+1];S===g&&D===p&&d<a;)d++,I+=i,y+=i,S=e[I*2],D=e[I*2+1],g=e[y*2],p=e[y*2+1],b=g-u,_=p-f;var P=d+1;if(l)for(;X(S,D)&&P<a;)P++,I+=i,S=e[I*2],D=e[I*2+1];var C=.5,N=0,w=0,A=void 0,L=void 0;if(P>=a||X(S,D))h=g,m=p;else{N=S-u,w=D-f;var T=g-u,M=S-g,R=p-f,z=D-p,E=void 0,k=void 0;if(s==="x"){E=Math.abs(T),k=Math.abs(M);var F=N>0?1:-1;h=g-F*E*n,m=p,A=g+F*k*n,L=p}else if(s==="y"){E=Math.abs(R),k=Math.abs(z);var H=w>0?1:-1;h=g,m=p-H*E*n,A=g,L=p+H*k*n}else E=Math.sqrt(T*T+R*R),k=Math.sqrt(M*M+z*z),C=k/(k+E),h=g-N*n*(1-C),m=p-w*n*(1-C),A=g+N*n*C,L=p+w*n*C,A=B(A,U(S,g)),L=B(L,U(D,p)),A=U(A,B(S,g)),L=U(L,B(D,p)),N=A-g,w=L-p,h=g-N*E/k,m=p-w*E/k,h=B(h,U(u,g)),m=B(m,U(f,p)),h=U(h,B(u,g)),m=U(m,B(f,p)),N=g-h,w=p-m,A=g+N*k/E,L=p+w*k/E}r.bezierCurveTo(v,c,h,m,g,p),v=A,c=L}else r.lineTo(g,p)}u=g,f=p,y+=i}return d}var Bt=function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r}(),ze=function(r){q(e,r);function e(t){var a=r.call(this,t)||this;return a.type="ec-polyline",a}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Bt},e.prototype.buildPath=function(t,a){var o=a.points,i=0,n=o.length/2;if(a.connectNulls){for(;n>0&&X(o[n*2-2],o[n*2-1]);n--);for(;i<n&&X(o[i*2],o[i*2+1]);i++);}for(;i<n;)i+=ht(t,o,i,n,n,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},e.prototype.getPointOn=function(t,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o=this.path,i=o.data,n=ve.CMD,s,l,u=a==="x",f=[],v=0;v<i.length;){var c=i[v++],h=void 0,m=void 0,y=void 0,d=void 0,g=void 0,p=void 0,b=void 0;switch(c){case n.M:s=i[v++],l=i[v++];break;case n.L:if(h=i[v++],m=i[v++],b=u?(t-s)/(h-s):(t-l)/(m-l),b<=1&&b>=0){var _=u?(m-l)*b+l:(h-s)*b+s;return u?[t,_]:[_,t]}s=h,l=m;break;case n.C:h=i[v++],m=i[v++],y=i[v++],d=i[v++],g=i[v++],p=i[v++];var I=u?dt(s,h,y,g,t,f):dt(l,m,d,p,t,f);if(I>0)for(var S=0;S<I;S++){var D=f[S];if(D<=1&&D>=0){var _=u?bt(l,m,d,p,D):bt(s,h,y,g,D);return u?[t,_]:[_,t]}}s=g,l=p;break}}},e}(Vt),Fe=function(r){q(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Bt),He=function(r){q(e,r);function e(t){var a=r.call(this,t)||this;return a.type="ec-polygon",a}return e.prototype.getDefaultShape=function(){return new Fe},e.prototype.buildPath=function(t,a){var o=a.points,i=a.stackedOnPoints,n=0,s=o.length/2,l=a.smoothMonotone;if(a.connectNulls){for(;s>0&&X(o[s*2-2],o[s*2-1]);s--);for(;n<s&&X(o[n*2],o[n*2+1]);n++);}for(;n<s;){var u=ht(t,o,n,s,s,1,a.smooth,l,a.connectNulls);ht(t,i,n+u-1,u,s,-1,a.stackedOnSmooth,l,a.connectNulls),n+=u+1,t.closePath()}},e}(Vt);function Ut(r,e,t,a,o){var i=r.getArea(),n=i.x,s=i.y,l=i.width,u=i.height,f=t.get(["lineStyle","width"])||2;n-=f/2,s-=f/2,l+=f,u+=f,n=Math.floor(n),l=Math.round(l);var v=new he({shape:{x:n,y:s,width:l,height:u}});if(e){var c=r.getBaseAxis(),h=c.isHorizontal(),m=c.inverse;h?(m&&(v.shape.x+=l),v.shape.width=0):(m||(v.shape.y+=u),v.shape.height=0);var y=j(o)?function(d){o(d,v)}:null;nt(v,{shape:{width:l,height:u,x:n,y:s}},t,null,a,y)}return v}function Wt(r,e,t){var a=r.getArea(),o=Y(a.r0,1),i=Y(a.r,1),n=new fe({shape:{cx:Y(r.cx,1),cy:Y(r.cy,1),r0:o,r:i,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(e){var s=r.getBaseAxis().dim==="angle";s?n.shape.endAngle=a.startAngle:n.shape.r=o,nt(n,{shape:{endAngle:a.endAngle,r:i}},t)}return n}function ia(r,e,t,a,o){if(r){if(r.type==="polar")return Wt(r,e,t);if(r.type==="cartesian2d")return Ut(r,e,t,a,o)}else return null;return null}function Be(r,e){return r.type===e}function wt(r,e){if(r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return;return!0}}function Lt(r){for(var e=1/0,t=1/0,a=-1/0,o=-1/0,i=0;i<r.length;){var n=r[i++],s=r[i++];isNaN(n)||(e=Math.min(n,e),a=Math.max(n,a)),isNaN(s)||(t=Math.min(s,t),o=Math.max(s,o))}return[[e,t],[a,o]]}function kt(r,e){var t=Lt(r),a=t[0],o=t[1],i=Lt(e),n=i[0],s=i[1];return Math.max(Math.abs(a[0]-n[0]),Math.abs(a[1]-n[1]),Math.abs(o[0]-s[0]),Math.abs(o[1]-s[1]))}function Et(r){return Gt(r)?r:r?.5:0}function Ue(r,e,t){if(!t.valueDim)return[];for(var a=e.count(),o=$(a*2),i=0;i<a;i++){var n=Ht(t,r,e,i);o[i*2]=n[0],o[i*2+1]=n[1]}return o}function W(r,e,t,a){var o=e.getBaseAxis(),i=o.dim==="x"||o.dim==="radius"?0:1,n=[],s=0,l=[],u=[],f=[],v=[];if(a){for(s=0;s<r.length;s+=2)!isNaN(r[s])&&!isNaN(r[s+1])&&v.push(r[s],r[s+1]);r=v}for(s=0;s<r.length-2;s+=2)switch(f[0]=r[s+2],f[1]=r[s+3],u[0]=r[s],u[1]=r[s+1],n.push(u[0],u[1]),t){case"end":l[i]=f[i],l[1-i]=u[1-i],n.push(l[0],l[1]);break;case"middle":var c=(u[i]+f[i])/2,h=[];l[i]=h[i]=c,l[1-i]=u[1-i],h[1-i]=f[1-i],n.push(l[0],l[1]),n.push(h[0],h[1]);break;default:l[i]=u[i],l[1-i]=f[1-i],n.push(l[0],l[1])}return n.push(r[s++],r[s++]),n}function We(r,e){var t=[],a=r.length,o,i;function n(f,v,c){var h=f.coord,m=(c-h)/(v.coord-h),y=ye(m,[f.color,v.color]);return{coord:c,color:y}}for(var s=0;s<a;s++){var l=r[s],u=l.coord;if(u<0)o=l;else if(u>e){i?t.push(n(i,l,e)):o&&t.push(n(o,l,0),n(o,l,e));break}else o&&(t.push(n(o,l,0)),o=null),t.push(l),i=l}return t}function Xe(r,e,t){var a=r.getVisual("visualMeta");if(!(!a||!a.length||!r.count())&&e.type==="cartesian2d"){for(var o,i,n=a.length-1;n>=0;n--){var s=r.getDimensionInfo(a[n].dimension);if(o=s&&s.coordDim,o==="x"||o==="y"){i=a[n];break}}if(i){var l=e.getAxis(o),u=rt(i.stops,function(b){return{coord:l.toGlobalCoord(l.dataToCoord(b.value)),color:b.color}}),f=u.length,v=i.outerColors.slice();f&&u[0].coord>u[f-1].coord&&(u.reverse(),v.reverse());var c=We(u,o==="x"?t.getWidth():t.getHeight()),h=c.length;if(!h&&f)return u[0].coord<0?v[1]?v[1]:u[f-1].color:v[0]?v[0]:u[0].color;var m=10,y=c[0].coord-m,d=c[h-1].coord+m,g=d-y;if(g<.001)return"transparent";at(c,function(b){b.offset=(b.coord-y)/g}),c.push({offset:h?c[h-1].offset:.5,color:v[1]||"transparent"}),c.unshift({offset:h?c[0].offset:.5,color:v[0]||"transparent"});var p=new pe(0,0,0,0,c,!0);return p[o]=y,p[o+"2"]=d,p}}}function Ze(r,e,t){var a=r.get("showAllSymbol"),o=a==="auto";if(!(a&&!o)){var i=t.getAxesByScale("ordinal")[0];if(i&&!(o&&$e(i,e))){var n=e.mapDimension(i.dim),s={};return at(i.getViewLabels(),function(l){var u=i.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(e.get(n,l))}}}}function $e(r,e){var t=r.getExtent(),a=Math.abs(t[1]-t[0])/r.scale.count();isNaN(a)&&(a=0);for(var o=e.count(),i=Math.max(1,Math.round(o/5)),n=0;n<o;n+=i)if(ct.getSymbolSize(e,n)[r.isHorizontal()?1:0]*1.5>a)return!1;return!0}function je(r,e){return isNaN(r)||isNaN(e)}function qe(r){for(var e=r.length/2;e>0&&je(r[e*2-2],r[e*2-1]);e--);return e-1}function Ot(r,e){return[r[e*2],r[e*2+1]]}function Je(r,e,t){for(var a=r.length/2,o=t==="x"?0:1,i,n,s=0,l=-1,u=0;u<a;u++)if(n=r[u*2+o],!(isNaN(n)||isNaN(r[u*2+1-o]))){if(u===0){i=n;continue}if(i<=e&&n>=e||i>=e&&n<=e){l=u;break}s=u,i=n}return{range:[s,l],t:(e-i)/(n-i)}}function Xt(r){if(r.get(["endLabel","show"]))return!0;for(var e=0;e<Pt.length;e++)if(r.get([Pt[e],"endLabel","show"]))return!0;return!1}function lt(r,e,t,a){if(Be(e,"cartesian2d")){var o=a.getModel("endLabel"),i=o.get("valueAnimation"),n=a.getData(),s={lastFrameIndex:0},l=Xt(a)?function(h,m){r._endLabelOnDuring(h,m,n,s,i,o,e)}:null,u=e.getBaseAxis().isHorizontal(),f=Ut(e,t,a,function(){var h=r._endLabel;h&&t&&s.originalX!=null&&h.attr({x:s.originalX,y:s.originalY})},l);if(!a.get("clip",!0)){var v=f.shape,c=Math.max(v.width,v.height);u?(v.y-=c,v.height+=c*2):(v.x-=c,v.width+=c*2)}return l&&l(1,f),f}else return Wt(e,t,a)}function Qe(r,e){var t=e.getBaseAxis(),a=t.isHorizontal(),o=t.inverse,i=a?o?"right":"left":"center",n=a?"middle":o?"top":"bottom";return{normal:{align:r.get("align")||i,verticalAlign:r.get("verticalAlign")||n}}}var Ke=function(r){q(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(){var t=new it,a=new Me;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=t},e.prototype.render=function(t,a,o){var i=this,n=t.coordinateSystem,s=this.group,l=t.getData(),u=t.getModel("lineStyle"),f=t.getModel("areaStyle"),v=l.getLayout("points")||[],c=n.type==="polar",h=this._coordSys,m=this._symbolDraw,y=this._polyline,d=this._polygon,g=this._lineGroup,p=t.get("animation"),b=!f.isEmpty(),_=f.get("origin"),I=Ft(n,l,_),S=b&&Ue(n,l,I),D=t.get("showSymbol"),P=t.get("connectNulls"),C=D&&!c&&Ze(t,l,n),N=this._data;N&&N.eachItemGraphicEl(function(O,Zt){O.__temp&&(s.remove(O),N.setItemGraphicEl(Zt,null))}),D||m.remove(),s.add(g);var w=c?!1:t.get("step"),A;n&&n.getArea&&t.get("clip",!0)&&(A=n.getArea(),A.width!=null?(A.x-=.1,A.y-=.1,A.width+=.2,A.height+=.2):A.r0&&(A.r0-=.5,A.r+=.5)),this._clipShapeForSymbol=A;var L=Xe(l,n,o)||l.getVisual("style")[l.getVisual("drawType")];if(!(y&&h.type===n.type&&w===this._step))D&&m.updateData(l,{isIgnore:C,clipShape:A,disableAnimation:!0,getSymbolPoint:function(O){return[v[O*2],v[O*2+1]]}}),p&&this._initSymbolLabelAnimation(l,n,A),w&&(v=W(v,n,w,P),S&&(S=W(S,n,w,P))),y=this._newPolyline(v),b?d=this._newPolygon(v,S):d&&(g.remove(d),d=this._polygon=null),c||this._initOrUpdateEndLabel(t,n,St(L)),g.setClipPath(lt(this,n,!0,t));else{b&&!d?d=this._newPolygon(v,S):d&&!b&&(g.remove(d),d=this._polygon=null),c||this._initOrUpdateEndLabel(t,n,St(L));var T=g.getClipPath();if(T){var M=lt(this,n,!1,t);nt(T,{shape:M.shape},t)}else g.setClipPath(lt(this,n,!0,t));D&&m.updateData(l,{isIgnore:C,clipShape:A,disableAnimation:!0,getSymbolPoint:function(O){return[v[O*2],v[O*2+1]]}}),(!wt(this._stackedOnPoints,S)||!wt(this._points,v))&&(p?this._doUpdateAnimation(l,S,n,o,w,_,P):(w&&(v=W(v,n,w,P),S&&(S=W(S,n,w,P))),y.setShape({points:v}),d&&d.setShape({points:v,stackedOnPoints:S})))}var R=t.getModel("emphasis"),z=R.get("focus"),E=R.get("blurScope"),k=R.get("disabled");if(y.useStyle(Dt(u.getLineStyle(),{fill:"none",stroke:L,lineJoin:"bevel"})),_t(y,t,"lineStyle"),y.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var F=y.getState("emphasis").style;F.lineWidth=+y.style.lineWidth+1}x(y).seriesIndex=t.seriesIndex,vt(y,z,E,k);var H=Et(t.get("smooth")),J=t.get("smoothMonotone");if(y.setShape({smooth:H,smoothMonotone:J,connectNulls:P}),d){var G=l.getCalculationInfo("stackedOnSeries"),V=0;d.useStyle(Dt(f.getAreaStyle(),{fill:L,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),G&&(V=Et(G.get("smooth"))),d.setShape({smooth:H,stackedOnSmooth:V,smoothMonotone:J,connectNulls:P}),_t(d,t,"areaStyle"),x(d).seriesIndex=t.seriesIndex,vt(d,z,E,k)}var Q=function(O){i._changePolyState(O)};l.eachItemGraphicEl(function(O){O&&(O.onHoverStateChange=Q)}),this._polyline.onHoverStateChange=Q,this._data=l,this._coordSys=n,this._stackedOnPoints=S,this._points=v,this._step=w,this._valueOrigin=_,t.get("triggerLineEvent")&&(this.packEventData(t,y),d&&this.packEventData(t,d))},e.prototype.packEventData=function(t,a){x(a).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,a,o,i){var n=t.getData(),s=At(n,i);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=n.getLayout("points"),u=n.getItemGraphicEl(s);if(!u){var f=l[s*2],v=l[s*2+1];if(isNaN(f)||isNaN(v)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(f,v))return;var c=t.get("zlevel")||0,h=t.get("z")||0;u=new ct(n,s),u.x=f,u.y=v,u.setZ(c,h);var m=u.getSymbolPath().getTextContent();m&&(m.zlevel=c,m.z=h,m.z2=this._polyline.z2+1),u.__temp=!0,n.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else ot.prototype.highlight.call(this,t,a,o,i)},e.prototype.downplay=function(t,a,o,i){var n=t.getData(),s=At(n,i);if(this._changePolyState("normal"),s!=null&&s>=0){var l=n.getItemGraphicEl(s);l&&(l.__temp?(n.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else ot.prototype.downplay.call(this,t,a,o,i)},e.prototype._changePolyState=function(t){var a=this._polygon;It(this._polyline,t),a&&It(a,t)},e.prototype._newPolyline=function(t){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new ze({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},e.prototype._newPolygon=function(t,a){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new He({shape:{points:t,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},e.prototype._initSymbolLabelAnimation=function(t,a,o){var i,n,s=a.getBaseAxis(),l=s.inverse;a.type==="cartesian2d"?(i=s.isHorizontal(),n=!1):a.type==="polar"&&(i=s.dim==="angle",n=!0);var u=t.hostModel,f=u.get("animationDuration");j(f)&&(f=f(null));var v=u.get("animationDelay")||0,c=j(v)?v(null):v;t.eachItemGraphicEl(function(h,m){var y=h;if(y){var d=[h.x,h.y],g=void 0,p=void 0,b=void 0;if(o)if(n){var _=o,I=a.pointToCoord(d);i?(g=_.startAngle,p=_.endAngle,b=-I[1]/180*Math.PI):(g=_.r0,p=_.r,b=I[0])}else{var S=o;i?(g=S.x,p=S.x+S.width,b=h.x):(g=S.y+S.height,p=S.y,b=h.y)}var D=p===g?0:(b-g)/(p-g);l&&(D=1-D);var P=j(v)?v(m):f*D+c,C=y.getSymbolPath(),N=C.getTextContent();y.attr({scaleX:0,scaleY:0}),y.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:P}),N&&N.animateFrom({style:{opacity:0}},{duration:300,delay:P}),C.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,a,o){var i=t.getModel("endLabel");if(Xt(t)){var n=t.getData(),s=this._polyline,l=n.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new ce({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var f=qe(l);f>=0&&(Rt(s,ft(t,"endLabel"),{inheritColor:o,labelFetcher:t,labelDataIndex:f,defaultText:function(v,c,h){return h!=null?ke(n,h):zt(n,v)},enableTextSetter:!0},Qe(i,a)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,a,o,i,n,s,l){var u=this._endLabel,f=this._polyline;if(u){t<1&&i.originalX==null&&(i.originalX=u.x,i.originalY=u.y);var v=o.getLayout("points"),c=o.hostModel,h=c.get("connectNulls"),m=s.get("precision"),y=s.get("distance")||0,d=l.getBaseAxis(),g=d.isHorizontal(),p=d.inverse,b=a.shape,_=p?g?b.x:b.y+b.height:g?b.x+b.width:b.y,I=(g?y:0)*(p?-1:1),S=(g?0:-y)*(p?-1:1),D=g?"x":"y",P=Je(v,_,D),C=P.range,N=C[1]-C[0],w=void 0;if(N>=1){if(N>1&&!h){var A=Ot(v,C[0]);u.attr({x:A[0]+I,y:A[1]+S}),n&&(w=c.getRawValue(C[0]))}else{var A=f.getPointOn(_,D);A&&u.attr({x:A[0]+I,y:A[1]+S});var L=c.getRawValue(C[0]),T=c.getRawValue(C[1]);n&&(w=ge(o,m,L,T,P.t))}i.lastFrameIndex=C[0]}else{var M=t===1||i.lastFrameIndex>0?C[0]:0,A=Ot(v,M);n&&(w=c.getRawValue(M)),u.attr({x:A[0]+I,y:A[1]+S})}n&&me(u).setLabelText(w)}},e.prototype._doUpdateAnimation=function(t,a,o,i,n,s,l){var u=this._polyline,f=this._polygon,v=t.hostModel,c=Ve(this._data,t,this._stackedOnPoints,a,this._coordSys,o,this._valueOrigin),h=c.current,m=c.stackedOnCurrent,y=c.next,d=c.stackedOnNext;if(n&&(h=W(c.current,o,n,l),m=W(c.stackedOnCurrent,o,n,l),y=W(c.next,o,n,l),d=W(c.stackedOnNext,o,n,l)),kt(h,y)>3e3||f&&kt(m,d)>3e3){u.stopAnimation(),u.setShape({points:y}),f&&(f.stopAnimation(),f.setShape({points:y,stackedOnPoints:d}));return}u.shape.__points=c.current,u.shape.points=h;var g={shape:{points:y}};c.current!==h&&(g.shape.__points=c.next),u.stopAnimation(),tt(u,g,v),f&&(f.setShape({points:h,stackedOnPoints:m}),f.stopAnimation(),tt(f,{shape:{stackedOnPoints:d}},v),u.shape.points!==f.shape.points&&(f.shape.points=u.shape.points));for(var p=[],b=c.status,_=0;_<b.length;_++){var I=b[_].cmd;if(I==="="){var S=t.getItemGraphicEl(b[_].idx1);S&&p.push({el:S,ptIdx:_})}}u.animators&&u.animators.length&&u.animators[0].during(function(){f&&f.dirtyShape();for(var D=u.shape.__points,P=0;P<p.length;P++){var C=p[P].el,N=p[P].ptIdx*2;C.x=D[N],C.y=D[N+1],C.markRedraw()}})},e.prototype.remove=function(t){var a=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(i,n){i.__temp&&(a.remove(i),o.setItemGraphicEl(n,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(ot);const Ye=Ke;function xe(r,e){return{seriesType:r,plan:de(),reset:function(t){var a=t.getData(),o=t.coordinateSystem,i=t.pipelineContext,n=e||i.large;if(o){var s=rt(o.dimensions,function(h){return a.mapDimension(h)}).slice(0,2),l=s.length,u=a.getCalculationInfo("stackResultDimension");et(a,s[0])&&(s[0]=u),et(a,s[1])&&(s[1]=u);var f=a.getStore(),v=a.getDimensionIndex(s[0]),c=a.getDimensionIndex(s[1]);return l&&{progress:function(h,m){for(var y=h.end-h.start,d=n&&$(y*l),g=[],p=[],b=h.start,_=0;b<h.end;b++){var I=void 0;if(l===1){var S=f.get(v,b);I=o.dataToPoint(S,null,p)}else g[0]=f.get(v,b),g[1]=f.get(c,b),I=o.dataToPoint(g,null,p);n?(d[_++]=I[0],d[_++]=I[1]):m.setItemLayout(b,I.slice())}n&&m.setLayout("points",d)}}}}}}var ta={average:function(r){for(var e=0,t=0,a=0;a<r.length;a++)isNaN(r[a])||(e+=r[a],t++);return t===0?NaN:e/t},sum:function(r){for(var e=0,t=0;t<r.length;t++)e+=r[t]||0;return e},max:function(r){for(var e=-1/0,t=0;t<r.length;t++)r[t]>e&&(e=r[t]);return isFinite(e)?e:NaN},min:function(r){for(var e=1/0,t=0;t<r.length;t++)r[t]<e&&(e=r[t]);return isFinite(e)?e:NaN},nearest:function(r){return r[0]}},ea=function(r){return Math.round(r.length/2)};function aa(r){return{seriesType:r,reset:function(e,t,a){var o=e.getData(),i=e.get("sampling"),n=e.coordinateSystem,s=o.count();if(s>10&&n.type==="cartesian2d"&&i){var l=n.getBaseAxis(),u=n.getOtherAxis(l),f=l.getExtent(),v=a.getDevicePixelRatio(),c=Math.abs(f[1]-f[0])*(v||1),h=Math.round(s/c);if(isFinite(h)&&h>1){i==="lttb"&&e.setData(o.lttbDownSample(o.mapDimension(u.dim),1/h));var m=void 0;be(i)?m=ta[i]:j(i)&&(m=i),m&&e.setData(o.downSample(o.mapDimension(u.dim),1/h,m,ea))}}}}}function na(r){r.registerChartView(Ye),r.registerSeriesModel(Le),r.registerLayout(xe("line",!0)),r.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),a=e.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",a)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,aa("line"))}export{ia as a,Be as b,Pe as c,ke as d,aa as e,zt as g,na as i};
